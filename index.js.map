{
  "version": 3,
  "sources": ["../node_modules/dompurify/src/utils.js", "../node_modules/dompurify/src/tags.js", "../node_modules/dompurify/src/attrs.js", "../node_modules/dompurify/src/regexp.js", "../node_modules/dompurify/src/purify.js", "../node_modules/isomorphic-dompurify/browser.js", "../src/LocalStorage.ts", "../node_modules/@noble/secp256k1/lib/esm/index.js", "../node_modules/@noble/hashes/esm/cryptoBrowser.js", "../node_modules/@noble/hashes/esm/utils.js", "../node_modules/@noble/hashes/esm/_sha2.js", "../node_modules/@noble/hashes/esm/sha256.js", "../node_modules/@scure/base/lib/esm/index.js", "../node_modules/@scure/bip39/wordlists/english.js", "../node_modules/@scure/bip39/node_modules/@noble/hashes/src/_assert.ts", "../node_modules/@scure/bip39/node_modules/@noble/hashes/src/cryptoBrowser.ts", "../node_modules/@scure/bip39/node_modules/@noble/hashes/src/utils.ts", "../node_modules/@scure/bip39/node_modules/@noble/hashes/src/hmac.ts", "../node_modules/@scure/bip39/node_modules/@noble/hashes/src/pbkdf2.ts", "../node_modules/@scure/bip39/node_modules/@noble/hashes/src/_sha2.ts", "../node_modules/@scure/bip39/node_modules/@noble/hashes/src/sha256.ts", "../node_modules/@scure/bip39/node_modules/@noble/hashes/src/_u64.ts", "../node_modules/@scure/bip39/node_modules/@noble/hashes/src/sha512.ts", "../node_modules/@scure/base/lib/index.js", "../node_modules/@scure/bip39/index.js", "../node_modules/@scure/bip32/node_modules/@noble/hashes/src/_assert.ts", "../node_modules/@scure/bip32/node_modules/@noble/hashes/src/cryptoBrowser.ts", "../node_modules/@scure/bip32/node_modules/@noble/hashes/src/utils.ts", "../node_modules/@scure/bip32/node_modules/@noble/hashes/src/hmac.ts", "../node_modules/@scure/bip32/node_modules/@noble/hashes/src/_sha2.ts", "../node_modules/@scure/bip32/node_modules/@noble/hashes/src/ripemd160.ts", "../node_modules/@scure/bip32/node_modules/@noble/hashes/src/sha256.ts", "../node_modules/@scure/bip32/node_modules/@noble/hashes/src/_u64.ts", "../node_modules/@scure/bip32/node_modules/@noble/hashes/src/sha512.ts", "../node_modules/@scure/bip32/index.ts", "../node_modules/@noble/hashes/esm/hmac.js", "../node_modules/nostr-tools/lib/esm/nostr.mjs", "../src/RelayManagement.ts", "../src/fetchEvents.ts", "../node_modules/timeago.js/src/lang/en_US.ts", "../node_modules/timeago.js/src/lang/zh_CN.ts", "../node_modules/timeago.js/src/register.ts", "../node_modules/timeago.js/src/utils/date.ts", "../node_modules/timeago.js/src/format.ts", "../node_modules/timeago.js/src/utils/dom.ts", "../node_modules/timeago.js/src/realtime.ts", "../node_modules/timeago.js/src/index.ts", "../src/LoadHistory.ts", "../src/LoadContactsPage.ts", "../src/LoadMetadataPage.ts", "../src/LoadRelaysPage.ts", "../src/LoadProfileHome.ts", "../src/LoadDeletePage.ts", "../src/Logout.ts", "../src/index.ts"],
  "sourcesContent": ["const {\n  entries,\n  setPrototypeOf,\n  isFrozen,\n  getPrototypeOf,\n  getOwnPropertyDescriptor,\n} = Object;\n\nlet { freeze, seal, create } = Object; // eslint-disable-line import/no-mutable-exports\nlet { apply, construct } = typeof Reflect !== 'undefined' && Reflect;\n\nif (!apply) {\n  apply = function (fun, thisValue, args) {\n    return fun.apply(thisValue, args);\n  };\n}\n\nif (!freeze) {\n  freeze = function (x) {\n    return x;\n  };\n}\n\nif (!seal) {\n  seal = function (x) {\n    return x;\n  };\n}\n\nif (!construct) {\n  construct = function (Func, args) {\n    return new Func(...args);\n  };\n}\n\nconst arrayForEach = unapply(Array.prototype.forEach);\nconst arrayIndexOf = unapply(Array.prototype.indexOf);\nconst arrayPop = unapply(Array.prototype.pop);\nconst arrayPush = unapply(Array.prototype.push);\nconst arraySlice = unapply(Array.prototype.slice);\n\nconst stringToLowerCase = unapply(String.prototype.toLowerCase);\nconst stringToString = unapply(String.prototype.toString);\nconst stringMatch = unapply(String.prototype.match);\nconst stringReplace = unapply(String.prototype.replace);\nconst stringIndexOf = unapply(String.prototype.indexOf);\nconst stringTrim = unapply(String.prototype.trim);\n\nconst regExpTest = unapply(RegExp.prototype.test);\n\nconst typeErrorCreate = unconstruct(TypeError);\n\nexport function unapply(func) {\n  return (thisArg, ...args) => apply(func, thisArg, args);\n}\n\nexport function unconstruct(func) {\n  return (...args) => construct(func, args);\n}\n\n/* Add properties to a lookup table */\nexport function addToSet(set, array, transformCaseFunc) {\n  transformCaseFunc = transformCaseFunc ?? stringToLowerCase;\n  if (setPrototypeOf) {\n    // Make 'in' and truthy checks like Boolean(set.constructor)\n    // independent of any properties defined on Object.prototype.\n    // Prevent prototype setters from intercepting set as a this value.\n    setPrototypeOf(set, null);\n  }\n\n  let l = array.length;\n  while (l--) {\n    let element = array[l];\n    if (typeof element === 'string') {\n      const lcElement = transformCaseFunc(element);\n      if (lcElement !== element) {\n        // Config presets (e.g. tags.js, attrs.js) are immutable.\n        if (!isFrozen(array)) {\n          array[l] = lcElement;\n        }\n\n        element = lcElement;\n      }\n    }\n\n    set[element] = true;\n  }\n\n  return set;\n}\n\n/* Shallow clone an object */\nexport function clone(object) {\n  const newObject = create(null);\n\n  for (const [property, value] of entries(object)) {\n    newObject[property] = value;\n  }\n\n  return newObject;\n}\n\n/* This method automatically checks if the prop is function\n * or getter and behaves accordingly. */\nfunction lookupGetter(object, prop) {\n  while (object !== null) {\n    const desc = getOwnPropertyDescriptor(object, prop);\n    if (desc) {\n      if (desc.get) {\n        return unapply(desc.get);\n      }\n\n      if (typeof desc.value === 'function') {\n        return unapply(desc.value);\n      }\n    }\n\n    object = getPrototypeOf(object);\n  }\n\n  function fallbackValue(element) {\n    console.warn('fallback value for', element);\n    return null;\n  }\n\n  return fallbackValue;\n}\n\nexport {\n  // Array\n  arrayForEach,\n  arrayIndexOf,\n  arrayPop,\n  arrayPush,\n  arraySlice,\n  // Object\n  entries,\n  freeze,\n  getPrototypeOf,\n  getOwnPropertyDescriptor,\n  isFrozen,\n  setPrototypeOf,\n  seal,\n  // RegExp\n  regExpTest,\n  // String\n  stringIndexOf,\n  stringMatch,\n  stringReplace,\n  stringToLowerCase,\n  stringToString,\n  stringTrim,\n  // Errors\n  typeErrorCreate,\n  // Other\n  lookupGetter,\n};\n", "import { freeze } from './utils.js';\n\nexport const html = freeze([\n  'a',\n  'abbr',\n  'acronym',\n  'address',\n  'area',\n  'article',\n  'aside',\n  'audio',\n  'b',\n  'bdi',\n  'bdo',\n  'big',\n  'blink',\n  'blockquote',\n  'body',\n  'br',\n  'button',\n  'canvas',\n  'caption',\n  'center',\n  'cite',\n  'code',\n  'col',\n  'colgroup',\n  'content',\n  'data',\n  'datalist',\n  'dd',\n  'decorator',\n  'del',\n  'details',\n  'dfn',\n  'dialog',\n  'dir',\n  'div',\n  'dl',\n  'dt',\n  'element',\n  'em',\n  'fieldset',\n  'figcaption',\n  'figure',\n  'font',\n  'footer',\n  'form',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  'head',\n  'header',\n  'hgroup',\n  'hr',\n  'html',\n  'i',\n  'img',\n  'input',\n  'ins',\n  'kbd',\n  'label',\n  'legend',\n  'li',\n  'main',\n  'map',\n  'mark',\n  'marquee',\n  'menu',\n  'menuitem',\n  'meter',\n  'nav',\n  'nobr',\n  'ol',\n  'optgroup',\n  'option',\n  'output',\n  'p',\n  'picture',\n  'pre',\n  'progress',\n  'q',\n  'rp',\n  'rt',\n  'ruby',\n  's',\n  'samp',\n  'section',\n  'select',\n  'shadow',\n  'small',\n  'source',\n  'spacer',\n  'span',\n  'strike',\n  'strong',\n  'style',\n  'sub',\n  'summary',\n  'sup',\n  'table',\n  'tbody',\n  'td',\n  'template',\n  'textarea',\n  'tfoot',\n  'th',\n  'thead',\n  'time',\n  'tr',\n  'track',\n  'tt',\n  'u',\n  'ul',\n  'var',\n  'video',\n  'wbr',\n]);\n\n// SVG\nexport const svg = freeze([\n  'svg',\n  'a',\n  'altglyph',\n  'altglyphdef',\n  'altglyphitem',\n  'animatecolor',\n  'animatemotion',\n  'animatetransform',\n  'circle',\n  'clippath',\n  'defs',\n  'desc',\n  'ellipse',\n  'filter',\n  'font',\n  'g',\n  'glyph',\n  'glyphref',\n  'hkern',\n  'image',\n  'line',\n  'lineargradient',\n  'marker',\n  'mask',\n  'metadata',\n  'mpath',\n  'path',\n  'pattern',\n  'polygon',\n  'polyline',\n  'radialgradient',\n  'rect',\n  'stop',\n  'style',\n  'switch',\n  'symbol',\n  'text',\n  'textpath',\n  'title',\n  'tref',\n  'tspan',\n  'view',\n  'vkern',\n]);\n\nexport const svgFilters = freeze([\n  'feBlend',\n  'feColorMatrix',\n  'feComponentTransfer',\n  'feComposite',\n  'feConvolveMatrix',\n  'feDiffuseLighting',\n  'feDisplacementMap',\n  'feDistantLight',\n  'feDropShadow',\n  'feFlood',\n  'feFuncA',\n  'feFuncB',\n  'feFuncG',\n  'feFuncR',\n  'feGaussianBlur',\n  'feImage',\n  'feMerge',\n  'feMergeNode',\n  'feMorphology',\n  'feOffset',\n  'fePointLight',\n  'feSpecularLighting',\n  'feSpotLight',\n  'feTile',\n  'feTurbulence',\n]);\n\n// List of SVG elements that are disallowed by default.\n// We still need to know them so that we can do namespace\n// checks properly in case one wants to add them to\n// allow-list.\nexport const svgDisallowed = freeze([\n  'animate',\n  'color-profile',\n  'cursor',\n  'discard',\n  'font-face',\n  'font-face-format',\n  'font-face-name',\n  'font-face-src',\n  'font-face-uri',\n  'foreignobject',\n  'hatch',\n  'hatchpath',\n  'mesh',\n  'meshgradient',\n  'meshpatch',\n  'meshrow',\n  'missing-glyph',\n  'script',\n  'set',\n  'solidcolor',\n  'unknown',\n  'use',\n]);\n\nexport const mathMl = freeze([\n  'math',\n  'menclose',\n  'merror',\n  'mfenced',\n  'mfrac',\n  'mglyph',\n  'mi',\n  'mlabeledtr',\n  'mmultiscripts',\n  'mn',\n  'mo',\n  'mover',\n  'mpadded',\n  'mphantom',\n  'mroot',\n  'mrow',\n  'ms',\n  'mspace',\n  'msqrt',\n  'mstyle',\n  'msub',\n  'msup',\n  'msubsup',\n  'mtable',\n  'mtd',\n  'mtext',\n  'mtr',\n  'munder',\n  'munderover',\n  'mprescripts',\n]);\n\n// Similarly to SVG, we want to know all MathML elements,\n// even those that we disallow by default.\nexport const mathMlDisallowed = freeze([\n  'maction',\n  'maligngroup',\n  'malignmark',\n  'mlongdiv',\n  'mscarries',\n  'mscarry',\n  'msgroup',\n  'mstack',\n  'msline',\n  'msrow',\n  'semantics',\n  'annotation',\n  'annotation-xml',\n  'mprescripts',\n  'none',\n]);\n\nexport const text = freeze(['#text']);\n", "import { freeze } from './utils.js';\n\nexport const html = freeze([\n  'accept',\n  'action',\n  'align',\n  'alt',\n  'autocapitalize',\n  'autocomplete',\n  'autopictureinpicture',\n  'autoplay',\n  'background',\n  'bgcolor',\n  'border',\n  'capture',\n  'cellpadding',\n  'cellspacing',\n  'checked',\n  'cite',\n  'class',\n  'clear',\n  'color',\n  'cols',\n  'colspan',\n  'controls',\n  'controlslist',\n  'coords',\n  'crossorigin',\n  'datetime',\n  'decoding',\n  'default',\n  'dir',\n  'disabled',\n  'disablepictureinpicture',\n  'disableremoteplayback',\n  'download',\n  'draggable',\n  'enctype',\n  'enterkeyhint',\n  'face',\n  'for',\n  'headers',\n  'height',\n  'hidden',\n  'high',\n  'href',\n  'hreflang',\n  'id',\n  'inputmode',\n  'integrity',\n  'ismap',\n  'kind',\n  'label',\n  'lang',\n  'list',\n  'loading',\n  'loop',\n  'low',\n  'max',\n  'maxlength',\n  'media',\n  'method',\n  'min',\n  'minlength',\n  'multiple',\n  'muted',\n  'name',\n  'nonce',\n  'noshade',\n  'novalidate',\n  'nowrap',\n  'open',\n  'optimum',\n  'pattern',\n  'placeholder',\n  'playsinline',\n  'poster',\n  'preload',\n  'pubdate',\n  'radiogroup',\n  'readonly',\n  'rel',\n  'required',\n  'rev',\n  'reversed',\n  'role',\n  'rows',\n  'rowspan',\n  'spellcheck',\n  'scope',\n  'selected',\n  'shape',\n  'size',\n  'sizes',\n  'span',\n  'srclang',\n  'start',\n  'src',\n  'srcset',\n  'step',\n  'style',\n  'summary',\n  'tabindex',\n  'title',\n  'translate',\n  'type',\n  'usemap',\n  'valign',\n  'value',\n  'width',\n  'xmlns',\n  'slot',\n]);\n\nexport const svg = freeze([\n  'accent-height',\n  'accumulate',\n  'additive',\n  'alignment-baseline',\n  'ascent',\n  'attributename',\n  'attributetype',\n  'azimuth',\n  'basefrequency',\n  'baseline-shift',\n  'begin',\n  'bias',\n  'by',\n  'class',\n  'clip',\n  'clippathunits',\n  'clip-path',\n  'clip-rule',\n  'color',\n  'color-interpolation',\n  'color-interpolation-filters',\n  'color-profile',\n  'color-rendering',\n  'cx',\n  'cy',\n  'd',\n  'dx',\n  'dy',\n  'diffuseconstant',\n  'direction',\n  'display',\n  'divisor',\n  'dur',\n  'edgemode',\n  'elevation',\n  'end',\n  'fill',\n  'fill-opacity',\n  'fill-rule',\n  'filter',\n  'filterunits',\n  'flood-color',\n  'flood-opacity',\n  'font-family',\n  'font-size',\n  'font-size-adjust',\n  'font-stretch',\n  'font-style',\n  'font-variant',\n  'font-weight',\n  'fx',\n  'fy',\n  'g1',\n  'g2',\n  'glyph-name',\n  'glyphref',\n  'gradientunits',\n  'gradienttransform',\n  'height',\n  'href',\n  'id',\n  'image-rendering',\n  'in',\n  'in2',\n  'k',\n  'k1',\n  'k2',\n  'k3',\n  'k4',\n  'kerning',\n  'keypoints',\n  'keysplines',\n  'keytimes',\n  'lang',\n  'lengthadjust',\n  'letter-spacing',\n  'kernelmatrix',\n  'kernelunitlength',\n  'lighting-color',\n  'local',\n  'marker-end',\n  'marker-mid',\n  'marker-start',\n  'markerheight',\n  'markerunits',\n  'markerwidth',\n  'maskcontentunits',\n  'maskunits',\n  'max',\n  'mask',\n  'media',\n  'method',\n  'mode',\n  'min',\n  'name',\n  'numoctaves',\n  'offset',\n  'operator',\n  'opacity',\n  'order',\n  'orient',\n  'orientation',\n  'origin',\n  'overflow',\n  'paint-order',\n  'path',\n  'pathlength',\n  'patterncontentunits',\n  'patterntransform',\n  'patternunits',\n  'points',\n  'preservealpha',\n  'preserveaspectratio',\n  'primitiveunits',\n  'r',\n  'rx',\n  'ry',\n  'radius',\n  'refx',\n  'refy',\n  'repeatcount',\n  'repeatdur',\n  'restart',\n  'result',\n  'rotate',\n  'scale',\n  'seed',\n  'shape-rendering',\n  'specularconstant',\n  'specularexponent',\n  'spreadmethod',\n  'startoffset',\n  'stddeviation',\n  'stitchtiles',\n  'stop-color',\n  'stop-opacity',\n  'stroke-dasharray',\n  'stroke-dashoffset',\n  'stroke-linecap',\n  'stroke-linejoin',\n  'stroke-miterlimit',\n  'stroke-opacity',\n  'stroke',\n  'stroke-width',\n  'style',\n  'surfacescale',\n  'systemlanguage',\n  'tabindex',\n  'targetx',\n  'targety',\n  'transform',\n  'transform-origin',\n  'text-anchor',\n  'text-decoration',\n  'text-rendering',\n  'textlength',\n  'type',\n  'u1',\n  'u2',\n  'unicode',\n  'values',\n  'viewbox',\n  'visibility',\n  'version',\n  'vert-adv-y',\n  'vert-origin-x',\n  'vert-origin-y',\n  'width',\n  'word-spacing',\n  'wrap',\n  'writing-mode',\n  'xchannelselector',\n  'ychannelselector',\n  'x',\n  'x1',\n  'x2',\n  'xmlns',\n  'y',\n  'y1',\n  'y2',\n  'z',\n  'zoomandpan',\n]);\n\nexport const mathMl = freeze([\n  'accent',\n  'accentunder',\n  'align',\n  'bevelled',\n  'close',\n  'columnsalign',\n  'columnlines',\n  'columnspan',\n  'denomalign',\n  'depth',\n  'dir',\n  'display',\n  'displaystyle',\n  'encoding',\n  'fence',\n  'frame',\n  'height',\n  'href',\n  'id',\n  'largeop',\n  'length',\n  'linethickness',\n  'lspace',\n  'lquote',\n  'mathbackground',\n  'mathcolor',\n  'mathsize',\n  'mathvariant',\n  'maxsize',\n  'minsize',\n  'movablelimits',\n  'notation',\n  'numalign',\n  'open',\n  'rowalign',\n  'rowlines',\n  'rowspacing',\n  'rowspan',\n  'rspace',\n  'rquote',\n  'scriptlevel',\n  'scriptminsize',\n  'scriptsizemultiplier',\n  'selection',\n  'separator',\n  'separators',\n  'stretchy',\n  'subscriptshift',\n  'supscriptshift',\n  'symmetric',\n  'voffset',\n  'width',\n  'xmlns',\n]);\n\nexport const xml = freeze([\n  'xlink:href',\n  'xml:id',\n  'xlink:title',\n  'xml:space',\n  'xmlns:xlink',\n]);\n", "import { seal } from './utils.js';\n\n// eslint-disable-next-line unicorn/better-regex\nexport const MUSTACHE_EXPR = seal(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\nexport const ERB_EXPR = seal(/<%[\\w\\W]*|[\\w\\W]*%>/gm);\nexport const TMPLIT_EXPR = seal(/\\${[\\w\\W]*}/gm);\nexport const DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]/); // eslint-disable-line no-useless-escape\nexport const ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\nexport const IS_ALLOWED_URI = seal(\n  /^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n);\nexport const IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\nexport const ATTR_WHITESPACE = seal(\n  /[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g // eslint-disable-line no-control-regex\n);\nexport const DOCTYPE_NAME = seal(/^html$/i);\n", "import * as TAGS from './tags.js';\nimport * as ATTRS from './attrs.js';\nimport * as EXPRESSIONS from './regexp.js';\nimport {\n  addToSet,\n  clone,\n  entries,\n  freeze,\n  arrayForEach,\n  arrayPop,\n  arrayPush,\n  stringMatch,\n  stringReplace,\n  stringToLowerCase,\n  stringToString,\n  stringIndexOf,\n  stringTrim,\n  regExpTest,\n  typeErrorCreate,\n  lookupGetter,\n} from './utils.js';\n\nconst getGlobal = () => (typeof window === 'undefined' ? null : window);\n\n/**\n * Creates a no-op policy for internal use only.\n * Don't export this function outside this module!\n * @param {?TrustedTypePolicyFactory} trustedTypes The policy factory.\n * @param {HTMLScriptElement} purifyHostElement The Script element used to load DOMPurify (to determine policy name suffix).\n * @return {?TrustedTypePolicy} The policy created (or null, if Trusted Types\n * are not supported or creating the policy failed).\n */\nconst _createTrustedTypesPolicy = function (trustedTypes, purifyHostElement) {\n  if (\n    typeof trustedTypes !== 'object' ||\n    typeof trustedTypes.createPolicy !== 'function'\n  ) {\n    return null;\n  }\n\n  // Allow the callers to control the unique policy name\n  // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n  // Policy creation with duplicate names throws in Trusted Types.\n  let suffix = null;\n  const ATTR_NAME = 'data-tt-policy-suffix';\n  if (purifyHostElement && purifyHostElement.hasAttribute(ATTR_NAME)) {\n    suffix = purifyHostElement.getAttribute(ATTR_NAME);\n  }\n\n  const policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n\n  try {\n    return trustedTypes.createPolicy(policyName, {\n      createHTML(html) {\n        return html;\n      },\n      createScriptURL(scriptUrl) {\n        return scriptUrl;\n      },\n    });\n  } catch (_) {\n    // Policy creation failed (most likely another DOMPurify script has\n    // already run). Skip creating the policy, as this will only cause errors\n    // if TT are enforced.\n    console.warn(\n      'TrustedTypes policy ' + policyName + ' could not be created.'\n    );\n    return null;\n  }\n};\n\nfunction createDOMPurify(window = getGlobal()) {\n  const DOMPurify = (root) => createDOMPurify(root);\n\n  /**\n   * Version label, exposed for easier checks\n   * if DOMPurify is up to date or not\n   */\n  DOMPurify.version = VERSION;\n\n  /**\n   * Array of elements that DOMPurify removed during sanitation.\n   * Empty if nothing was removed.\n   */\n  DOMPurify.removed = [];\n\n  if (!window || !window.document || window.document.nodeType !== 9) {\n    // Not running in a browser, provide a factory function\n    // so that you can pass your own Window\n    DOMPurify.isSupported = false;\n\n    return DOMPurify;\n  }\n\n  const originalDocument = window.document;\n  const currentScript = originalDocument.currentScript;\n\n  let { document } = window;\n  const {\n    DocumentFragment,\n    HTMLTemplateElement,\n    Node,\n    Element,\n    NodeFilter,\n    NamedNodeMap = window.NamedNodeMap || window.MozNamedAttrMap,\n    HTMLFormElement,\n    DOMParser,\n    trustedTypes,\n  } = window;\n\n  const ElementPrototype = Element.prototype;\n\n  const cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n  const getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n  const getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n  const getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n\n  // As per issue #47, the web-components registry is inherited by a\n  // new document created via createHTMLDocument. As per the spec\n  // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n  // a new empty registry is used when creating a template contents owner\n  // document, so we use that as our parent document to ensure nothing\n  // is inherited.\n  if (typeof HTMLTemplateElement === 'function') {\n    const template = document.createElement('template');\n    if (template.content && template.content.ownerDocument) {\n      document = template.content.ownerDocument;\n    }\n  }\n\n  let trustedTypesPolicy;\n  let emptyHTML = '';\n\n  const {\n    implementation,\n    createNodeIterator,\n    createDocumentFragment,\n    getElementsByTagName,\n  } = document;\n  const { importNode } = originalDocument;\n\n  let hooks = {};\n\n  /**\n   * Expose whether this browser supports running the full DOMPurify.\n   */\n  DOMPurify.isSupported =\n    typeof entries === 'function' &&\n    typeof getParentNode === 'function' &&\n    implementation &&\n    implementation.createHTMLDocument !== undefined;\n\n  const {\n    MUSTACHE_EXPR,\n    ERB_EXPR,\n    TMPLIT_EXPR,\n    DATA_ATTR,\n    ARIA_ATTR,\n    IS_SCRIPT_OR_DATA,\n    ATTR_WHITESPACE,\n  } = EXPRESSIONS;\n\n  let { IS_ALLOWED_URI } = EXPRESSIONS;\n\n  /**\n   * We consider the elements and attributes below to be safe. Ideally\n   * don't add any new ones but feel free to remove unwanted ones.\n   */\n\n  /* allowed element names */\n  let ALLOWED_TAGS = null;\n  const DEFAULT_ALLOWED_TAGS = addToSet({}, [\n    ...TAGS.html,\n    ...TAGS.svg,\n    ...TAGS.svgFilters,\n    ...TAGS.mathMl,\n    ...TAGS.text,\n  ]);\n\n  /* Allowed attribute names */\n  let ALLOWED_ATTR = null;\n  const DEFAULT_ALLOWED_ATTR = addToSet({}, [\n    ...ATTRS.html,\n    ...ATTRS.svg,\n    ...ATTRS.mathMl,\n    ...ATTRS.xml,\n  ]);\n\n  /*\n   * Configure how DOMPUrify should handle custom elements and their attributes as well as customized built-in elements.\n   * @property {RegExp|Function|null} tagNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any custom elements)\n   * @property {RegExp|Function|null} attributeNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any attributes not on the allow list)\n   * @property {boolean} allowCustomizedBuiltInElements allow custom elements derived from built-ins if they pass CUSTOM_ELEMENT_HANDLING.tagNameCheck. Default: `false`.\n   */\n  let CUSTOM_ELEMENT_HANDLING = Object.seal(\n    Object.create(null, {\n      tagNameCheck: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: null,\n      },\n      attributeNameCheck: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: null,\n      },\n      allowCustomizedBuiltInElements: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: false,\n      },\n    })\n  );\n\n  /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n  let FORBID_TAGS = null;\n\n  /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n  let FORBID_ATTR = null;\n\n  /* Decide if ARIA attributes are okay */\n  let ALLOW_ARIA_ATTR = true;\n\n  /* Decide if custom data attributes are okay */\n  let ALLOW_DATA_ATTR = true;\n\n  /* Decide if unknown protocols are okay */\n  let ALLOW_UNKNOWN_PROTOCOLS = false;\n\n  /* Decide if self-closing tags in attributes are allowed.\n   * Usually removed due to a mXSS issue in jQuery 3.0 */\n  let ALLOW_SELF_CLOSE_IN_ATTR = true;\n\n  /* Output should be safe for common template engines.\n   * This means, DOMPurify removes data attributes, mustaches and ERB\n   */\n  let SAFE_FOR_TEMPLATES = false;\n\n  /* Decide if document with <html>... should be returned */\n  let WHOLE_DOCUMENT = false;\n\n  /* Track whether config is already set on this instance of DOMPurify. */\n  let SET_CONFIG = false;\n\n  /* Decide if all elements (e.g. style, script) must be children of\n   * document.body. By default, browsers might move them to document.head */\n  let FORCE_BODY = false;\n\n  /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n   * string (or a TrustedHTML object if Trusted Types are supported).\n   * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n   */\n  let RETURN_DOM = false;\n\n  /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n   * string  (or a TrustedHTML object if Trusted Types are supported) */\n  let RETURN_DOM_FRAGMENT = false;\n\n  /* Try to return a Trusted Type object instead of a string, return a string in\n   * case Trusted Types are not supported  */\n  let RETURN_TRUSTED_TYPE = false;\n\n  /* Output should be free from DOM clobbering attacks?\n   * This sanitizes markups named with colliding, clobberable built-in DOM APIs.\n   */\n  let SANITIZE_DOM = true;\n\n  /* Achieve full DOM Clobbering protection by isolating the namespace of named\n   * properties and JS variables, mitigating attacks that abuse the HTML/DOM spec rules.\n   *\n   * HTML/DOM spec rules that enable DOM Clobbering:\n   *   - Named Access on Window (§7.3.3)\n   *   - DOM Tree Accessors (§3.1.5)\n   *   - Form Element Parent-Child Relations (§4.10.3)\n   *   - Iframe srcdoc / Nested WindowProxies (§4.8.5)\n   *   - HTMLCollection (§4.2.10.2)\n   *\n   * Namespace isolation is implemented by prefixing `id` and `name` attributes\n   * with a constant string, i.e., `user-content-`\n   */\n  let SANITIZE_NAMED_PROPS = false;\n  const SANITIZE_NAMED_PROPS_PREFIX = 'user-content-';\n\n  /* Keep element content when removing element? */\n  let KEEP_CONTENT = true;\n\n  /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n   * of importing it into a new Document and returning a sanitized copy */\n  let IN_PLACE = false;\n\n  /* Allow usage of profiles like html, svg and mathMl */\n  let USE_PROFILES = {};\n\n  /* Tags to ignore content of when KEEP_CONTENT is true */\n  let FORBID_CONTENTS = null;\n  const DEFAULT_FORBID_CONTENTS = addToSet({}, [\n    'annotation-xml',\n    'audio',\n    'colgroup',\n    'desc',\n    'foreignobject',\n    'head',\n    'iframe',\n    'math',\n    'mi',\n    'mn',\n    'mo',\n    'ms',\n    'mtext',\n    'noembed',\n    'noframes',\n    'noscript',\n    'plaintext',\n    'script',\n    'style',\n    'svg',\n    'template',\n    'thead',\n    'title',\n    'video',\n    'xmp',\n  ]);\n\n  /* Tags that are safe for data: URIs */\n  let DATA_URI_TAGS = null;\n  const DEFAULT_DATA_URI_TAGS = addToSet({}, [\n    'audio',\n    'video',\n    'img',\n    'source',\n    'image',\n    'track',\n  ]);\n\n  /* Attributes safe for values like \"javascript:\" */\n  let URI_SAFE_ATTRIBUTES = null;\n  const DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, [\n    'alt',\n    'class',\n    'for',\n    'id',\n    'label',\n    'name',\n    'pattern',\n    'placeholder',\n    'role',\n    'summary',\n    'title',\n    'value',\n    'style',\n    'xmlns',\n  ]);\n\n  const MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n  const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n  const HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n  /* Document namespace */\n  let NAMESPACE = HTML_NAMESPACE;\n  let IS_EMPTY_INPUT = false;\n\n  /* Allowed XHTML+XML namespaces */\n  let ALLOWED_NAMESPACES = null;\n  const DEFAULT_ALLOWED_NAMESPACES = addToSet(\n    {},\n    [MATHML_NAMESPACE, SVG_NAMESPACE, HTML_NAMESPACE],\n    stringToString\n  );\n\n  /* Parsing of strict XHTML documents */\n  let PARSER_MEDIA_TYPE;\n  const SUPPORTED_PARSER_MEDIA_TYPES = ['application/xhtml+xml', 'text/html'];\n  const DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n  let transformCaseFunc;\n\n  /* Keep a reference to config to pass to hooks */\n  let CONFIG = null;\n\n  /* Ideally, do not touch anything below this line */\n  /* ______________________________________________ */\n\n  const formElement = document.createElement('form');\n\n  const isRegexOrFunction = function (testValue) {\n    return testValue instanceof RegExp || testValue instanceof Function;\n  };\n\n  /**\n   * _parseConfig\n   *\n   * @param  {Object} cfg optional config literal\n   */\n  // eslint-disable-next-line complexity\n  const _parseConfig = function (cfg) {\n    if (CONFIG && CONFIG === cfg) {\n      return;\n    }\n\n    /* Shield configuration object from tampering */\n    if (!cfg || typeof cfg !== 'object') {\n      cfg = {};\n    }\n\n    /* Shield configuration object from prototype pollution */\n    cfg = clone(cfg);\n\n    PARSER_MEDIA_TYPE =\n      // eslint-disable-next-line unicorn/prefer-includes\n      SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1\n        ? (PARSER_MEDIA_TYPE = DEFAULT_PARSER_MEDIA_TYPE)\n        : (PARSER_MEDIA_TYPE = cfg.PARSER_MEDIA_TYPE);\n\n    // HTML tags and attributes are not case-sensitive, converting to lowercase. Keeping XHTML as is.\n    transformCaseFunc =\n      PARSER_MEDIA_TYPE === 'application/xhtml+xml'\n        ? stringToString\n        : stringToLowerCase;\n\n    /* Set configuration parameters */\n    ALLOWED_TAGS =\n      'ALLOWED_TAGS' in cfg\n        ? addToSet({}, cfg.ALLOWED_TAGS, transformCaseFunc)\n        : DEFAULT_ALLOWED_TAGS;\n    ALLOWED_ATTR =\n      'ALLOWED_ATTR' in cfg\n        ? addToSet({}, cfg.ALLOWED_ATTR, transformCaseFunc)\n        : DEFAULT_ALLOWED_ATTR;\n    ALLOWED_NAMESPACES =\n      'ALLOWED_NAMESPACES' in cfg\n        ? addToSet({}, cfg.ALLOWED_NAMESPACES, stringToString)\n        : DEFAULT_ALLOWED_NAMESPACES;\n    URI_SAFE_ATTRIBUTES =\n      'ADD_URI_SAFE_ATTR' in cfg\n        ? addToSet(\n            clone(DEFAULT_URI_SAFE_ATTRIBUTES), // eslint-disable-line indent\n            cfg.ADD_URI_SAFE_ATTR, // eslint-disable-line indent\n            transformCaseFunc // eslint-disable-line indent\n          ) // eslint-disable-line indent\n        : DEFAULT_URI_SAFE_ATTRIBUTES;\n    DATA_URI_TAGS =\n      'ADD_DATA_URI_TAGS' in cfg\n        ? addToSet(\n            clone(DEFAULT_DATA_URI_TAGS), // eslint-disable-line indent\n            cfg.ADD_DATA_URI_TAGS, // eslint-disable-line indent\n            transformCaseFunc // eslint-disable-line indent\n          ) // eslint-disable-line indent\n        : DEFAULT_DATA_URI_TAGS;\n    FORBID_CONTENTS =\n      'FORBID_CONTENTS' in cfg\n        ? addToSet({}, cfg.FORBID_CONTENTS, transformCaseFunc)\n        : DEFAULT_FORBID_CONTENTS;\n    FORBID_TAGS =\n      'FORBID_TAGS' in cfg\n        ? addToSet({}, cfg.FORBID_TAGS, transformCaseFunc)\n        : {};\n    FORBID_ATTR =\n      'FORBID_ATTR' in cfg\n        ? addToSet({}, cfg.FORBID_ATTR, transformCaseFunc)\n        : {};\n    USE_PROFILES = 'USE_PROFILES' in cfg ? cfg.USE_PROFILES : false;\n    ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n    ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n    ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n    ALLOW_SELF_CLOSE_IN_ATTR = cfg.ALLOW_SELF_CLOSE_IN_ATTR !== false; // Default true\n    SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n    WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n    RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n    RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n    RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false\n    FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n    SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n    SANITIZE_NAMED_PROPS = cfg.SANITIZE_NAMED_PROPS || false; // Default false\n    KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n    IN_PLACE = cfg.IN_PLACE || false; // Default false\n    IS_ALLOWED_URI = cfg.ALLOWED_URI_REGEXP || EXPRESSIONS.IS_ALLOWED_URI;\n    NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n    CUSTOM_ELEMENT_HANDLING = cfg.CUSTOM_ELEMENT_HANDLING || {};\n    if (\n      cfg.CUSTOM_ELEMENT_HANDLING &&\n      isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)\n    ) {\n      CUSTOM_ELEMENT_HANDLING.tagNameCheck =\n        cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n    }\n\n    if (\n      cfg.CUSTOM_ELEMENT_HANDLING &&\n      isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)\n    ) {\n      CUSTOM_ELEMENT_HANDLING.attributeNameCheck =\n        cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n    }\n\n    if (\n      cfg.CUSTOM_ELEMENT_HANDLING &&\n      typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements ===\n        'boolean'\n    ) {\n      CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements =\n        cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n    }\n\n    if (SAFE_FOR_TEMPLATES) {\n      ALLOW_DATA_ATTR = false;\n    }\n\n    if (RETURN_DOM_FRAGMENT) {\n      RETURN_DOM = true;\n    }\n\n    /* Parse profile info */\n    if (USE_PROFILES) {\n      ALLOWED_TAGS = addToSet({}, [...TAGS.text]);\n      ALLOWED_ATTR = [];\n      if (USE_PROFILES.html === true) {\n        addToSet(ALLOWED_TAGS, TAGS.html);\n        addToSet(ALLOWED_ATTR, ATTRS.html);\n      }\n\n      if (USE_PROFILES.svg === true) {\n        addToSet(ALLOWED_TAGS, TAGS.svg);\n        addToSet(ALLOWED_ATTR, ATTRS.svg);\n        addToSet(ALLOWED_ATTR, ATTRS.xml);\n      }\n\n      if (USE_PROFILES.svgFilters === true) {\n        addToSet(ALLOWED_TAGS, TAGS.svgFilters);\n        addToSet(ALLOWED_ATTR, ATTRS.svg);\n        addToSet(ALLOWED_ATTR, ATTRS.xml);\n      }\n\n      if (USE_PROFILES.mathMl === true) {\n        addToSet(ALLOWED_TAGS, TAGS.mathMl);\n        addToSet(ALLOWED_ATTR, ATTRS.mathMl);\n        addToSet(ALLOWED_ATTR, ATTRS.xml);\n      }\n    }\n\n    /* Merge configuration parameters */\n    if (cfg.ADD_TAGS) {\n      if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n        ALLOWED_TAGS = clone(ALLOWED_TAGS);\n      }\n\n      addToSet(ALLOWED_TAGS, cfg.ADD_TAGS, transformCaseFunc);\n    }\n\n    if (cfg.ADD_ATTR) {\n      if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n        ALLOWED_ATTR = clone(ALLOWED_ATTR);\n      }\n\n      addToSet(ALLOWED_ATTR, cfg.ADD_ATTR, transformCaseFunc);\n    }\n\n    if (cfg.ADD_URI_SAFE_ATTR) {\n      addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR, transformCaseFunc);\n    }\n\n    if (cfg.FORBID_CONTENTS) {\n      if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n        FORBID_CONTENTS = clone(FORBID_CONTENTS);\n      }\n\n      addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS, transformCaseFunc);\n    }\n\n    /* Add #text in case KEEP_CONTENT is set to true */\n    if (KEEP_CONTENT) {\n      ALLOWED_TAGS['#text'] = true;\n    }\n\n    /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n    if (WHOLE_DOCUMENT) {\n      addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n    }\n\n    /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */\n    if (ALLOWED_TAGS.table) {\n      addToSet(ALLOWED_TAGS, ['tbody']);\n      delete FORBID_TAGS.tbody;\n    }\n\n    if (cfg.TRUSTED_TYPES_POLICY) {\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createHTML !== 'function') {\n        throw typeErrorCreate(\n          'TRUSTED_TYPES_POLICY configuration option must provide a \"createHTML\" hook.'\n        );\n      }\n\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createScriptURL !== 'function') {\n        throw typeErrorCreate(\n          'TRUSTED_TYPES_POLICY configuration option must provide a \"createScriptURL\" hook.'\n        );\n      }\n\n      // Overwrite existing TrustedTypes policy.\n      trustedTypesPolicy = cfg.TRUSTED_TYPES_POLICY;\n\n      // Sign local variables required by `sanitize`.\n      emptyHTML = trustedTypesPolicy.createHTML('');\n    } else {\n      // Uninitialized policy, attempt to initialize the internal dompurify policy.\n      if (trustedTypesPolicy === undefined) {\n        trustedTypesPolicy = _createTrustedTypesPolicy(\n          trustedTypes,\n          currentScript\n        );\n      }\n\n      // If creating the internal policy succeeded sign internal variables.\n      if (trustedTypesPolicy !== null && typeof emptyHTML === 'string') {\n        emptyHTML = trustedTypesPolicy.createHTML('');\n      }\n    }\n\n    // Prevent further manipulation of configuration.\n    // Not available in IE8, Safari 5, etc.\n    if (freeze) {\n      freeze(cfg);\n    }\n\n    CONFIG = cfg;\n  };\n\n  const MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, [\n    'mi',\n    'mo',\n    'mn',\n    'ms',\n    'mtext',\n  ]);\n\n  const HTML_INTEGRATION_POINTS = addToSet({}, [\n    'foreignobject',\n    'desc',\n    'title',\n    'annotation-xml',\n  ]);\n\n  // Certain elements are allowed in both SVG and HTML\n  // namespace. We need to specify them explicitly\n  // so that they don't get erroneously deleted from\n  // HTML namespace.\n  const COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, [\n    'title',\n    'style',\n    'font',\n    'a',\n    'script',\n  ]);\n\n  /* Keep track of all possible SVG and MathML tags\n   * so that we can perform the namespace checks\n   * correctly. */\n  const ALL_SVG_TAGS = addToSet({}, TAGS.svg);\n  addToSet(ALL_SVG_TAGS, TAGS.svgFilters);\n  addToSet(ALL_SVG_TAGS, TAGS.svgDisallowed);\n\n  const ALL_MATHML_TAGS = addToSet({}, TAGS.mathMl);\n  addToSet(ALL_MATHML_TAGS, TAGS.mathMlDisallowed);\n\n  /**\n   *\n   *\n   * @param  {Element} element a DOM element whose namespace is being checked\n   * @returns {boolean} Return false if the element has a\n   *  namespace that a spec-compliant parser would never\n   *  return. Return true otherwise.\n   */\n  const _checkValidNamespace = function (element) {\n    let parent = getParentNode(element);\n\n    // In JSDOM, if we're inside shadow DOM, then parentNode\n    // can be null. We just simulate parent in this case.\n    if (!parent || !parent.tagName) {\n      parent = {\n        namespaceURI: NAMESPACE,\n        tagName: 'template',\n      };\n    }\n\n    const tagName = stringToLowerCase(element.tagName);\n    const parentTagName = stringToLowerCase(parent.tagName);\n\n    if (!ALLOWED_NAMESPACES[element.namespaceURI]) {\n      return false;\n    }\n\n    if (element.namespaceURI === SVG_NAMESPACE) {\n      // The only way to switch from HTML namespace to SVG\n      // is via <svg>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'svg';\n      }\n\n      // The only way to switch from MathML to SVG is via`\n      // svg if parent is either <annotation-xml> or MathML\n      // text integration points.\n      if (parent.namespaceURI === MATHML_NAMESPACE) {\n        return (\n          tagName === 'svg' &&\n          (parentTagName === 'annotation-xml' ||\n            MATHML_TEXT_INTEGRATION_POINTS[parentTagName])\n        );\n      }\n\n      // We only allow elements that are defined in SVG\n      // spec. All others are disallowed in SVG namespace.\n      return Boolean(ALL_SVG_TAGS[tagName]);\n    }\n\n    if (element.namespaceURI === MATHML_NAMESPACE) {\n      // The only way to switch from HTML namespace to MathML\n      // is via <math>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'math';\n      }\n\n      // The only way to switch from SVG to MathML is via\n      // <math> and HTML integration points\n      if (parent.namespaceURI === SVG_NAMESPACE) {\n        return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n      }\n\n      // We only allow elements that are defined in MathML\n      // spec. All others are disallowed in MathML namespace.\n      return Boolean(ALL_MATHML_TAGS[tagName]);\n    }\n\n    if (element.namespaceURI === HTML_NAMESPACE) {\n      // The only way to switch from SVG to HTML is via\n      // HTML integration points, and from MathML to HTML\n      // is via MathML text integration points\n      if (\n        parent.namespaceURI === SVG_NAMESPACE &&\n        !HTML_INTEGRATION_POINTS[parentTagName]\n      ) {\n        return false;\n      }\n\n      if (\n        parent.namespaceURI === MATHML_NAMESPACE &&\n        !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]\n      ) {\n        return false;\n      }\n\n      // We disallow tags that are specific for MathML\n      // or SVG and should never appear in HTML namespace\n      return (\n        !ALL_MATHML_TAGS[tagName] &&\n        (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName])\n      );\n    }\n\n    // For XHTML and XML documents that support custom namespaces\n    if (\n      PARSER_MEDIA_TYPE === 'application/xhtml+xml' &&\n      ALLOWED_NAMESPACES[element.namespaceURI]\n    ) {\n      return true;\n    }\n\n    // The code should never reach this place (this means\n    // that the element somehow got namespace that is not\n    // HTML, SVG, MathML or allowed via ALLOWED_NAMESPACES).\n    // Return false just in case.\n    return false;\n  };\n\n  /**\n   * _forceRemove\n   *\n   * @param  {Node} node a DOM node\n   */\n  const _forceRemove = function (node) {\n    arrayPush(DOMPurify.removed, { element: node });\n    try {\n      // eslint-disable-next-line unicorn/prefer-dom-node-remove\n      node.parentNode.removeChild(node);\n    } catch (_) {\n      node.remove();\n    }\n  };\n\n  /**\n   * _removeAttribute\n   *\n   * @param  {String} name an Attribute name\n   * @param  {Node} node a DOM node\n   */\n  const _removeAttribute = function (name, node) {\n    try {\n      arrayPush(DOMPurify.removed, {\n        attribute: node.getAttributeNode(name),\n        from: node,\n      });\n    } catch (_) {\n      arrayPush(DOMPurify.removed, {\n        attribute: null,\n        from: node,\n      });\n    }\n\n    node.removeAttribute(name);\n\n    // We void attribute values for unremovable \"is\"\" attributes\n    if (name === 'is' && !ALLOWED_ATTR[name]) {\n      if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n        try {\n          _forceRemove(node);\n        } catch (_) {}\n      } else {\n        try {\n          node.setAttribute(name, '');\n        } catch (_) {}\n      }\n    }\n  };\n\n  /**\n   * _initDocument\n   *\n   * @param  {String} dirty a string of dirty markup\n   * @return {Document} a DOM, filled with the dirty markup\n   */\n  const _initDocument = function (dirty) {\n    /* Create a HTML document */\n    let doc;\n    let leadingWhitespace;\n\n    if (FORCE_BODY) {\n      dirty = '<remove></remove>' + dirty;\n    } else {\n      /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n      const matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n      leadingWhitespace = matches && matches[0];\n    }\n\n    if (\n      PARSER_MEDIA_TYPE === 'application/xhtml+xml' &&\n      NAMESPACE === HTML_NAMESPACE\n    ) {\n      // Root of XHTML doc must contain xmlns declaration (see https://www.w3.org/TR/xhtml1/normative.html#strict)\n      dirty =\n        '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' +\n        dirty +\n        '</body></html>';\n    }\n\n    const dirtyPayload = trustedTypesPolicy\n      ? trustedTypesPolicy.createHTML(dirty)\n      : dirty;\n    /*\n     * Use the DOMParser API by default, fallback later if needs be\n     * DOMParser not work for svg when has multiple root element.\n     */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      try {\n        doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n      } catch (_) {}\n    }\n\n    /* Use createHTMLDocument in case DOMParser is not available */\n    if (!doc || !doc.documentElement) {\n      doc = implementation.createDocument(NAMESPACE, 'template', null);\n      try {\n        doc.documentElement.innerHTML = IS_EMPTY_INPUT\n          ? emptyHTML\n          : dirtyPayload;\n      } catch (_) {\n        // Syntax error if dirtyPayload is invalid xml\n      }\n    }\n\n    const body = doc.body || doc.documentElement;\n\n    if (dirty && leadingWhitespace) {\n      body.insertBefore(\n        document.createTextNode(leadingWhitespace),\n        body.childNodes[0] || null\n      );\n    }\n\n    /* Work on whole document or just its body */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      return getElementsByTagName.call(\n        doc,\n        WHOLE_DOCUMENT ? 'html' : 'body'\n      )[0];\n    }\n\n    return WHOLE_DOCUMENT ? doc.documentElement : body;\n  };\n\n  /**\n   * _createIterator\n   *\n   * @param  {Document} root document/fragment to create iterator for\n   * @return {Iterator} iterator instance\n   */\n  const _createIterator = function (root) {\n    return createNodeIterator.call(\n      root.ownerDocument || root,\n      root,\n      // eslint-disable-next-line no-bitwise\n      NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT,\n      null,\n      false\n    );\n  };\n\n  /**\n   * _isClobbered\n   *\n   * @param  {Node} elm element to check for clobbering attacks\n   * @return {Boolean} true if clobbered, false if safe\n   */\n  const _isClobbered = function (elm) {\n    return (\n      elm instanceof HTMLFormElement &&\n      (typeof elm.nodeName !== 'string' ||\n        typeof elm.textContent !== 'string' ||\n        typeof elm.removeChild !== 'function' ||\n        !(elm.attributes instanceof NamedNodeMap) ||\n        typeof elm.removeAttribute !== 'function' ||\n        typeof elm.setAttribute !== 'function' ||\n        typeof elm.namespaceURI !== 'string' ||\n        typeof elm.insertBefore !== 'function' ||\n        typeof elm.hasChildNodes !== 'function')\n    );\n  };\n\n  /**\n   * _isNode\n   *\n   * @param  {Node} obj object to check whether it's a DOM node\n   * @return {Boolean} true is object is a DOM node\n   */\n  const _isNode = function (object) {\n    return typeof Node === 'object'\n      ? object instanceof Node\n      : object &&\n          typeof object === 'object' &&\n          typeof object.nodeType === 'number' &&\n          typeof object.nodeName === 'string';\n  };\n\n  /**\n   * _executeHook\n   * Execute user configurable hooks\n   *\n   * @param  {String} entryPoint  Name of the hook's entry point\n   * @param  {Node} currentNode node to work on with the hook\n   * @param  {Object} data additional hook parameters\n   */\n  const _executeHook = function (entryPoint, currentNode, data) {\n    if (!hooks[entryPoint]) {\n      return;\n    }\n\n    arrayForEach(hooks[entryPoint], (hook) => {\n      hook.call(DOMPurify, currentNode, data, CONFIG);\n    });\n  };\n\n  /**\n   * _sanitizeElements\n   *\n   * @protect nodeName\n   * @protect textContent\n   * @protect removeChild\n   *\n   * @param   {Node} currentNode to check for permission to exist\n   * @return  {Boolean} true if node was killed, false if left alive\n   */\n  const _sanitizeElements = function (currentNode) {\n    let content;\n\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeElements', currentNode, null);\n\n    /* Check if element is clobbered or can clobber */\n    if (_isClobbered(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Now let's check the element's type and name */\n    const tagName = transformCaseFunc(currentNode.nodeName);\n\n    /* Execute a hook if present */\n    _executeHook('uponSanitizeElement', currentNode, {\n      tagName,\n      allowedTags: ALLOWED_TAGS,\n    });\n\n    /* Detect mXSS attempts abusing namespace confusion */\n    if (\n      currentNode.hasChildNodes() &&\n      !_isNode(currentNode.firstElementChild) &&\n      (!_isNode(currentNode.content) ||\n        !_isNode(currentNode.content.firstElementChild)) &&\n      regExpTest(/<[/\\w]/g, currentNode.innerHTML) &&\n      regExpTest(/<[/\\w]/g, currentNode.textContent)\n    ) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Remove element if anything forbids its presence */\n    if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n      /* Check if we have a custom element to handle */\n      if (!FORBID_TAGS[tagName] && _basicCustomElementTest(tagName)) {\n        if (\n          CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp &&\n          regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName)\n        )\n          return false;\n        if (\n          CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function &&\n          CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName)\n        )\n          return false;\n      }\n\n      /* Keep content except for bad-listed elements */\n      if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n        const parentNode = getParentNode(currentNode) || currentNode.parentNode;\n        const childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n\n        if (childNodes && parentNode) {\n          const childCount = childNodes.length;\n\n          for (let i = childCount - 1; i >= 0; --i) {\n            parentNode.insertBefore(\n              cloneNode(childNodes[i], true),\n              getNextSibling(currentNode)\n            );\n          }\n        }\n      }\n\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Check whether element has a valid namespace */\n    if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Make sure that older browsers don't get noscript mXSS */\n    if (\n      (tagName === 'noscript' || tagName === 'noembed') &&\n      regExpTest(/<\\/no(script|embed)/i, currentNode.innerHTML)\n    ) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Sanitize element content to be template-safe */\n    if (SAFE_FOR_TEMPLATES && currentNode.nodeType === 3) {\n      /* Get the element's text content */\n      content = currentNode.textContent;\n      content = stringReplace(content, MUSTACHE_EXPR, ' ');\n      content = stringReplace(content, ERB_EXPR, ' ');\n      content = stringReplace(content, TMPLIT_EXPR, ' ');\n      if (currentNode.textContent !== content) {\n        arrayPush(DOMPurify.removed, { element: currentNode.cloneNode() });\n        currentNode.textContent = content;\n      }\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeElements', currentNode, null);\n\n    return false;\n  };\n\n  /**\n   * _isValidAttribute\n   *\n   * @param  {string} lcTag Lowercase tag name of containing element.\n   * @param  {string} lcName Lowercase attribute name.\n   * @param  {string} value Attribute value.\n   * @return {Boolean} Returns true if `value` is valid, otherwise false.\n   */\n  // eslint-disable-next-line complexity\n  const _isValidAttribute = function (lcTag, lcName, value) {\n    /* Make sure attribute cannot clobber */\n    if (\n      SANITIZE_DOM &&\n      (lcName === 'id' || lcName === 'name') &&\n      (value in document || value in formElement)\n    ) {\n      return false;\n    }\n\n    /* Allow valid data-* attributes: At least one character after \"-\"\n        (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n        XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n        We don't need to check the value; it's always URI safe. */\n    if (\n      ALLOW_DATA_ATTR &&\n      !FORBID_ATTR[lcName] &&\n      regExpTest(DATA_ATTR, lcName)\n    ) {\n      // This attribute is safe\n    } else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR, lcName)) {\n      // This attribute is safe\n      /* Otherwise, check the name is permitted */\n    } else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n      if (\n        // First condition does a very basic check if a) it's basically a valid custom element tagname AND\n        // b) if the tagName passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n        // and c) if the attribute name passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.attributeNameCheck\n        (_basicCustomElementTest(lcTag) &&\n          ((CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp &&\n            regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag)) ||\n            (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function &&\n              CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag))) &&\n          ((CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp &&\n            regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName)) ||\n            (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function &&\n              CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName)))) ||\n        // Alternative, second condition checks if it's an `is`-attribute, AND\n        // the value passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n        (lcName === 'is' &&\n          CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements &&\n          ((CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp &&\n            regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value)) ||\n            (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function &&\n              CUSTOM_ELEMENT_HANDLING.tagNameCheck(value))))\n      ) {\n        // If user has supplied a regexp or function in CUSTOM_ELEMENT_HANDLING.tagNameCheck, we need to also allow derived custom elements using the same tagName test.\n        // Additionally, we need to allow attributes passing the CUSTOM_ELEMENT_HANDLING.attributeNameCheck user has configured, as custom elements can define these at their own discretion.\n      } else {\n        return false;\n      }\n      /* Check value is safe. First, is attr inert? If so, is safe */\n    } else if (URI_SAFE_ATTRIBUTES[lcName]) {\n      // This attribute is safe\n      /* Check no script, data or unknown possibly unsafe URI\n        unless we know URI values are safe for that attribute */\n    } else if (\n      regExpTest(IS_ALLOWED_URI, stringReplace(value, ATTR_WHITESPACE, ''))\n    ) {\n      // This attribute is safe\n      /* Keep image data URIs alive if src/xlink:href is allowed */\n      /* Further prevent gadget XSS for dynamically built script tags */\n    } else if (\n      (lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') &&\n      lcTag !== 'script' &&\n      stringIndexOf(value, 'data:') === 0 &&\n      DATA_URI_TAGS[lcTag]\n    ) {\n      // This attribute is safe\n      /* Allow unknown protocols: This provides support for links that\n        are handled by protocol handlers which may be unknown ahead of\n        time, e.g. fb:, spotify: */\n    } else if (\n      ALLOW_UNKNOWN_PROTOCOLS &&\n      !regExpTest(IS_SCRIPT_OR_DATA, stringReplace(value, ATTR_WHITESPACE, ''))\n    ) {\n      // This attribute is safe\n      /* Check for binary attributes */\n    } else if (value) {\n      return false;\n    } else {\n      // Binary attributes are safe at this point\n      /* Anything else, presume unsafe, do not add it back */\n    }\n\n    return true;\n  };\n\n  /**\n   * _basicCustomElementCheck\n   * checks if at least one dash is included in tagName, and it's not the first char\n   * for more sophisticated checking see https://github.com/sindresorhus/validate-element-name\n   * @param {string} tagName name of the tag of the node to sanitize\n   */\n  const _basicCustomElementTest = function (tagName) {\n    return tagName.indexOf('-') > 0;\n  };\n\n  /**\n   * _sanitizeAttributes\n   *\n   * @protect attributes\n   * @protect nodeName\n   * @protect removeAttribute\n   * @protect setAttribute\n   *\n   * @param  {Node} currentNode to sanitize\n   */\n  const _sanitizeAttributes = function (currentNode) {\n    let attr;\n    let value;\n    let lcName;\n    let l;\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeAttributes', currentNode, null);\n\n    const { attributes } = currentNode;\n\n    /* Check if we have attributes; if not we might have a text node */\n    if (!attributes) {\n      return;\n    }\n\n    const hookEvent = {\n      attrName: '',\n      attrValue: '',\n      keepAttr: true,\n      allowedAttributes: ALLOWED_ATTR,\n    };\n    l = attributes.length;\n\n    /* Go backwards over all attributes; safely remove bad ones */\n    while (l--) {\n      attr = attributes[l];\n      const { name, namespaceURI } = attr;\n      value = name === 'value' ? attr.value : stringTrim(attr.value);\n      lcName = transformCaseFunc(name);\n\n      /* Execute a hook if present */\n      hookEvent.attrName = lcName;\n      hookEvent.attrValue = value;\n      hookEvent.keepAttr = true;\n      hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set\n      _executeHook('uponSanitizeAttribute', currentNode, hookEvent);\n      value = hookEvent.attrValue;\n      /* Did the hooks approve of the attribute? */\n      if (hookEvent.forceKeepAttr) {\n        continue;\n      }\n\n      /* Remove attribute */\n      _removeAttribute(name, currentNode);\n\n      /* Did the hooks approve of the attribute? */\n      if (!hookEvent.keepAttr) {\n        continue;\n      }\n\n      /* Work around a security issue in jQuery 3.0 */\n      if (!ALLOW_SELF_CLOSE_IN_ATTR && regExpTest(/\\/>/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n\n      /* Sanitize attribute content to be template-safe */\n      if (SAFE_FOR_TEMPLATES) {\n        value = stringReplace(value, MUSTACHE_EXPR, ' ');\n        value = stringReplace(value, ERB_EXPR, ' ');\n        value = stringReplace(value, TMPLIT_EXPR, ' ');\n      }\n\n      /* Is `value` valid for this attribute? */\n      const lcTag = transformCaseFunc(currentNode.nodeName);\n      if (!_isValidAttribute(lcTag, lcName, value)) {\n        continue;\n      }\n\n      /* Full DOM Clobbering protection via namespace isolation,\n       * Prefix id and name attributes with `user-content-`\n       */\n      if (SANITIZE_NAMED_PROPS && (lcName === 'id' || lcName === 'name')) {\n        // Remove the attribute with this value\n        _removeAttribute(name, currentNode);\n\n        // Prefix the value and later re-create the attribute with the sanitized value\n        value = SANITIZE_NAMED_PROPS_PREFIX + value;\n      }\n\n      /* Handle attributes that require Trusted Types */\n      if (\n        trustedTypesPolicy &&\n        typeof trustedTypes === 'object' &&\n        typeof trustedTypes.getAttributeType === 'function'\n      ) {\n        if (namespaceURI) {\n          /* Namespaces are not yet supported, see https://bugs.chromium.org/p/chromium/issues/detail?id=1305293 */\n        } else {\n          switch (trustedTypes.getAttributeType(lcTag, lcName)) {\n            case 'TrustedHTML': {\n              value = trustedTypesPolicy.createHTML(value);\n              break;\n            }\n\n            case 'TrustedScriptURL': {\n              value = trustedTypesPolicy.createScriptURL(value);\n              break;\n            }\n\n            default: {\n              break;\n            }\n          }\n        }\n      }\n\n      /* Handle invalid data-* attribute set by try-catching it */\n      try {\n        if (namespaceURI) {\n          currentNode.setAttributeNS(namespaceURI, name, value);\n        } else {\n          /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n          currentNode.setAttribute(name, value);\n        }\n\n        arrayPop(DOMPurify.removed);\n      } catch (_) {}\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeAttributes', currentNode, null);\n  };\n\n  /**\n   * _sanitizeShadowDOM\n   *\n   * @param  {DocumentFragment} fragment to iterate over recursively\n   */\n  const _sanitizeShadowDOM = function (fragment) {\n    let shadowNode;\n    const shadowIterator = _createIterator(fragment);\n\n    /* Execute a hook if present */\n    _executeHook('beforeSanitizeShadowDOM', fragment, null);\n\n    while ((shadowNode = shadowIterator.nextNode())) {\n      /* Execute a hook if present */\n      _executeHook('uponSanitizeShadowNode', shadowNode, null);\n\n      /* Sanitize tags and elements */\n      if (_sanitizeElements(shadowNode)) {\n        continue;\n      }\n\n      /* Deep shadow DOM detected */\n      if (shadowNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(shadowNode.content);\n      }\n\n      /* Check attributes, sanitize if necessary */\n      _sanitizeAttributes(shadowNode);\n    }\n\n    /* Execute a hook if present */\n    _executeHook('afterSanitizeShadowDOM', fragment, null);\n  };\n\n  /**\n   * Sanitize\n   * Public method providing core sanitation functionality\n   *\n   * @param {String|Node} dirty string or DOM node\n   * @param {Object} configuration object\n   */\n  // eslint-disable-next-line complexity\n  DOMPurify.sanitize = function (dirty, cfg = {}) {\n    let body;\n    let importedNode;\n    let currentNode;\n    let returnNode;\n    /* Make sure we have a string to sanitize.\n      DO NOT return early, as this will return the wrong type if\n      the user has requested a DOM object rather than a string */\n    IS_EMPTY_INPUT = !dirty;\n    if (IS_EMPTY_INPUT) {\n      dirty = '<!-->';\n    }\n\n    /* Stringify, in case dirty is an object */\n    if (typeof dirty !== 'string' && !_isNode(dirty)) {\n      if (typeof dirty.toString === 'function') {\n        dirty = dirty.toString();\n        if (typeof dirty !== 'string') {\n          throw typeErrorCreate('dirty is not a string, aborting');\n        }\n      } else {\n        throw typeErrorCreate('toString is not a function');\n      }\n    }\n\n    /* Return dirty HTML if DOMPurify cannot run */\n    if (!DOMPurify.isSupported) {\n      return dirty;\n    }\n\n    /* Assign config vars */\n    if (!SET_CONFIG) {\n      _parseConfig(cfg);\n    }\n\n    /* Clean up removed elements */\n    DOMPurify.removed = [];\n\n    /* Check if dirty is correctly typed for IN_PLACE */\n    if (typeof dirty === 'string') {\n      IN_PLACE = false;\n    }\n\n    if (IN_PLACE) {\n      /* Do some early pre-sanitization to avoid unsafe root nodes */\n      if (dirty.nodeName) {\n        const tagName = transformCaseFunc(dirty.nodeName);\n        if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n          throw typeErrorCreate(\n            'root node is forbidden and cannot be sanitized in-place'\n          );\n        }\n      }\n    } else if (dirty instanceof Node) {\n      /* If dirty is a DOM element, append to an empty document to avoid\n         elements being stripped by the parser */\n      body = _initDocument('<!---->');\n      importedNode = body.ownerDocument.importNode(dirty, true);\n      if (importedNode.nodeType === 1 && importedNode.nodeName === 'BODY') {\n        /* Node is already a body, use as is */\n        body = importedNode;\n      } else if (importedNode.nodeName === 'HTML') {\n        body = importedNode;\n      } else {\n        // eslint-disable-next-line unicorn/prefer-dom-node-append\n        body.appendChild(importedNode);\n      }\n    } else {\n      /* Exit directly if we have nothing to do */\n      if (\n        !RETURN_DOM &&\n        !SAFE_FOR_TEMPLATES &&\n        !WHOLE_DOCUMENT &&\n        // eslint-disable-next-line unicorn/prefer-includes\n        dirty.indexOf('<') === -1\n      ) {\n        return trustedTypesPolicy && RETURN_TRUSTED_TYPE\n          ? trustedTypesPolicy.createHTML(dirty)\n          : dirty;\n      }\n\n      /* Initialize the document to work on */\n      body = _initDocument(dirty);\n\n      /* Check we have a DOM node from the data */\n      if (!body) {\n        return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';\n      }\n    }\n\n    /* Remove first element node (ours) if FORCE_BODY is set */\n    if (body && FORCE_BODY) {\n      _forceRemove(body.firstChild);\n    }\n\n    /* Get node iterator */\n    const nodeIterator = _createIterator(IN_PLACE ? dirty : body);\n\n    /* Now start iterating over the created document */\n    while ((currentNode = nodeIterator.nextNode())) {\n      /* Sanitize tags and elements */\n      if (_sanitizeElements(currentNode)) {\n        continue;\n      }\n\n      /* Shadow DOM detected, sanitize it */\n      if (currentNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(currentNode.content);\n      }\n\n      /* Check attributes, sanitize if necessary */\n      _sanitizeAttributes(currentNode);\n    }\n\n    /* If we sanitized `dirty` in-place, return it. */\n    if (IN_PLACE) {\n      return dirty;\n    }\n\n    /* Return sanitized string or DOM */\n    if (RETURN_DOM) {\n      if (RETURN_DOM_FRAGMENT) {\n        returnNode = createDocumentFragment.call(body.ownerDocument);\n\n        while (body.firstChild) {\n          // eslint-disable-next-line unicorn/prefer-dom-node-append\n          returnNode.appendChild(body.firstChild);\n        }\n      } else {\n        returnNode = body;\n      }\n\n      if (ALLOWED_ATTR.shadowroot || ALLOWED_ATTR.shadowrootmod) {\n        /*\n          AdoptNode() is not used because internal state is not reset\n          (e.g. the past names map of a HTMLFormElement), this is safe\n          in theory but we would rather not risk another attack vector.\n          The state that is cloned by importNode() is explicitly defined\n          by the specs.\n        */\n        returnNode = importNode.call(originalDocument, returnNode, true);\n      }\n\n      return returnNode;\n    }\n\n    let serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n\n    /* Serialize doctype if allowed */\n    if (\n      WHOLE_DOCUMENT &&\n      ALLOWED_TAGS['!doctype'] &&\n      body.ownerDocument &&\n      body.ownerDocument.doctype &&\n      body.ownerDocument.doctype.name &&\n      regExpTest(EXPRESSIONS.DOCTYPE_NAME, body.ownerDocument.doctype.name)\n    ) {\n      serializedHTML =\n        '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\\n' + serializedHTML;\n    }\n\n    /* Sanitize final string template-safe */\n    if (SAFE_FOR_TEMPLATES) {\n      serializedHTML = stringReplace(serializedHTML, MUSTACHE_EXPR, ' ');\n      serializedHTML = stringReplace(serializedHTML, ERB_EXPR, ' ');\n      serializedHTML = stringReplace(serializedHTML, TMPLIT_EXPR, ' ');\n    }\n\n    return trustedTypesPolicy && RETURN_TRUSTED_TYPE\n      ? trustedTypesPolicy.createHTML(serializedHTML)\n      : serializedHTML;\n  };\n\n  /**\n   * Public method to set the configuration once\n   * setConfig\n   *\n   * @param {Object} cfg configuration object\n   */\n  DOMPurify.setConfig = function (cfg) {\n    _parseConfig(cfg);\n    SET_CONFIG = true;\n  };\n\n  /**\n   * Public method to remove the configuration\n   * clearConfig\n   *\n   */\n  DOMPurify.clearConfig = function () {\n    CONFIG = null;\n    SET_CONFIG = false;\n  };\n\n  /**\n   * Public method to check if an attribute value is valid.\n   * Uses last set config, if any. Otherwise, uses config defaults.\n   * isValidAttribute\n   *\n   * @param  {string} tag Tag name of containing element.\n   * @param  {string} attr Attribute name.\n   * @param  {string} value Attribute value.\n   * @return {Boolean} Returns true if `value` is valid. Otherwise, returns false.\n   */\n  DOMPurify.isValidAttribute = function (tag, attr, value) {\n    /* Initialize shared config vars if necessary. */\n    if (!CONFIG) {\n      _parseConfig({});\n    }\n\n    const lcTag = transformCaseFunc(tag);\n    const lcName = transformCaseFunc(attr);\n    return _isValidAttribute(lcTag, lcName, value);\n  };\n\n  /**\n   * AddHook\n   * Public method to add DOMPurify hooks\n   *\n   * @param {String} entryPoint entry point for the hook to add\n   * @param {Function} hookFunction function to execute\n   */\n  DOMPurify.addHook = function (entryPoint, hookFunction) {\n    if (typeof hookFunction !== 'function') {\n      return;\n    }\n\n    hooks[entryPoint] = hooks[entryPoint] || [];\n    arrayPush(hooks[entryPoint], hookFunction);\n  };\n\n  /**\n   * RemoveHook\n   * Public method to remove a DOMPurify hook at a given entryPoint\n   * (pops it from the stack of hooks if more are present)\n   *\n   * @param {String} entryPoint entry point for the hook to remove\n   * @return {Function} removed(popped) hook\n   */\n  DOMPurify.removeHook = function (entryPoint) {\n    if (hooks[entryPoint]) {\n      return arrayPop(hooks[entryPoint]);\n    }\n  };\n\n  /**\n   * RemoveHooks\n   * Public method to remove all DOMPurify hooks at a given entryPoint\n   *\n   * @param  {String} entryPoint entry point for the hooks to remove\n   */\n  DOMPurify.removeHooks = function (entryPoint) {\n    if (hooks[entryPoint]) {\n      hooks[entryPoint] = [];\n    }\n  };\n\n  /**\n   * RemoveAllHooks\n   * Public method to remove all DOMPurify hooks\n   *\n   */\n  DOMPurify.removeAllHooks = function () {\n    hooks = {};\n  };\n\n  return DOMPurify;\n}\n\nexport default createDOMPurify();\n", "module.exports = window.DOMPurify || (window.DOMPurify = require('dompurify').default || require('dompurify'));", "/** abstracted to improve testability */\nexport const localStorageGetItem = (key: string): string | null => localStorage.getItem(key);\n\n/** abstracted to improve testability */\nexport const localStorageSetItem = (key: string, value: string): void => {\n  localStorage.setItem(key, value);\n};\n\n/** abstracted to improve testability */\nexport const localStorageClear = (): void => {\n  localStorage.clear();\n};\n", "/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */\nimport * as nodeCrypto from 'crypto';\nconst _0n = BigInt(0);\nconst _1n = BigInt(1);\nconst _2n = BigInt(2);\nconst _3n = BigInt(3);\nconst _8n = BigInt(8);\nconst CURVE = Object.freeze({\n    a: _0n,\n    b: BigInt(7),\n    P: BigInt('0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f'),\n    n: BigInt('0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141'),\n    h: _1n,\n    Gx: BigInt('55066263022277343669578718895168534326250603453777594175500187360389116729240'),\n    Gy: BigInt('32670510020758816978083085130507043184471273380659243275938904335757337482424'),\n    beta: BigInt('0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee'),\n});\nconst divNearest = (a, b) => (a + b / _2n) / b;\nconst endo = {\n    beta: BigInt('0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee'),\n    splitScalar(k) {\n        const { n } = CURVE;\n        const a1 = BigInt('0x3086d221a7d46bcde86c90e49284eb15');\n        const b1 = -_1n * BigInt('0xe4437ed6010e88286f547fa90abfe4c3');\n        const a2 = BigInt('0x114ca50f7a8e2f3f657c1108d9d44cfd8');\n        const b2 = a1;\n        const POW_2_128 = BigInt('0x100000000000000000000000000000000');\n        const c1 = divNearest(b2 * k, n);\n        const c2 = divNearest(-b1 * k, n);\n        let k1 = mod(k - c1 * a1 - c2 * a2, n);\n        let k2 = mod(-c1 * b1 - c2 * b2, n);\n        const k1neg = k1 > POW_2_128;\n        const k2neg = k2 > POW_2_128;\n        if (k1neg)\n            k1 = n - k1;\n        if (k2neg)\n            k2 = n - k2;\n        if (k1 > POW_2_128 || k2 > POW_2_128) {\n            throw new Error('splitScalarEndo: Endomorphism failed, k=' + k);\n        }\n        return { k1neg, k1, k2neg, k2 };\n    },\n};\nconst fieldLen = 32;\nconst groupLen = 32;\nconst hashLen = 32;\nconst compressedLen = fieldLen + 1;\nconst uncompressedLen = 2 * fieldLen + 1;\nexport { CURVE };\nfunction weierstrass(x) {\n    const { a, b } = CURVE;\n    const x2 = mod(x * x);\n    const x3 = mod(x2 * x);\n    return mod(x3 + a * x + b);\n}\nconst USE_ENDOMORPHISM = CURVE.a === _0n;\nclass ShaError extends Error {\n    constructor(message) {\n        super(message);\n    }\n}\nfunction assertJacPoint(other) {\n    if (!(other instanceof JacobianPoint))\n        throw new TypeError('JacobianPoint expected');\n}\nclass JacobianPoint {\n    constructor(x, y, z) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n    }\n    static fromAffine(p) {\n        if (!(p instanceof Point)) {\n            throw new TypeError('JacobianPoint#fromAffine: expected Point');\n        }\n        if (p.equals(Point.ZERO))\n            return JacobianPoint.ZERO;\n        return new JacobianPoint(p.x, p.y, _1n);\n    }\n    static toAffineBatch(points) {\n        const toInv = invertBatch(points.map((p) => p.z));\n        return points.map((p, i) => p.toAffine(toInv[i]));\n    }\n    static normalizeZ(points) {\n        return JacobianPoint.toAffineBatch(points).map(JacobianPoint.fromAffine);\n    }\n    equals(other) {\n        assertJacPoint(other);\n        const { x: X1, y: Y1, z: Z1 } = this;\n        const { x: X2, y: Y2, z: Z2 } = other;\n        const Z1Z1 = mod(Z1 * Z1);\n        const Z2Z2 = mod(Z2 * Z2);\n        const U1 = mod(X1 * Z2Z2);\n        const U2 = mod(X2 * Z1Z1);\n        const S1 = mod(mod(Y1 * Z2) * Z2Z2);\n        const S2 = mod(mod(Y2 * Z1) * Z1Z1);\n        return U1 === U2 && S1 === S2;\n    }\n    negate() {\n        return new JacobianPoint(this.x, mod(-this.y), this.z);\n    }\n    double() {\n        const { x: X1, y: Y1, z: Z1 } = this;\n        const A = mod(X1 * X1);\n        const B = mod(Y1 * Y1);\n        const C = mod(B * B);\n        const x1b = X1 + B;\n        const D = mod(_2n * (mod(x1b * x1b) - A - C));\n        const E = mod(_3n * A);\n        const F = mod(E * E);\n        const X3 = mod(F - _2n * D);\n        const Y3 = mod(E * (D - X3) - _8n * C);\n        const Z3 = mod(_2n * Y1 * Z1);\n        return new JacobianPoint(X3, Y3, Z3);\n    }\n    add(other) {\n        assertJacPoint(other);\n        const { x: X1, y: Y1, z: Z1 } = this;\n        const { x: X2, y: Y2, z: Z2 } = other;\n        if (X2 === _0n || Y2 === _0n)\n            return this;\n        if (X1 === _0n || Y1 === _0n)\n            return other;\n        const Z1Z1 = mod(Z1 * Z1);\n        const Z2Z2 = mod(Z2 * Z2);\n        const U1 = mod(X1 * Z2Z2);\n        const U2 = mod(X2 * Z1Z1);\n        const S1 = mod(mod(Y1 * Z2) * Z2Z2);\n        const S2 = mod(mod(Y2 * Z1) * Z1Z1);\n        const H = mod(U2 - U1);\n        const r = mod(S2 - S1);\n        if (H === _0n) {\n            if (r === _0n) {\n                return this.double();\n            }\n            else {\n                return JacobianPoint.ZERO;\n            }\n        }\n        const HH = mod(H * H);\n        const HHH = mod(H * HH);\n        const V = mod(U1 * HH);\n        const X3 = mod(r * r - HHH - _2n * V);\n        const Y3 = mod(r * (V - X3) - S1 * HHH);\n        const Z3 = mod(Z1 * Z2 * H);\n        return new JacobianPoint(X3, Y3, Z3);\n    }\n    subtract(other) {\n        return this.add(other.negate());\n    }\n    multiplyUnsafe(scalar) {\n        const P0 = JacobianPoint.ZERO;\n        if (typeof scalar === 'bigint' && scalar === _0n)\n            return P0;\n        let n = normalizeScalar(scalar);\n        if (n === _1n)\n            return this;\n        if (!USE_ENDOMORPHISM) {\n            let p = P0;\n            let d = this;\n            while (n > _0n) {\n                if (n & _1n)\n                    p = p.add(d);\n                d = d.double();\n                n >>= _1n;\n            }\n            return p;\n        }\n        let { k1neg, k1, k2neg, k2 } = endo.splitScalar(n);\n        let k1p = P0;\n        let k2p = P0;\n        let d = this;\n        while (k1 > _0n || k2 > _0n) {\n            if (k1 & _1n)\n                k1p = k1p.add(d);\n            if (k2 & _1n)\n                k2p = k2p.add(d);\n            d = d.double();\n            k1 >>= _1n;\n            k2 >>= _1n;\n        }\n        if (k1neg)\n            k1p = k1p.negate();\n        if (k2neg)\n            k2p = k2p.negate();\n        k2p = new JacobianPoint(mod(k2p.x * endo.beta), k2p.y, k2p.z);\n        return k1p.add(k2p);\n    }\n    precomputeWindow(W) {\n        const windows = USE_ENDOMORPHISM ? 128 / W + 1 : 256 / W + 1;\n        const points = [];\n        let p = this;\n        let base = p;\n        for (let window = 0; window < windows; window++) {\n            base = p;\n            points.push(base);\n            for (let i = 1; i < 2 ** (W - 1); i++) {\n                base = base.add(p);\n                points.push(base);\n            }\n            p = base.double();\n        }\n        return points;\n    }\n    wNAF(n, affinePoint) {\n        if (!affinePoint && this.equals(JacobianPoint.BASE))\n            affinePoint = Point.BASE;\n        const W = (affinePoint && affinePoint._WINDOW_SIZE) || 1;\n        if (256 % W) {\n            throw new Error('Point#wNAF: Invalid precomputation window, must be power of 2');\n        }\n        let precomputes = affinePoint && pointPrecomputes.get(affinePoint);\n        if (!precomputes) {\n            precomputes = this.precomputeWindow(W);\n            if (affinePoint && W !== 1) {\n                precomputes = JacobianPoint.normalizeZ(precomputes);\n                pointPrecomputes.set(affinePoint, precomputes);\n            }\n        }\n        let p = JacobianPoint.ZERO;\n        let f = JacobianPoint.BASE;\n        const windows = 1 + (USE_ENDOMORPHISM ? 128 / W : 256 / W);\n        const windowSize = 2 ** (W - 1);\n        const mask = BigInt(2 ** W - 1);\n        const maxNumber = 2 ** W;\n        const shiftBy = BigInt(W);\n        for (let window = 0; window < windows; window++) {\n            const offset = window * windowSize;\n            let wbits = Number(n & mask);\n            n >>= shiftBy;\n            if (wbits > windowSize) {\n                wbits -= maxNumber;\n                n += _1n;\n            }\n            const offset1 = offset;\n            const offset2 = offset + Math.abs(wbits) - 1;\n            const cond1 = window % 2 !== 0;\n            const cond2 = wbits < 0;\n            if (wbits === 0) {\n                f = f.add(constTimeNegate(cond1, precomputes[offset1]));\n            }\n            else {\n                p = p.add(constTimeNegate(cond2, precomputes[offset2]));\n            }\n        }\n        return { p, f };\n    }\n    multiply(scalar, affinePoint) {\n        let n = normalizeScalar(scalar);\n        let point;\n        let fake;\n        if (USE_ENDOMORPHISM) {\n            const { k1neg, k1, k2neg, k2 } = endo.splitScalar(n);\n            let { p: k1p, f: f1p } = this.wNAF(k1, affinePoint);\n            let { p: k2p, f: f2p } = this.wNAF(k2, affinePoint);\n            k1p = constTimeNegate(k1neg, k1p);\n            k2p = constTimeNegate(k2neg, k2p);\n            k2p = new JacobianPoint(mod(k2p.x * endo.beta), k2p.y, k2p.z);\n            point = k1p.add(k2p);\n            fake = f1p.add(f2p);\n        }\n        else {\n            const { p, f } = this.wNAF(n, affinePoint);\n            point = p;\n            fake = f;\n        }\n        return JacobianPoint.normalizeZ([point, fake])[0];\n    }\n    toAffine(invZ) {\n        const { x, y, z } = this;\n        const is0 = this.equals(JacobianPoint.ZERO);\n        if (invZ == null)\n            invZ = is0 ? _8n : invert(z);\n        const iz1 = invZ;\n        const iz2 = mod(iz1 * iz1);\n        const iz3 = mod(iz2 * iz1);\n        const ax = mod(x * iz2);\n        const ay = mod(y * iz3);\n        const zz = mod(z * iz1);\n        if (is0)\n            return Point.ZERO;\n        if (zz !== _1n)\n            throw new Error('invZ was invalid');\n        return new Point(ax, ay);\n    }\n}\nJacobianPoint.BASE = new JacobianPoint(CURVE.Gx, CURVE.Gy, _1n);\nJacobianPoint.ZERO = new JacobianPoint(_0n, _1n, _0n);\nfunction constTimeNegate(condition, item) {\n    const neg = item.negate();\n    return condition ? neg : item;\n}\nconst pointPrecomputes = new WeakMap();\nexport class Point {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    _setWindowSize(windowSize) {\n        this._WINDOW_SIZE = windowSize;\n        pointPrecomputes.delete(this);\n    }\n    hasEvenY() {\n        return this.y % _2n === _0n;\n    }\n    static fromCompressedHex(bytes) {\n        const isShort = bytes.length === 32;\n        const x = bytesToNumber(isShort ? bytes : bytes.subarray(1));\n        if (!isValidFieldElement(x))\n            throw new Error('Point is not on curve');\n        const y2 = weierstrass(x);\n        let y = sqrtMod(y2);\n        const isYOdd = (y & _1n) === _1n;\n        if (isShort) {\n            if (isYOdd)\n                y = mod(-y);\n        }\n        else {\n            const isFirstByteOdd = (bytes[0] & 1) === 1;\n            if (isFirstByteOdd !== isYOdd)\n                y = mod(-y);\n        }\n        const point = new Point(x, y);\n        point.assertValidity();\n        return point;\n    }\n    static fromUncompressedHex(bytes) {\n        const x = bytesToNumber(bytes.subarray(1, fieldLen + 1));\n        const y = bytesToNumber(bytes.subarray(fieldLen + 1, fieldLen * 2 + 1));\n        const point = new Point(x, y);\n        point.assertValidity();\n        return point;\n    }\n    static fromHex(hex) {\n        const bytes = ensureBytes(hex);\n        const len = bytes.length;\n        const header = bytes[0];\n        if (len === fieldLen)\n            return this.fromCompressedHex(bytes);\n        if (len === compressedLen && (header === 0x02 || header === 0x03)) {\n            return this.fromCompressedHex(bytes);\n        }\n        if (len === uncompressedLen && header === 0x04)\n            return this.fromUncompressedHex(bytes);\n        throw new Error(`Point.fromHex: received invalid point. Expected 32-${compressedLen} compressed bytes or ${uncompressedLen} uncompressed bytes, not ${len}`);\n    }\n    static fromPrivateKey(privateKey) {\n        return Point.BASE.multiply(normalizePrivateKey(privateKey));\n    }\n    static fromSignature(msgHash, signature, recovery) {\n        const { r, s } = normalizeSignature(signature);\n        if (![0, 1, 2, 3].includes(recovery))\n            throw new Error('Cannot recover: invalid recovery bit');\n        const h = truncateHash(ensureBytes(msgHash));\n        const { n } = CURVE;\n        const radj = recovery === 2 || recovery === 3 ? r + n : r;\n        const rinv = invert(radj, n);\n        const u1 = mod(-h * rinv, n);\n        const u2 = mod(s * rinv, n);\n        const prefix = recovery & 1 ? '03' : '02';\n        const R = Point.fromHex(prefix + numTo32bStr(radj));\n        const Q = Point.BASE.multiplyAndAddUnsafe(R, u1, u2);\n        if (!Q)\n            throw new Error('Cannot recover signature: point at infinify');\n        Q.assertValidity();\n        return Q;\n    }\n    toRawBytes(isCompressed = false) {\n        return hexToBytes(this.toHex(isCompressed));\n    }\n    toHex(isCompressed = false) {\n        const x = numTo32bStr(this.x);\n        if (isCompressed) {\n            const prefix = this.hasEvenY() ? '02' : '03';\n            return `${prefix}${x}`;\n        }\n        else {\n            return `04${x}${numTo32bStr(this.y)}`;\n        }\n    }\n    toHexX() {\n        return this.toHex(true).slice(2);\n    }\n    toRawX() {\n        return this.toRawBytes(true).slice(1);\n    }\n    assertValidity() {\n        const msg = 'Point is not on elliptic curve';\n        const { x, y } = this;\n        if (!isValidFieldElement(x) || !isValidFieldElement(y))\n            throw new Error(msg);\n        const left = mod(y * y);\n        const right = weierstrass(x);\n        if (mod(left - right) !== _0n)\n            throw new Error(msg);\n    }\n    equals(other) {\n        return this.x === other.x && this.y === other.y;\n    }\n    negate() {\n        return new Point(this.x, mod(-this.y));\n    }\n    double() {\n        return JacobianPoint.fromAffine(this).double().toAffine();\n    }\n    add(other) {\n        return JacobianPoint.fromAffine(this).add(JacobianPoint.fromAffine(other)).toAffine();\n    }\n    subtract(other) {\n        return this.add(other.negate());\n    }\n    multiply(scalar) {\n        return JacobianPoint.fromAffine(this).multiply(scalar, this).toAffine();\n    }\n    multiplyAndAddUnsafe(Q, a, b) {\n        const P = JacobianPoint.fromAffine(this);\n        const aP = a === _0n || a === _1n || this !== Point.BASE ? P.multiplyUnsafe(a) : P.multiply(a);\n        const bQ = JacobianPoint.fromAffine(Q).multiplyUnsafe(b);\n        const sum = aP.add(bQ);\n        return sum.equals(JacobianPoint.ZERO) ? undefined : sum.toAffine();\n    }\n}\nPoint.BASE = new Point(CURVE.Gx, CURVE.Gy);\nPoint.ZERO = new Point(_0n, _0n);\nfunction sliceDER(s) {\n    return Number.parseInt(s[0], 16) >= 8 ? '00' + s : s;\n}\nfunction parseDERInt(data) {\n    if (data.length < 2 || data[0] !== 0x02) {\n        throw new Error(`Invalid signature integer tag: ${bytesToHex(data)}`);\n    }\n    const len = data[1];\n    const res = data.subarray(2, len + 2);\n    if (!len || res.length !== len) {\n        throw new Error(`Invalid signature integer: wrong length`);\n    }\n    if (res[0] === 0x00 && res[1] <= 0x7f) {\n        throw new Error('Invalid signature integer: trailing length');\n    }\n    return { data: bytesToNumber(res), left: data.subarray(len + 2) };\n}\nfunction parseDERSignature(data) {\n    if (data.length < 2 || data[0] != 0x30) {\n        throw new Error(`Invalid signature tag: ${bytesToHex(data)}`);\n    }\n    if (data[1] !== data.length - 2) {\n        throw new Error('Invalid signature: incorrect length');\n    }\n    const { data: r, left: sBytes } = parseDERInt(data.subarray(2));\n    const { data: s, left: rBytesLeft } = parseDERInt(sBytes);\n    if (rBytesLeft.length) {\n        throw new Error(`Invalid signature: left bytes after parsing: ${bytesToHex(rBytesLeft)}`);\n    }\n    return { r, s };\n}\nexport class Signature {\n    constructor(r, s) {\n        this.r = r;\n        this.s = s;\n        this.assertValidity();\n    }\n    static fromCompact(hex) {\n        const arr = hex instanceof Uint8Array;\n        const name = 'Signature.fromCompact';\n        if (typeof hex !== 'string' && !arr)\n            throw new TypeError(`${name}: Expected string or Uint8Array`);\n        const str = arr ? bytesToHex(hex) : hex;\n        if (str.length !== 128)\n            throw new Error(`${name}: Expected 64-byte hex`);\n        return new Signature(hexToNumber(str.slice(0, 64)), hexToNumber(str.slice(64, 128)));\n    }\n    static fromDER(hex) {\n        const arr = hex instanceof Uint8Array;\n        if (typeof hex !== 'string' && !arr)\n            throw new TypeError(`Signature.fromDER: Expected string or Uint8Array`);\n        const { r, s } = parseDERSignature(arr ? hex : hexToBytes(hex));\n        return new Signature(r, s);\n    }\n    static fromHex(hex) {\n        return this.fromDER(hex);\n    }\n    assertValidity() {\n        const { r, s } = this;\n        if (!isWithinCurveOrder(r))\n            throw new Error('Invalid Signature: r must be 0 < r < n');\n        if (!isWithinCurveOrder(s))\n            throw new Error('Invalid Signature: s must be 0 < s < n');\n    }\n    hasHighS() {\n        const HALF = CURVE.n >> _1n;\n        return this.s > HALF;\n    }\n    normalizeS() {\n        return this.hasHighS() ? new Signature(this.r, mod(-this.s, CURVE.n)) : this;\n    }\n    toDERRawBytes() {\n        return hexToBytes(this.toDERHex());\n    }\n    toDERHex() {\n        const sHex = sliceDER(numberToHexUnpadded(this.s));\n        const rHex = sliceDER(numberToHexUnpadded(this.r));\n        const sHexL = sHex.length / 2;\n        const rHexL = rHex.length / 2;\n        const sLen = numberToHexUnpadded(sHexL);\n        const rLen = numberToHexUnpadded(rHexL);\n        const length = numberToHexUnpadded(rHexL + sHexL + 4);\n        return `30${length}02${rLen}${rHex}02${sLen}${sHex}`;\n    }\n    toRawBytes() {\n        return this.toDERRawBytes();\n    }\n    toHex() {\n        return this.toDERHex();\n    }\n    toCompactRawBytes() {\n        return hexToBytes(this.toCompactHex());\n    }\n    toCompactHex() {\n        return numTo32bStr(this.r) + numTo32bStr(this.s);\n    }\n}\nfunction concatBytes(...arrays) {\n    if (!arrays.every((b) => b instanceof Uint8Array))\n        throw new Error('Uint8Array list expected');\n    if (arrays.length === 1)\n        return arrays[0];\n    const length = arrays.reduce((a, arr) => a + arr.length, 0);\n    const result = new Uint8Array(length);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const arr = arrays[i];\n        result.set(arr, pad);\n        pad += arr.length;\n    }\n    return result;\n}\nconst hexes = Array.from({ length: 256 }, (v, i) => i.toString(16).padStart(2, '0'));\nfunction bytesToHex(uint8a) {\n    if (!(uint8a instanceof Uint8Array))\n        throw new Error('Expected Uint8Array');\n    let hex = '';\n    for (let i = 0; i < uint8a.length; i++) {\n        hex += hexes[uint8a[i]];\n    }\n    return hex;\n}\nconst POW_2_256 = BigInt('0x10000000000000000000000000000000000000000000000000000000000000000');\nfunction numTo32bStr(num) {\n    if (typeof num !== 'bigint')\n        throw new Error('Expected bigint');\n    if (!(_0n <= num && num < POW_2_256))\n        throw new Error('Expected number 0 <= n < 2^256');\n    return num.toString(16).padStart(64, '0');\n}\nfunction numTo32b(num) {\n    const b = hexToBytes(numTo32bStr(num));\n    if (b.length !== 32)\n        throw new Error('Error: expected 32 bytes');\n    return b;\n}\nfunction numberToHexUnpadded(num) {\n    const hex = num.toString(16);\n    return hex.length & 1 ? `0${hex}` : hex;\n}\nfunction hexToNumber(hex) {\n    if (typeof hex !== 'string') {\n        throw new TypeError('hexToNumber: expected string, got ' + typeof hex);\n    }\n    return BigInt(`0x${hex}`);\n}\nfunction hexToBytes(hex) {\n    if (typeof hex !== 'string') {\n        throw new TypeError('hexToBytes: expected string, got ' + typeof hex);\n    }\n    if (hex.length % 2)\n        throw new Error('hexToBytes: received invalid unpadded hex' + hex.length);\n    const array = new Uint8Array(hex.length / 2);\n    for (let i = 0; i < array.length; i++) {\n        const j = i * 2;\n        const hexByte = hex.slice(j, j + 2);\n        const byte = Number.parseInt(hexByte, 16);\n        if (Number.isNaN(byte) || byte < 0)\n            throw new Error('Invalid byte sequence');\n        array[i] = byte;\n    }\n    return array;\n}\nfunction bytesToNumber(bytes) {\n    return hexToNumber(bytesToHex(bytes));\n}\nfunction ensureBytes(hex) {\n    return hex instanceof Uint8Array ? Uint8Array.from(hex) : hexToBytes(hex);\n}\nfunction normalizeScalar(num) {\n    if (typeof num === 'number' && Number.isSafeInteger(num) && num > 0)\n        return BigInt(num);\n    if (typeof num === 'bigint' && isWithinCurveOrder(num))\n        return num;\n    throw new TypeError('Expected valid private scalar: 0 < scalar < curve.n');\n}\nfunction mod(a, b = CURVE.P) {\n    const result = a % b;\n    return result >= _0n ? result : b + result;\n}\nfunction pow2(x, power) {\n    const { P } = CURVE;\n    let res = x;\n    while (power-- > _0n) {\n        res *= res;\n        res %= P;\n    }\n    return res;\n}\nfunction sqrtMod(x) {\n    const { P } = CURVE;\n    const _6n = BigInt(6);\n    const _11n = BigInt(11);\n    const _22n = BigInt(22);\n    const _23n = BigInt(23);\n    const _44n = BigInt(44);\n    const _88n = BigInt(88);\n    const b2 = (x * x * x) % P;\n    const b3 = (b2 * b2 * x) % P;\n    const b6 = (pow2(b3, _3n) * b3) % P;\n    const b9 = (pow2(b6, _3n) * b3) % P;\n    const b11 = (pow2(b9, _2n) * b2) % P;\n    const b22 = (pow2(b11, _11n) * b11) % P;\n    const b44 = (pow2(b22, _22n) * b22) % P;\n    const b88 = (pow2(b44, _44n) * b44) % P;\n    const b176 = (pow2(b88, _88n) * b88) % P;\n    const b220 = (pow2(b176, _44n) * b44) % P;\n    const b223 = (pow2(b220, _3n) * b3) % P;\n    const t1 = (pow2(b223, _23n) * b22) % P;\n    const t2 = (pow2(t1, _6n) * b2) % P;\n    const rt = pow2(t2, _2n);\n    const xc = (rt * rt) % P;\n    if (xc !== x)\n        throw new Error('Cannot find square root');\n    return rt;\n}\nfunction invert(number, modulo = CURVE.P) {\n    if (number === _0n || modulo <= _0n) {\n        throw new Error(`invert: expected positive integers, got n=${number} mod=${modulo}`);\n    }\n    let a = mod(number, modulo);\n    let b = modulo;\n    let x = _0n, y = _1n, u = _1n, v = _0n;\n    while (a !== _0n) {\n        const q = b / a;\n        const r = b % a;\n        const m = x - u * q;\n        const n = y - v * q;\n        b = a, a = r, x = u, y = v, u = m, v = n;\n    }\n    const gcd = b;\n    if (gcd !== _1n)\n        throw new Error('invert: does not exist');\n    return mod(x, modulo);\n}\nfunction invertBatch(nums, p = CURVE.P) {\n    const scratch = new Array(nums.length);\n    const lastMultiplied = nums.reduce((acc, num, i) => {\n        if (num === _0n)\n            return acc;\n        scratch[i] = acc;\n        return mod(acc * num, p);\n    }, _1n);\n    const inverted = invert(lastMultiplied, p);\n    nums.reduceRight((acc, num, i) => {\n        if (num === _0n)\n            return acc;\n        scratch[i] = mod(acc * scratch[i], p);\n        return mod(acc * num, p);\n    }, inverted);\n    return scratch;\n}\nfunction bits2int_2(bytes) {\n    const delta = bytes.length * 8 - groupLen * 8;\n    const num = bytesToNumber(bytes);\n    return delta > 0 ? num >> BigInt(delta) : num;\n}\nfunction truncateHash(hash, truncateOnly = false) {\n    const h = bits2int_2(hash);\n    if (truncateOnly)\n        return h;\n    const { n } = CURVE;\n    return h >= n ? h - n : h;\n}\nlet _sha256Sync;\nlet _hmacSha256Sync;\nclass HmacDrbg {\n    constructor(hashLen, qByteLen) {\n        this.hashLen = hashLen;\n        this.qByteLen = qByteLen;\n        if (typeof hashLen !== 'number' || hashLen < 2)\n            throw new Error('hashLen must be a number');\n        if (typeof qByteLen !== 'number' || qByteLen < 2)\n            throw new Error('qByteLen must be a number');\n        this.v = new Uint8Array(hashLen).fill(1);\n        this.k = new Uint8Array(hashLen).fill(0);\n        this.counter = 0;\n    }\n    hmac(...values) {\n        return utils.hmacSha256(this.k, ...values);\n    }\n    hmacSync(...values) {\n        return _hmacSha256Sync(this.k, ...values);\n    }\n    checkSync() {\n        if (typeof _hmacSha256Sync !== 'function')\n            throw new ShaError('hmacSha256Sync needs to be set');\n    }\n    incr() {\n        if (this.counter >= 1000)\n            throw new Error('Tried 1,000 k values for sign(), all were invalid');\n        this.counter += 1;\n    }\n    async reseed(seed = new Uint8Array()) {\n        this.k = await this.hmac(this.v, Uint8Array.from([0x00]), seed);\n        this.v = await this.hmac(this.v);\n        if (seed.length === 0)\n            return;\n        this.k = await this.hmac(this.v, Uint8Array.from([0x01]), seed);\n        this.v = await this.hmac(this.v);\n    }\n    reseedSync(seed = new Uint8Array()) {\n        this.checkSync();\n        this.k = this.hmacSync(this.v, Uint8Array.from([0x00]), seed);\n        this.v = this.hmacSync(this.v);\n        if (seed.length === 0)\n            return;\n        this.k = this.hmacSync(this.v, Uint8Array.from([0x01]), seed);\n        this.v = this.hmacSync(this.v);\n    }\n    async generate() {\n        this.incr();\n        let len = 0;\n        const out = [];\n        while (len < this.qByteLen) {\n            this.v = await this.hmac(this.v);\n            const sl = this.v.slice();\n            out.push(sl);\n            len += this.v.length;\n        }\n        return concatBytes(...out);\n    }\n    generateSync() {\n        this.checkSync();\n        this.incr();\n        let len = 0;\n        const out = [];\n        while (len < this.qByteLen) {\n            this.v = this.hmacSync(this.v);\n            const sl = this.v.slice();\n            out.push(sl);\n            len += this.v.length;\n        }\n        return concatBytes(...out);\n    }\n}\nfunction isWithinCurveOrder(num) {\n    return _0n < num && num < CURVE.n;\n}\nfunction isValidFieldElement(num) {\n    return _0n < num && num < CURVE.P;\n}\nfunction kmdToSig(kBytes, m, d, lowS = true) {\n    const { n } = CURVE;\n    const k = truncateHash(kBytes, true);\n    if (!isWithinCurveOrder(k))\n        return;\n    const kinv = invert(k, n);\n    const q = Point.BASE.multiply(k);\n    const r = mod(q.x, n);\n    if (r === _0n)\n        return;\n    const s = mod(kinv * mod(m + d * r, n), n);\n    if (s === _0n)\n        return;\n    let sig = new Signature(r, s);\n    let recovery = (q.x === sig.r ? 0 : 2) | Number(q.y & _1n);\n    if (lowS && sig.hasHighS()) {\n        sig = sig.normalizeS();\n        recovery ^= 1;\n    }\n    return { sig, recovery };\n}\nfunction normalizePrivateKey(key) {\n    let num;\n    if (typeof key === 'bigint') {\n        num = key;\n    }\n    else if (typeof key === 'number' && Number.isSafeInteger(key) && key > 0) {\n        num = BigInt(key);\n    }\n    else if (typeof key === 'string') {\n        if (key.length !== 2 * groupLen)\n            throw new Error('Expected 32 bytes of private key');\n        num = hexToNumber(key);\n    }\n    else if (key instanceof Uint8Array) {\n        if (key.length !== groupLen)\n            throw new Error('Expected 32 bytes of private key');\n        num = bytesToNumber(key);\n    }\n    else {\n        throw new TypeError('Expected valid private key');\n    }\n    if (!isWithinCurveOrder(num))\n        throw new Error('Expected private key: 0 < key < n');\n    return num;\n}\nfunction normalizePublicKey(publicKey) {\n    if (publicKey instanceof Point) {\n        publicKey.assertValidity();\n        return publicKey;\n    }\n    else {\n        return Point.fromHex(publicKey);\n    }\n}\nfunction normalizeSignature(signature) {\n    if (signature instanceof Signature) {\n        signature.assertValidity();\n        return signature;\n    }\n    try {\n        return Signature.fromDER(signature);\n    }\n    catch (error) {\n        return Signature.fromCompact(signature);\n    }\n}\nexport function getPublicKey(privateKey, isCompressed = false) {\n    return Point.fromPrivateKey(privateKey).toRawBytes(isCompressed);\n}\nexport function recoverPublicKey(msgHash, signature, recovery, isCompressed = false) {\n    return Point.fromSignature(msgHash, signature, recovery).toRawBytes(isCompressed);\n}\nfunction isProbPub(item) {\n    const arr = item instanceof Uint8Array;\n    const str = typeof item === 'string';\n    const len = (arr || str) && item.length;\n    if (arr)\n        return len === compressedLen || len === uncompressedLen;\n    if (str)\n        return len === compressedLen * 2 || len === uncompressedLen * 2;\n    if (item instanceof Point)\n        return true;\n    return false;\n}\nexport function getSharedSecret(privateA, publicB, isCompressed = false) {\n    if (isProbPub(privateA))\n        throw new TypeError('getSharedSecret: first arg must be private key');\n    if (!isProbPub(publicB))\n        throw new TypeError('getSharedSecret: second arg must be public key');\n    const b = normalizePublicKey(publicB);\n    b.assertValidity();\n    return b.multiply(normalizePrivateKey(privateA)).toRawBytes(isCompressed);\n}\nfunction bits2int(bytes) {\n    const slice = bytes.length > fieldLen ? bytes.slice(0, fieldLen) : bytes;\n    return bytesToNumber(slice);\n}\nfunction bits2octets(bytes) {\n    const z1 = bits2int(bytes);\n    const z2 = mod(z1, CURVE.n);\n    return int2octets(z2 < _0n ? z1 : z2);\n}\nfunction int2octets(num) {\n    return numTo32b(num);\n}\nfunction initSigArgs(msgHash, privateKey, extraEntropy) {\n    if (msgHash == null)\n        throw new Error(`sign: expected valid message hash, not \"${msgHash}\"`);\n    const h1 = ensureBytes(msgHash);\n    const d = normalizePrivateKey(privateKey);\n    const seedArgs = [int2octets(d), bits2octets(h1)];\n    if (extraEntropy != null) {\n        if (extraEntropy === true)\n            extraEntropy = utils.randomBytes(fieldLen);\n        const e = ensureBytes(extraEntropy);\n        if (e.length !== fieldLen)\n            throw new Error(`sign: Expected ${fieldLen} bytes of extra data`);\n        seedArgs.push(e);\n    }\n    const seed = concatBytes(...seedArgs);\n    const m = bits2int(h1);\n    return { seed, m, d };\n}\nfunction finalizeSig(recSig, opts) {\n    const { sig, recovery } = recSig;\n    const { der, recovered } = Object.assign({ canonical: true, der: true }, opts);\n    const hashed = der ? sig.toDERRawBytes() : sig.toCompactRawBytes();\n    return recovered ? [hashed, recovery] : hashed;\n}\nasync function sign(msgHash, privKey, opts = {}) {\n    const { seed, m, d } = initSigArgs(msgHash, privKey, opts.extraEntropy);\n    const drbg = new HmacDrbg(hashLen, groupLen);\n    await drbg.reseed(seed);\n    let sig;\n    while (!(sig = kmdToSig(await drbg.generate(), m, d, opts.canonical)))\n        await drbg.reseed();\n    return finalizeSig(sig, opts);\n}\nfunction signSync(msgHash, privKey, opts = {}) {\n    const { seed, m, d } = initSigArgs(msgHash, privKey, opts.extraEntropy);\n    const drbg = new HmacDrbg(hashLen, groupLen);\n    drbg.reseedSync(seed);\n    let sig;\n    while (!(sig = kmdToSig(drbg.generateSync(), m, d, opts.canonical)))\n        drbg.reseedSync();\n    return finalizeSig(sig, opts);\n}\nexport { sign, signSync };\nconst vopts = { strict: true };\nexport function verify(signature, msgHash, publicKey, opts = vopts) {\n    let sig;\n    try {\n        sig = normalizeSignature(signature);\n        msgHash = ensureBytes(msgHash);\n    }\n    catch (error) {\n        return false;\n    }\n    const { r, s } = sig;\n    if (opts.strict && sig.hasHighS())\n        return false;\n    const h = truncateHash(msgHash);\n    let P;\n    try {\n        P = normalizePublicKey(publicKey);\n    }\n    catch (error) {\n        return false;\n    }\n    const { n } = CURVE;\n    const sinv = invert(s, n);\n    const u1 = mod(h * sinv, n);\n    const u2 = mod(r * sinv, n);\n    const R = Point.BASE.multiplyAndAddUnsafe(P, u1, u2);\n    if (!R)\n        return false;\n    const v = mod(R.x, n);\n    return v === r;\n}\nfunction schnorrChallengeFinalize(ch) {\n    return mod(bytesToNumber(ch), CURVE.n);\n}\nclass SchnorrSignature {\n    constructor(r, s) {\n        this.r = r;\n        this.s = s;\n        this.assertValidity();\n    }\n    static fromHex(hex) {\n        const bytes = ensureBytes(hex);\n        if (bytes.length !== 64)\n            throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${bytes.length}`);\n        const r = bytesToNumber(bytes.subarray(0, 32));\n        const s = bytesToNumber(bytes.subarray(32, 64));\n        return new SchnorrSignature(r, s);\n    }\n    assertValidity() {\n        const { r, s } = this;\n        if (!isValidFieldElement(r) || !isWithinCurveOrder(s))\n            throw new Error('Invalid signature');\n    }\n    toHex() {\n        return numTo32bStr(this.r) + numTo32bStr(this.s);\n    }\n    toRawBytes() {\n        return hexToBytes(this.toHex());\n    }\n}\nfunction schnorrGetPublicKey(privateKey) {\n    return Point.fromPrivateKey(privateKey).toRawX();\n}\nclass InternalSchnorrSignature {\n    constructor(message, privateKey, auxRand = utils.randomBytes()) {\n        if (message == null)\n            throw new TypeError(`sign: Expected valid message, not \"${message}\"`);\n        this.m = ensureBytes(message);\n        const { x, scalar } = this.getScalar(normalizePrivateKey(privateKey));\n        this.px = x;\n        this.d = scalar;\n        this.rand = ensureBytes(auxRand);\n        if (this.rand.length !== 32)\n            throw new TypeError('sign: Expected 32 bytes of aux randomness');\n    }\n    getScalar(priv) {\n        const point = Point.fromPrivateKey(priv);\n        const scalar = point.hasEvenY() ? priv : CURVE.n - priv;\n        return { point, scalar, x: point.toRawX() };\n    }\n    initNonce(d, t0h) {\n        return numTo32b(d ^ bytesToNumber(t0h));\n    }\n    finalizeNonce(k0h) {\n        const k0 = mod(bytesToNumber(k0h), CURVE.n);\n        if (k0 === _0n)\n            throw new Error('sign: Creation of signature failed. k is zero');\n        const { point: R, x: rx, scalar: k } = this.getScalar(k0);\n        return { R, rx, k };\n    }\n    finalizeSig(R, k, e, d) {\n        return new SchnorrSignature(R.x, mod(k + e * d, CURVE.n)).toRawBytes();\n    }\n    error() {\n        throw new Error('sign: Invalid signature produced');\n    }\n    async calc() {\n        const { m, d, px, rand } = this;\n        const tag = utils.taggedHash;\n        const t = this.initNonce(d, await tag(TAGS.aux, rand));\n        const { R, rx, k } = this.finalizeNonce(await tag(TAGS.nonce, t, px, m));\n        const e = schnorrChallengeFinalize(await tag(TAGS.challenge, rx, px, m));\n        const sig = this.finalizeSig(R, k, e, d);\n        if (!(await schnorrVerify(sig, m, px)))\n            this.error();\n        return sig;\n    }\n    calcSync() {\n        const { m, d, px, rand } = this;\n        const tag = utils.taggedHashSync;\n        const t = this.initNonce(d, tag(TAGS.aux, rand));\n        const { R, rx, k } = this.finalizeNonce(tag(TAGS.nonce, t, px, m));\n        const e = schnorrChallengeFinalize(tag(TAGS.challenge, rx, px, m));\n        const sig = this.finalizeSig(R, k, e, d);\n        if (!schnorrVerifySync(sig, m, px))\n            this.error();\n        return sig;\n    }\n}\nasync function schnorrSign(msg, privKey, auxRand) {\n    return new InternalSchnorrSignature(msg, privKey, auxRand).calc();\n}\nfunction schnorrSignSync(msg, privKey, auxRand) {\n    return new InternalSchnorrSignature(msg, privKey, auxRand).calcSync();\n}\nfunction initSchnorrVerify(signature, message, publicKey) {\n    const raw = signature instanceof SchnorrSignature;\n    const sig = raw ? signature : SchnorrSignature.fromHex(signature);\n    if (raw)\n        sig.assertValidity();\n    return {\n        ...sig,\n        m: ensureBytes(message),\n        P: normalizePublicKey(publicKey),\n    };\n}\nfunction finalizeSchnorrVerify(r, P, s, e) {\n    const R = Point.BASE.multiplyAndAddUnsafe(P, normalizePrivateKey(s), mod(-e, CURVE.n));\n    if (!R || !R.hasEvenY() || R.x !== r)\n        return false;\n    return true;\n}\nasync function schnorrVerify(signature, message, publicKey) {\n    try {\n        const { r, s, m, P } = initSchnorrVerify(signature, message, publicKey);\n        const e = schnorrChallengeFinalize(await utils.taggedHash(TAGS.challenge, numTo32b(r), P.toRawX(), m));\n        return finalizeSchnorrVerify(r, P, s, e);\n    }\n    catch (error) {\n        return false;\n    }\n}\nfunction schnorrVerifySync(signature, message, publicKey) {\n    try {\n        const { r, s, m, P } = initSchnorrVerify(signature, message, publicKey);\n        const e = schnorrChallengeFinalize(utils.taggedHashSync(TAGS.challenge, numTo32b(r), P.toRawX(), m));\n        return finalizeSchnorrVerify(r, P, s, e);\n    }\n    catch (error) {\n        if (error instanceof ShaError)\n            throw error;\n        return false;\n    }\n}\nexport const schnorr = {\n    Signature: SchnorrSignature,\n    getPublicKey: schnorrGetPublicKey,\n    sign: schnorrSign,\n    verify: schnorrVerify,\n    signSync: schnorrSignSync,\n    verifySync: schnorrVerifySync,\n};\nPoint.BASE._setWindowSize(8);\nconst crypto = {\n    node: nodeCrypto,\n    web: typeof self === 'object' && 'crypto' in self ? self.crypto : undefined,\n};\nconst TAGS = {\n    challenge: 'BIP0340/challenge',\n    aux: 'BIP0340/aux',\n    nonce: 'BIP0340/nonce',\n};\nconst TAGGED_HASH_PREFIXES = {};\nexport const utils = {\n    bytesToHex,\n    hexToBytes,\n    concatBytes,\n    mod,\n    invert,\n    isValidPrivateKey(privateKey) {\n        try {\n            normalizePrivateKey(privateKey);\n            return true;\n        }\n        catch (error) {\n            return false;\n        }\n    },\n    _bigintTo32Bytes: numTo32b,\n    _normalizePrivateKey: normalizePrivateKey,\n    hashToPrivateKey: (hash) => {\n        hash = ensureBytes(hash);\n        const minLen = groupLen + 8;\n        if (hash.length < minLen || hash.length > 1024) {\n            throw new Error(`Expected valid bytes of private key as per FIPS 186`);\n        }\n        const num = mod(bytesToNumber(hash), CURVE.n - _1n) + _1n;\n        return numTo32b(num);\n    },\n    randomBytes: (bytesLength = 32) => {\n        if (crypto.web) {\n            return crypto.web.getRandomValues(new Uint8Array(bytesLength));\n        }\n        else if (crypto.node) {\n            const { randomBytes } = crypto.node;\n            return Uint8Array.from(randomBytes(bytesLength));\n        }\n        else {\n            throw new Error(\"The environment doesn't have randomBytes function\");\n        }\n    },\n    randomPrivateKey: () => utils.hashToPrivateKey(utils.randomBytes(groupLen + 8)),\n    precompute(windowSize = 8, point = Point.BASE) {\n        const cached = point === Point.BASE ? point : new Point(point.x, point.y);\n        cached._setWindowSize(windowSize);\n        cached.multiply(_3n);\n        return cached;\n    },\n    sha256: async (...messages) => {\n        if (crypto.web) {\n            const buffer = await crypto.web.subtle.digest('SHA-256', concatBytes(...messages));\n            return new Uint8Array(buffer);\n        }\n        else if (crypto.node) {\n            const { createHash } = crypto.node;\n            const hash = createHash('sha256');\n            messages.forEach((m) => hash.update(m));\n            return Uint8Array.from(hash.digest());\n        }\n        else {\n            throw new Error(\"The environment doesn't have sha256 function\");\n        }\n    },\n    hmacSha256: async (key, ...messages) => {\n        if (crypto.web) {\n            const ckey = await crypto.web.subtle.importKey('raw', key, { name: 'HMAC', hash: { name: 'SHA-256' } }, false, ['sign']);\n            const message = concatBytes(...messages);\n            const buffer = await crypto.web.subtle.sign('HMAC', ckey, message);\n            return new Uint8Array(buffer);\n        }\n        else if (crypto.node) {\n            const { createHmac } = crypto.node;\n            const hash = createHmac('sha256', key);\n            messages.forEach((m) => hash.update(m));\n            return Uint8Array.from(hash.digest());\n        }\n        else {\n            throw new Error(\"The environment doesn't have hmac-sha256 function\");\n        }\n    },\n    sha256Sync: undefined,\n    hmacSha256Sync: undefined,\n    taggedHash: async (tag, ...messages) => {\n        let tagP = TAGGED_HASH_PREFIXES[tag];\n        if (tagP === undefined) {\n            const tagH = await utils.sha256(Uint8Array.from(tag, (c) => c.charCodeAt(0)));\n            tagP = concatBytes(tagH, tagH);\n            TAGGED_HASH_PREFIXES[tag] = tagP;\n        }\n        return utils.sha256(tagP, ...messages);\n    },\n    taggedHashSync: (tag, ...messages) => {\n        if (typeof _sha256Sync !== 'function')\n            throw new ShaError('sha256Sync is undefined, you need to set it');\n        let tagP = TAGGED_HASH_PREFIXES[tag];\n        if (tagP === undefined) {\n            const tagH = _sha256Sync(Uint8Array.from(tag, (c) => c.charCodeAt(0)));\n            tagP = concatBytes(tagH, tagH);\n            TAGGED_HASH_PREFIXES[tag] = tagP;\n        }\n        return _sha256Sync(tagP, ...messages);\n    },\n    _JacobianPoint: JacobianPoint,\n};\nObject.defineProperties(utils, {\n    sha256Sync: {\n        configurable: false,\n        get() {\n            return _sha256Sync;\n        },\n        set(val) {\n            if (!_sha256Sync)\n                _sha256Sync = val;\n        },\n    },\n    hmacSha256Sync: {\n        configurable: false,\n        get() {\n            return _hmacSha256Sync;\n        },\n        set(val) {\n            if (!_hmacSha256Sync)\n                _hmacSha256Sync = val;\n        },\n    },\n});\n", "export const crypto = {\n    node: undefined,\n    web: typeof self === 'object' && 'crypto' in self ? self.crypto : undefined,\n};\n", "/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// The import here is via the package name. This is to ensure\n// that exports mapping/resolution does fall into place.\nimport { crypto } from '@noble/hashes/crypto';\n// Cast array to different type\nexport const u8 = (arr) => new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\nexport const u32 = (arr) => new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\n// Cast array to view\nexport const createView = (arr) => new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n// The rotate right (circular right shift) operation for uint32\nexport const rotr = (word, shift) => (word << (32 - shift)) | (word >>> shift);\nexport const isLE = new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44;\n// There is almost no big endian hardware, but js typed arrays uses platform specific endianess.\n// So, just to be sure not to corrupt anything.\nif (!isLE)\n    throw new Error('Non little-endian hardware is not supported');\nconst hexes = Array.from({ length: 256 }, (v, i) => i.toString(16).padStart(2, '0'));\n/**\n * @example bytesToHex(Uint8Array.from([0xde, 0xad, 0xbe, 0xef]))\n */\nexport function bytesToHex(uint8a) {\n    // pre-caching improves the speed 6x\n    let hex = '';\n    for (let i = 0; i < uint8a.length; i++) {\n        hex += hexes[uint8a[i]];\n    }\n    return hex;\n}\n/**\n * @example hexToBytes('deadbeef')\n */\nexport function hexToBytes(hex) {\n    if (typeof hex !== 'string') {\n        throw new TypeError('hexToBytes: expected string, got ' + typeof hex);\n    }\n    if (hex.length % 2)\n        throw new Error('hexToBytes: received invalid unpadded hex');\n    const array = new Uint8Array(hex.length / 2);\n    for (let i = 0; i < array.length; i++) {\n        const j = i * 2;\n        const hexByte = hex.slice(j, j + 2);\n        const byte = Number.parseInt(hexByte, 16);\n        if (Number.isNaN(byte))\n            throw new Error('Invalid byte sequence');\n        array[i] = byte;\n    }\n    return array;\n}\n// Currently avoid insertion of polyfills with packers (browserify/webpack/etc)\n// But setTimeout is pretty slow, maybe worth to investigate howto do minimal polyfill here\nexport const nextTick = (() => {\n    const nodeRequire = typeof module !== 'undefined' &&\n        typeof module.require === 'function' &&\n        module.require.bind(module);\n    try {\n        if (nodeRequire) {\n            const { setImmediate } = nodeRequire('timers');\n            return () => new Promise((resolve) => setImmediate(resolve));\n        }\n    }\n    catch (e) { }\n    return () => new Promise((resolve) => setTimeout(resolve, 0));\n})();\n// Returns control to thread each 'tick' ms to avoid blocking\nexport async function asyncLoop(iters, tick, cb) {\n    let ts = Date.now();\n    for (let i = 0; i < iters; i++) {\n        cb(i);\n        // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n        const diff = Date.now() - ts;\n        if (diff >= 0 && diff < tick)\n            continue;\n        await nextTick();\n        ts += diff;\n    }\n}\nexport function utf8ToBytes(str) {\n    if (typeof str !== 'string') {\n        throw new TypeError(`utf8ToBytes expected string, got ${typeof str}`);\n    }\n    return new TextEncoder().encode(str);\n}\nexport function toBytes(data) {\n    if (typeof data === 'string')\n        data = utf8ToBytes(data);\n    if (!(data instanceof Uint8Array))\n        throw new TypeError(`Expected input type is Uint8Array (got ${typeof data})`);\n    return data;\n}\n/**\n * Concats Uint8Array-s into one; like `Buffer.concat([buf1, buf2])`\n * @example concatBytes(buf1, buf2)\n */\nexport function concatBytes(...arrays) {\n    if (!arrays.every((a) => a instanceof Uint8Array))\n        throw new Error('Uint8Array list expected');\n    if (arrays.length === 1)\n        return arrays[0];\n    const length = arrays.reduce((a, arr) => a + arr.length, 0);\n    const result = new Uint8Array(length);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const arr = arrays[i];\n        result.set(arr, pad);\n        pad += arr.length;\n    }\n    return result;\n}\nexport function assertNumber(n) {\n    if (!Number.isSafeInteger(n) || n < 0)\n        throw new Error(`Wrong positive integer: ${n}`);\n}\nexport function assertBool(b) {\n    if (typeof b !== 'boolean') {\n        throw new Error(`Expected boolean, not ${b}`);\n    }\n}\nexport function assertBytes(bytes, ...lengths) {\n    if (bytes instanceof Uint8Array && (!lengths.length || lengths.includes(bytes.length))) {\n        return;\n    }\n    throw new TypeError(`Expected ${lengths} bytes, not ${typeof bytes} with length=${bytes.length}`);\n}\nexport function assertHash(hash) {\n    if (typeof hash !== 'function' || typeof hash.create !== 'function')\n        throw new Error('Hash should be wrapped by utils.wrapConstructor');\n    assertNumber(hash.outputLen);\n    assertNumber(hash.blockLen);\n}\n// For runtime check if class implements interface\nexport class Hash {\n    // Safe version that clones internal state\n    clone() {\n        return this._cloneInto();\n    }\n}\n// Check if object doens't have custom constructor (like Uint8Array/Array)\nconst isPlainObject = (obj) => Object.prototype.toString.call(obj) === '[object Object]' && obj.constructor === Object;\nexport function checkOpts(def, _opts) {\n    if (_opts !== undefined && (typeof _opts !== 'object' || !isPlainObject(_opts)))\n        throw new TypeError('Options should be object or undefined');\n    const opts = Object.assign(def, _opts);\n    return opts;\n}\nexport function wrapConstructor(hashConstructor) {\n    const hashC = (message) => hashConstructor().update(toBytes(message)).digest();\n    const tmp = hashConstructor();\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = () => hashConstructor();\n    return hashC;\n}\nexport function wrapConstructorWithOpts(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\n/**\n * Secure PRNG\n */\nexport function randomBytes(bytesLength = 32) {\n    if (crypto.web) {\n        return crypto.web.getRandomValues(new Uint8Array(bytesLength));\n    }\n    else if (crypto.node) {\n        return new Uint8Array(crypto.node.randomBytes(bytesLength).buffer);\n    }\n    else {\n        throw new Error(\"The environment doesn't have randomBytes function\");\n    }\n}\n", "import { Hash, createView, toBytes } from './utils.js';\n// Polyfill for Safari 14\nfunction setBigUint64(view, byteOffset, value, isLE) {\n    if (typeof view.setBigUint64 === 'function')\n        return view.setBigUint64(byteOffset, value, isLE);\n    const _32n = BigInt(32);\n    const _u32_max = BigInt(0xffffffff);\n    const wh = Number((value >> _32n) & _u32_max);\n    const wl = Number(value & _u32_max);\n    const h = isLE ? 4 : 0;\n    const l = isLE ? 0 : 4;\n    view.setUint32(byteOffset + h, wh, isLE);\n    view.setUint32(byteOffset + l, wl, isLE);\n}\n// Base SHA2 class (RFC 6234)\nexport class SHA2 extends Hash {\n    constructor(blockLen, outputLen, padOffset, isLE) {\n        super();\n        this.blockLen = blockLen;\n        this.outputLen = outputLen;\n        this.padOffset = padOffset;\n        this.isLE = isLE;\n        this.finished = false;\n        this.length = 0;\n        this.pos = 0;\n        this.destroyed = false;\n        this.buffer = new Uint8Array(blockLen);\n        this.view = createView(this.buffer);\n    }\n    update(data) {\n        if (this.destroyed)\n            throw new Error('instance is destroyed');\n        const { view, buffer, blockLen, finished } = this;\n        if (finished)\n            throw new Error('digest() was already called');\n        data = toBytes(data);\n        const len = data.length;\n        for (let pos = 0; pos < len;) {\n            const take = Math.min(blockLen - this.pos, len - pos);\n            // Fast path: we have at least one block in input, cast it to view and process\n            if (take === blockLen) {\n                const dataView = createView(data);\n                for (; blockLen <= len - pos; pos += blockLen)\n                    this.process(dataView, pos);\n                continue;\n            }\n            buffer.set(data.subarray(pos, pos + take), this.pos);\n            this.pos += take;\n            pos += take;\n            if (this.pos === blockLen) {\n                this.process(view, 0);\n                this.pos = 0;\n            }\n        }\n        this.length += data.length;\n        this.roundClean();\n        return this;\n    }\n    digestInto(out) {\n        if (this.destroyed)\n            throw new Error('instance is destroyed');\n        if (!(out instanceof Uint8Array) || out.length < this.outputLen)\n            throw new Error('_Sha2: Invalid output buffer');\n        if (this.finished)\n            throw new Error('digest() was already called');\n        this.finished = true;\n        // Padding\n        // We can avoid allocation of buffer for padding completely if it\n        // was previously not allocated here. But it won't change performance.\n        const { buffer, view, blockLen, isLE } = this;\n        let { pos } = this;\n        // append the bit '1' to the message\n        buffer[pos++] = 0b10000000;\n        this.buffer.subarray(pos).fill(0);\n        // we have less than padOffset left in buffer, so we cannot put length in current block, need process it and pad again\n        if (this.padOffset > blockLen - pos) {\n            this.process(view, 0);\n            pos = 0;\n        }\n        // Pad until full block byte with zeros\n        for (let i = pos; i < blockLen; i++)\n            buffer[i] = 0;\n        // NOTE: sha512 requires length to be 128bit integer, but length in JS will overflow before that\n        // You need to write around 2 exabytes (u64_max / 8 / (1024**6)) for this to happen.\n        // So we just write lowest 64bit of that value.\n        setBigUint64(view, blockLen - 8, BigInt(this.length * 8), isLE);\n        this.process(view, 0);\n        const oview = createView(out);\n        this.get().forEach((v, i) => oview.setUint32(4 * i, v, isLE));\n    }\n    digest() {\n        const { buffer, outputLen } = this;\n        this.digestInto(buffer);\n        const res = buffer.slice(0, outputLen);\n        this.destroy();\n        return res;\n    }\n    _cloneInto(to) {\n        to || (to = new this.constructor());\n        to.set(...this.get());\n        const { blockLen, buffer, length, finished, destroyed, pos } = this;\n        to.length = length;\n        to.pos = pos;\n        to.finished = finished;\n        to.destroyed = destroyed;\n        if (length % blockLen)\n            to.buffer.set(buffer);\n        return to;\n    }\n}\n", "import { SHA2 } from './_sha2.js';\nimport { rotr, wrapConstructor } from './utils.js';\n// Choice: a ? b : c\nconst Chi = (a, b, c) => (a & b) ^ (~a & c);\n// Majority function, true if any two inpust is true\nconst Maj = (a, b, c) => (a & b) ^ (a & c) ^ (b & c);\n// Round constants:\n// first 32 bits of the fractional parts of the cube roots of the first 64 primes 2..311)\n// prettier-ignore\nconst SHA256_K = new Uint32Array([\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n]);\n// Initial state (first 32 bits of the fractional parts of the square roots of the first 8 primes 2..19):\n// prettier-ignore\nconst IV = new Uint32Array([\n    0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19\n]);\n// Temporary buffer, not used to store anything between runs\n// Named this way because it matches specification.\nconst SHA256_W = new Uint32Array(64);\nclass SHA256 extends SHA2 {\n    constructor() {\n        super(64, 32, 8, false);\n        // We cannot use array here since array allows indexing by variable\n        // which means optimizer/compiler cannot use registers.\n        this.A = IV[0] | 0;\n        this.B = IV[1] | 0;\n        this.C = IV[2] | 0;\n        this.D = IV[3] | 0;\n        this.E = IV[4] | 0;\n        this.F = IV[5] | 0;\n        this.G = IV[6] | 0;\n        this.H = IV[7] | 0;\n    }\n    get() {\n        const { A, B, C, D, E, F, G, H } = this;\n        return [A, B, C, D, E, F, G, H];\n    }\n    // prettier-ignore\n    set(A, B, C, D, E, F, G, H) {\n        this.A = A | 0;\n        this.B = B | 0;\n        this.C = C | 0;\n        this.D = D | 0;\n        this.E = E | 0;\n        this.F = F | 0;\n        this.G = G | 0;\n        this.H = H | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 48 words w[16..63] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4)\n            SHA256_W[i] = view.getUint32(offset, false);\n        for (let i = 16; i < 64; i++) {\n            const W15 = SHA256_W[i - 15];\n            const W2 = SHA256_W[i - 2];\n            const s0 = rotr(W15, 7) ^ rotr(W15, 18) ^ (W15 >>> 3);\n            const s1 = rotr(W2, 17) ^ rotr(W2, 19) ^ (W2 >>> 10);\n            SHA256_W[i] = (s1 + SHA256_W[i - 7] + s0 + SHA256_W[i - 16]) | 0;\n        }\n        // Compression function main loop, 64 rounds\n        let { A, B, C, D, E, F, G, H } = this;\n        for (let i = 0; i < 64; i++) {\n            const sigma1 = rotr(E, 6) ^ rotr(E, 11) ^ rotr(E, 25);\n            const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const sigma0 = rotr(A, 2) ^ rotr(A, 13) ^ rotr(A, 22);\n            const T2 = (sigma0 + Maj(A, B, C)) | 0;\n            H = G;\n            G = F;\n            F = E;\n            E = (D + T1) | 0;\n            D = C;\n            C = B;\n            B = A;\n            A = (T1 + T2) | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        A = (A + this.A) | 0;\n        B = (B + this.B) | 0;\n        C = (C + this.C) | 0;\n        D = (D + this.D) | 0;\n        E = (E + this.E) | 0;\n        F = (F + this.F) | 0;\n        G = (G + this.G) | 0;\n        H = (H + this.H) | 0;\n        this.set(A, B, C, D, E, F, G, H);\n    }\n    roundClean() {\n        SHA256_W.fill(0);\n    }\n    destroy() {\n        this.set(0, 0, 0, 0, 0, 0, 0, 0);\n        this.buffer.fill(0);\n    }\n}\n/**\n * SHA2-256 hash function\n * @param message - data that would be hashed\n */\nexport const sha256 = wrapConstructor(() => new SHA256());\n", "/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nexport function assertNumber(n) {\n    if (!Number.isSafeInteger(n))\n        throw new Error(`Wrong integer: ${n}`);\n}\nfunction chain(...args) {\n    const wrap = (a, b) => (c) => a(b(c));\n    const encode = Array.from(args)\n        .reverse()\n        .reduce((acc, i) => (acc ? wrap(acc, i.encode) : i.encode), undefined);\n    const decode = args.reduce((acc, i) => (acc ? wrap(acc, i.decode) : i.decode), undefined);\n    return { encode, decode };\n}\nfunction alphabet(alphabet) {\n    return {\n        encode: (digits) => {\n            if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n                throw new Error('alphabet.encode input should be an array of numbers');\n            return digits.map((i) => {\n                assertNumber(i);\n                if (i < 0 || i >= alphabet.length)\n                    throw new Error(`Digit index outside alphabet: ${i} (alphabet: ${alphabet.length})`);\n                return alphabet[i];\n            });\n        },\n        decode: (input) => {\n            if (!Array.isArray(input) || (input.length && typeof input[0] !== 'string'))\n                throw new Error('alphabet.decode input should be array of strings');\n            return input.map((letter) => {\n                if (typeof letter !== 'string')\n                    throw new Error(`alphabet.decode: not string element=${letter}`);\n                const index = alphabet.indexOf(letter);\n                if (index === -1)\n                    throw new Error(`Unknown letter: \"${letter}\". Allowed: ${alphabet}`);\n                return index;\n            });\n        },\n    };\n}\nfunction join(separator = '') {\n    if (typeof separator !== 'string')\n        throw new Error('join separator should be string');\n    return {\n        encode: (from) => {\n            if (!Array.isArray(from) || (from.length && typeof from[0] !== 'string'))\n                throw new Error('join.encode input should be array of strings');\n            for (let i of from)\n                if (typeof i !== 'string')\n                    throw new Error(`join.encode: non-string input=${i}`);\n            return from.join(separator);\n        },\n        decode: (to) => {\n            if (typeof to !== 'string')\n                throw new Error('join.decode input should be string');\n            return to.split(separator);\n        },\n    };\n}\nfunction padding(bits, chr = '=') {\n    assertNumber(bits);\n    if (typeof chr !== 'string')\n        throw new Error('padding chr should be string');\n    return {\n        encode(data) {\n            if (!Array.isArray(data) || (data.length && typeof data[0] !== 'string'))\n                throw new Error('padding.encode input should be array of strings');\n            for (let i of data)\n                if (typeof i !== 'string')\n                    throw new Error(`padding.encode: non-string input=${i}`);\n            while ((data.length * bits) % 8)\n                data.push(chr);\n            return data;\n        },\n        decode(input) {\n            if (!Array.isArray(input) || (input.length && typeof input[0] !== 'string'))\n                throw new Error('padding.encode input should be array of strings');\n            for (let i of input)\n                if (typeof i !== 'string')\n                    throw new Error(`padding.decode: non-string input=${i}`);\n            let end = input.length;\n            if ((end * bits) % 8)\n                throw new Error('Invalid padding: string should have whole number of bytes');\n            for (; end > 0 && input[end - 1] === chr; end--) {\n                if (!(((end - 1) * bits) % 8))\n                    throw new Error('Invalid padding: string has too much padding');\n            }\n            return input.slice(0, end);\n        },\n    };\n}\nfunction normalize(fn) {\n    if (typeof fn !== 'function')\n        throw new Error('normalize fn should be function');\n    return { encode: (from) => from, decode: (to) => fn(to) };\n}\nfunction convertRadix(data, from, to) {\n    if (from < 2)\n        throw new Error(`convertRadix: wrong from=${from}, base cannot be less than 2`);\n    if (to < 2)\n        throw new Error(`convertRadix: wrong to=${to}, base cannot be less than 2`);\n    if (!Array.isArray(data))\n        throw new Error('convertRadix: data should be array');\n    if (!data.length)\n        return [];\n    let pos = 0;\n    const res = [];\n    const digits = Array.from(data);\n    digits.forEach((d) => {\n        assertNumber(d);\n        if (d < 0 || d >= from)\n            throw new Error(`Wrong integer: ${d}`);\n    });\n    while (true) {\n        let carry = 0;\n        let done = true;\n        for (let i = pos; i < digits.length; i++) {\n            const digit = digits[i];\n            const digitBase = from * carry + digit;\n            if (!Number.isSafeInteger(digitBase) ||\n                (from * carry) / from !== carry ||\n                digitBase - digit !== from * carry) {\n                throw new Error('convertRadix: carry overflow');\n            }\n            carry = digitBase % to;\n            digits[i] = Math.floor(digitBase / to);\n            if (!Number.isSafeInteger(digits[i]) || digits[i] * to + carry !== digitBase)\n                throw new Error('convertRadix: carry overflow');\n            if (!done)\n                continue;\n            else if (!digits[i])\n                pos = i;\n            else\n                done = false;\n        }\n        res.push(carry);\n        if (done)\n            break;\n    }\n    for (let i = 0; i < data.length - 1 && data[i] === 0; i++)\n        res.push(0);\n    return res.reverse();\n}\nconst gcd = (a, b) => (!b ? a : gcd(b, a % b));\nconst radix2carry = (from, to) => from + (to - gcd(from, to));\nfunction convertRadix2(data, from, to, padding) {\n    if (!Array.isArray(data))\n        throw new Error('convertRadix2: data should be array');\n    if (from <= 0 || from > 32)\n        throw new Error(`convertRadix2: wrong from=${from}`);\n    if (to <= 0 || to > 32)\n        throw new Error(`convertRadix2: wrong to=${to}`);\n    if (radix2carry(from, to) > 32) {\n        throw new Error(`convertRadix2: carry overflow from=${from} to=${to} carryBits=${radix2carry(from, to)}`);\n    }\n    let carry = 0;\n    let pos = 0;\n    const mask = 2 ** to - 1;\n    const res = [];\n    for (const n of data) {\n        assertNumber(n);\n        if (n >= 2 ** from)\n            throw new Error(`convertRadix2: invalid data word=${n} from=${from}`);\n        carry = (carry << from) | n;\n        if (pos + from > 32)\n            throw new Error(`convertRadix2: carry overflow pos=${pos} from=${from}`);\n        pos += from;\n        for (; pos >= to; pos -= to)\n            res.push(((carry >> (pos - to)) & mask) >>> 0);\n        carry &= 2 ** pos - 1;\n    }\n    carry = (carry << (to - pos)) & mask;\n    if (!padding && pos >= from)\n        throw new Error('Excess padding');\n    if (!padding && carry)\n        throw new Error(`Non-zero padding: ${carry}`);\n    if (padding && pos > 0)\n        res.push(carry >>> 0);\n    return res;\n}\nfunction radix(num) {\n    assertNumber(num);\n    return {\n        encode: (bytes) => {\n            if (!(bytes instanceof Uint8Array))\n                throw new Error('radix.encode input should be Uint8Array');\n            return convertRadix(Array.from(bytes), 2 ** 8, num);\n        },\n        decode: (digits) => {\n            if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n                throw new Error('radix.decode input should be array of strings');\n            return Uint8Array.from(convertRadix(digits, num, 2 ** 8));\n        },\n    };\n}\nfunction radix2(bits, revPadding = false) {\n    assertNumber(bits);\n    if (bits <= 0 || bits > 32)\n        throw new Error('radix2: bits should be in (0..32]');\n    if (radix2carry(8, bits) > 32 || radix2carry(bits, 8) > 32)\n        throw new Error('radix2: carry overflow');\n    return {\n        encode: (bytes) => {\n            if (!(bytes instanceof Uint8Array))\n                throw new Error('radix2.encode input should be Uint8Array');\n            return convertRadix2(Array.from(bytes), 8, bits, !revPadding);\n        },\n        decode: (digits) => {\n            if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n                throw new Error('radix2.decode input should be array of strings');\n            return Uint8Array.from(convertRadix2(digits, bits, 8, revPadding));\n        },\n    };\n}\nfunction unsafeWrapper(fn) {\n    if (typeof fn !== 'function')\n        throw new Error('unsafeWrapper fn should be function');\n    return function (...args) {\n        try {\n            return fn.apply(null, args);\n        }\n        catch (e) { }\n    };\n}\nfunction checksum(len, fn) {\n    assertNumber(len);\n    if (typeof fn !== 'function')\n        throw new Error('checksum fn should be function');\n    return {\n        encode(data) {\n            if (!(data instanceof Uint8Array))\n                throw new Error('checksum.encode: input should be Uint8Array');\n            const checksum = fn(data).slice(0, len);\n            const res = new Uint8Array(data.length + len);\n            res.set(data);\n            res.set(checksum, data.length);\n            return res;\n        },\n        decode(data) {\n            if (!(data instanceof Uint8Array))\n                throw new Error('checksum.decode: input should be Uint8Array');\n            const payload = data.slice(0, -len);\n            const newChecksum = fn(payload).slice(0, len);\n            const oldChecksum = data.slice(-len);\n            for (let i = 0; i < len; i++)\n                if (newChecksum[i] !== oldChecksum[i])\n                    throw new Error('Invalid checksum');\n            return payload;\n        },\n    };\n}\nexport const utils = { alphabet, chain, checksum, radix, radix2, join, padding };\nexport const base16 = chain(radix2(4), alphabet('0123456789ABCDEF'), join(''));\nexport const base32 = chain(radix2(5), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZ234567'), padding(5), join(''));\nexport const base32hex = chain(radix2(5), alphabet('0123456789ABCDEFGHIJKLMNOPQRSTUV'), padding(5), join(''));\nexport const base32crockford = chain(radix2(5), alphabet('0123456789ABCDEFGHJKMNPQRSTVWXYZ'), join(''), normalize((s) => s.toUpperCase().replace(/O/g, '0').replace(/[IL]/g, '1')));\nexport const base64 = chain(radix2(6), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'), padding(6), join(''));\nexport const base64url = chain(radix2(6), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'), padding(6), join(''));\nconst genBase58 = (abc) => chain(radix(58), alphabet(abc), join(''));\nexport const base58 = genBase58('123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz');\nexport const base58flickr = genBase58('123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ');\nexport const base58xrp = genBase58('rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz');\nconst XMR_BLOCK_LEN = [0, 2, 3, 5, 6, 7, 9, 10, 11];\nexport const base58xmr = {\n    encode(data) {\n        let res = '';\n        for (let i = 0; i < data.length; i += 8) {\n            const block = data.subarray(i, i + 8);\n            res += base58.encode(block).padStart(XMR_BLOCK_LEN[block.length], '1');\n        }\n        return res;\n    },\n    decode(str) {\n        let res = [];\n        for (let i = 0; i < str.length; i += 11) {\n            const slice = str.slice(i, i + 11);\n            const blockLen = XMR_BLOCK_LEN.indexOf(slice.length);\n            const block = base58.decode(slice);\n            for (let j = 0; j < block.length - blockLen; j++) {\n                if (block[j] !== 0)\n                    throw new Error('base58xmr: wrong padding');\n            }\n            res = res.concat(Array.from(block.slice(block.length - blockLen)));\n        }\n        return Uint8Array.from(res);\n    },\n};\nexport const base58check = (sha256) => chain(checksum(4, (data) => sha256(sha256(data))), base58);\nconst BECH_ALPHABET = chain(alphabet('qpzry9x8gf2tvdw0s3jn54khce6mua7l'), join(''));\nconst POLYMOD_GENERATORS = [0x3b6a57b2, 0x26508e6d, 0x1ea119fa, 0x3d4233dd, 0x2a1462b3];\nfunction bech32Polymod(pre) {\n    const b = pre >> 25;\n    let chk = (pre & 0x1ffffff) << 5;\n    for (let i = 0; i < POLYMOD_GENERATORS.length; i++) {\n        if (((b >> i) & 1) === 1)\n            chk ^= POLYMOD_GENERATORS[i];\n    }\n    return chk;\n}\nfunction bechChecksum(prefix, words, encodingConst = 1) {\n    const len = prefix.length;\n    let chk = 1;\n    for (let i = 0; i < len; i++) {\n        const c = prefix.charCodeAt(i);\n        if (c < 33 || c > 126)\n            throw new Error(`Invalid prefix (${prefix})`);\n        chk = bech32Polymod(chk) ^ (c >> 5);\n    }\n    chk = bech32Polymod(chk);\n    for (let i = 0; i < len; i++)\n        chk = bech32Polymod(chk) ^ (prefix.charCodeAt(i) & 0x1f);\n    for (let v of words)\n        chk = bech32Polymod(chk) ^ v;\n    for (let i = 0; i < 6; i++)\n        chk = bech32Polymod(chk);\n    chk ^= encodingConst;\n    return BECH_ALPHABET.encode(convertRadix2([chk % 2 ** 30], 30, 5, false));\n}\nfunction genBech32(encoding) {\n    const ENCODING_CONST = encoding === 'bech32' ? 1 : 0x2bc830a3;\n    const _words = radix2(5);\n    const fromWords = _words.decode;\n    const toWords = _words.encode;\n    const fromWordsUnsafe = unsafeWrapper(fromWords);\n    function encode(prefix, words, limit = 90) {\n        if (typeof prefix !== 'string')\n            throw new Error(`bech32.encode prefix should be string, not ${typeof prefix}`);\n        if (!Array.isArray(words) || (words.length && typeof words[0] !== 'number'))\n            throw new Error(`bech32.encode words should be array of numbers, not ${typeof words}`);\n        const actualLength = prefix.length + 7 + words.length;\n        if (limit !== false && actualLength > limit)\n            throw new TypeError(`Length ${actualLength} exceeds limit ${limit}`);\n        prefix = prefix.toLowerCase();\n        return `${prefix}1${BECH_ALPHABET.encode(words)}${bechChecksum(prefix, words, ENCODING_CONST)}`;\n    }\n    function decode(str, limit = 90) {\n        if (typeof str !== 'string')\n            throw new Error(`bech32.decode input should be string, not ${typeof str}`);\n        if (str.length < 8 || (limit !== false && str.length > limit))\n            throw new TypeError(`Wrong string length: ${str.length} (${str}). Expected (8..${limit})`);\n        const lowered = str.toLowerCase();\n        if (str !== lowered && str !== str.toUpperCase())\n            throw new Error(`String must be lowercase or uppercase`);\n        str = lowered;\n        const sepIndex = str.lastIndexOf('1');\n        if (sepIndex === 0 || sepIndex === -1)\n            throw new Error(`Letter \"1\" must be present between prefix and data only`);\n        const prefix = str.slice(0, sepIndex);\n        const _words = str.slice(sepIndex + 1);\n        if (_words.length < 6)\n            throw new Error('Data must be at least 6 characters long');\n        const words = BECH_ALPHABET.decode(_words).slice(0, -6);\n        const sum = bechChecksum(prefix, words, ENCODING_CONST);\n        if (!_words.endsWith(sum))\n            throw new Error(`Invalid checksum in ${str}: expected \"${sum}\"`);\n        return { prefix, words };\n    }\n    const decodeUnsafe = unsafeWrapper(decode);\n    function decodeToBytes(str) {\n        const { prefix, words } = decode(str, false);\n        return { prefix, words, bytes: fromWords(words) };\n    }\n    return { encode, decode, decodeToBytes, decodeUnsafe, fromWords, fromWordsUnsafe, toWords };\n}\nexport const bech32 = genBech32('bech32');\nexport const bech32m = genBech32('bech32m');\nexport const utf8 = {\n    encode: (data) => new TextDecoder().decode(data),\n    decode: (str) => new TextEncoder().encode(str),\n};\nexport const hex = chain(radix2(4), alphabet('0123456789abcdef'), join(''), normalize((s) => {\n    if (typeof s !== 'string' || s.length % 2)\n        throw new TypeError(`hex.decode: expected string, got ${typeof s} with length ${s.length}`);\n    return s.toLowerCase();\n}));\nconst CODERS = {\n    utf8, hex, base16, base32, base64, base64url, base58, base58xmr\n};\nconst coderTypeError = `Invalid encoding type. Available types: ${Object.keys(CODERS).join(', ')}`;\nexport const bytesToString = (type, bytes) => {\n    if (typeof type !== 'string' || !CODERS.hasOwnProperty(type))\n        throw new TypeError(coderTypeError);\n    if (!(bytes instanceof Uint8Array))\n        throw new TypeError('bytesToString() expects Uint8Array');\n    return CODERS[type].encode(bytes);\n};\nexport const str = bytesToString;\nexport const stringToBytes = (type, str) => {\n    if (!CODERS.hasOwnProperty(type))\n        throw new TypeError(coderTypeError);\n    if (typeof str !== 'string')\n        throw new TypeError('stringToBytes() expects string');\n    return CODERS[type].decode(str);\n};\nexport const bytes = stringToBytes;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.wordlist = void 0;\nexports.wordlist = `abandon\nability\nable\nabout\nabove\nabsent\nabsorb\nabstract\nabsurd\nabuse\naccess\naccident\naccount\naccuse\nachieve\nacid\nacoustic\nacquire\nacross\nact\naction\nactor\nactress\nactual\nadapt\nadd\naddict\naddress\nadjust\nadmit\nadult\nadvance\nadvice\naerobic\naffair\nafford\nafraid\nagain\nage\nagent\nagree\nahead\naim\nair\nairport\naisle\nalarm\nalbum\nalcohol\nalert\nalien\nall\nalley\nallow\nalmost\nalone\nalpha\nalready\nalso\nalter\nalways\namateur\namazing\namong\namount\namused\nanalyst\nanchor\nancient\nanger\nangle\nangry\nanimal\nankle\nannounce\nannual\nanother\nanswer\nantenna\nantique\nanxiety\nany\napart\napology\nappear\napple\napprove\napril\narch\narctic\narea\narena\nargue\narm\narmed\narmor\narmy\naround\narrange\narrest\narrive\narrow\nart\nartefact\nartist\nartwork\nask\naspect\nassault\nasset\nassist\nassume\nasthma\nathlete\natom\nattack\nattend\nattitude\nattract\nauction\naudit\naugust\naunt\nauthor\nauto\nautumn\naverage\navocado\navoid\nawake\naware\naway\nawesome\nawful\nawkward\naxis\nbaby\nbachelor\nbacon\nbadge\nbag\nbalance\nbalcony\nball\nbamboo\nbanana\nbanner\nbar\nbarely\nbargain\nbarrel\nbase\nbasic\nbasket\nbattle\nbeach\nbean\nbeauty\nbecause\nbecome\nbeef\nbefore\nbegin\nbehave\nbehind\nbelieve\nbelow\nbelt\nbench\nbenefit\nbest\nbetray\nbetter\nbetween\nbeyond\nbicycle\nbid\nbike\nbind\nbiology\nbird\nbirth\nbitter\nblack\nblade\nblame\nblanket\nblast\nbleak\nbless\nblind\nblood\nblossom\nblouse\nblue\nblur\nblush\nboard\nboat\nbody\nboil\nbomb\nbone\nbonus\nbook\nboost\nborder\nboring\nborrow\nboss\nbottom\nbounce\nbox\nboy\nbracket\nbrain\nbrand\nbrass\nbrave\nbread\nbreeze\nbrick\nbridge\nbrief\nbright\nbring\nbrisk\nbroccoli\nbroken\nbronze\nbroom\nbrother\nbrown\nbrush\nbubble\nbuddy\nbudget\nbuffalo\nbuild\nbulb\nbulk\nbullet\nbundle\nbunker\nburden\nburger\nburst\nbus\nbusiness\nbusy\nbutter\nbuyer\nbuzz\ncabbage\ncabin\ncable\ncactus\ncage\ncake\ncall\ncalm\ncamera\ncamp\ncan\ncanal\ncancel\ncandy\ncannon\ncanoe\ncanvas\ncanyon\ncapable\ncapital\ncaptain\ncar\ncarbon\ncard\ncargo\ncarpet\ncarry\ncart\ncase\ncash\ncasino\ncastle\ncasual\ncat\ncatalog\ncatch\ncategory\ncattle\ncaught\ncause\ncaution\ncave\nceiling\ncelery\ncement\ncensus\ncentury\ncereal\ncertain\nchair\nchalk\nchampion\nchange\nchaos\nchapter\ncharge\nchase\nchat\ncheap\ncheck\ncheese\nchef\ncherry\nchest\nchicken\nchief\nchild\nchimney\nchoice\nchoose\nchronic\nchuckle\nchunk\nchurn\ncigar\ncinnamon\ncircle\ncitizen\ncity\ncivil\nclaim\nclap\nclarify\nclaw\nclay\nclean\nclerk\nclever\nclick\nclient\ncliff\nclimb\nclinic\nclip\nclock\nclog\nclose\ncloth\ncloud\nclown\nclub\nclump\ncluster\nclutch\ncoach\ncoast\ncoconut\ncode\ncoffee\ncoil\ncoin\ncollect\ncolor\ncolumn\ncombine\ncome\ncomfort\ncomic\ncommon\ncompany\nconcert\nconduct\nconfirm\ncongress\nconnect\nconsider\ncontrol\nconvince\ncook\ncool\ncopper\ncopy\ncoral\ncore\ncorn\ncorrect\ncost\ncotton\ncouch\ncountry\ncouple\ncourse\ncousin\ncover\ncoyote\ncrack\ncradle\ncraft\ncram\ncrane\ncrash\ncrater\ncrawl\ncrazy\ncream\ncredit\ncreek\ncrew\ncricket\ncrime\ncrisp\ncritic\ncrop\ncross\ncrouch\ncrowd\ncrucial\ncruel\ncruise\ncrumble\ncrunch\ncrush\ncry\ncrystal\ncube\nculture\ncup\ncupboard\ncurious\ncurrent\ncurtain\ncurve\ncushion\ncustom\ncute\ncycle\ndad\ndamage\ndamp\ndance\ndanger\ndaring\ndash\ndaughter\ndawn\nday\ndeal\ndebate\ndebris\ndecade\ndecember\ndecide\ndecline\ndecorate\ndecrease\ndeer\ndefense\ndefine\ndefy\ndegree\ndelay\ndeliver\ndemand\ndemise\ndenial\ndentist\ndeny\ndepart\ndepend\ndeposit\ndepth\ndeputy\nderive\ndescribe\ndesert\ndesign\ndesk\ndespair\ndestroy\ndetail\ndetect\ndevelop\ndevice\ndevote\ndiagram\ndial\ndiamond\ndiary\ndice\ndiesel\ndiet\ndiffer\ndigital\ndignity\ndilemma\ndinner\ndinosaur\ndirect\ndirt\ndisagree\ndiscover\ndisease\ndish\ndismiss\ndisorder\ndisplay\ndistance\ndivert\ndivide\ndivorce\ndizzy\ndoctor\ndocument\ndog\ndoll\ndolphin\ndomain\ndonate\ndonkey\ndonor\ndoor\ndose\ndouble\ndove\ndraft\ndragon\ndrama\ndrastic\ndraw\ndream\ndress\ndrift\ndrill\ndrink\ndrip\ndrive\ndrop\ndrum\ndry\nduck\ndumb\ndune\nduring\ndust\ndutch\nduty\ndwarf\ndynamic\neager\neagle\nearly\nearn\nearth\neasily\neast\neasy\necho\necology\neconomy\nedge\nedit\neducate\neffort\negg\neight\neither\nelbow\nelder\nelectric\nelegant\nelement\nelephant\nelevator\nelite\nelse\nembark\nembody\nembrace\nemerge\nemotion\nemploy\nempower\nempty\nenable\nenact\nend\nendless\nendorse\nenemy\nenergy\nenforce\nengage\nengine\nenhance\nenjoy\nenlist\nenough\nenrich\nenroll\nensure\nenter\nentire\nentry\nenvelope\nepisode\nequal\nequip\nera\nerase\nerode\nerosion\nerror\nerupt\nescape\nessay\nessence\nestate\neternal\nethics\nevidence\nevil\nevoke\nevolve\nexact\nexample\nexcess\nexchange\nexcite\nexclude\nexcuse\nexecute\nexercise\nexhaust\nexhibit\nexile\nexist\nexit\nexotic\nexpand\nexpect\nexpire\nexplain\nexpose\nexpress\nextend\nextra\neye\neyebrow\nfabric\nface\nfaculty\nfade\nfaint\nfaith\nfall\nfalse\nfame\nfamily\nfamous\nfan\nfancy\nfantasy\nfarm\nfashion\nfat\nfatal\nfather\nfatigue\nfault\nfavorite\nfeature\nfebruary\nfederal\nfee\nfeed\nfeel\nfemale\nfence\nfestival\nfetch\nfever\nfew\nfiber\nfiction\nfield\nfigure\nfile\nfilm\nfilter\nfinal\nfind\nfine\nfinger\nfinish\nfire\nfirm\nfirst\nfiscal\nfish\nfit\nfitness\nfix\nflag\nflame\nflash\nflat\nflavor\nflee\nflight\nflip\nfloat\nflock\nfloor\nflower\nfluid\nflush\nfly\nfoam\nfocus\nfog\nfoil\nfold\nfollow\nfood\nfoot\nforce\nforest\nforget\nfork\nfortune\nforum\nforward\nfossil\nfoster\nfound\nfox\nfragile\nframe\nfrequent\nfresh\nfriend\nfringe\nfrog\nfront\nfrost\nfrown\nfrozen\nfruit\nfuel\nfun\nfunny\nfurnace\nfury\nfuture\ngadget\ngain\ngalaxy\ngallery\ngame\ngap\ngarage\ngarbage\ngarden\ngarlic\ngarment\ngas\ngasp\ngate\ngather\ngauge\ngaze\ngeneral\ngenius\ngenre\ngentle\ngenuine\ngesture\nghost\ngiant\ngift\ngiggle\nginger\ngiraffe\ngirl\ngive\nglad\nglance\nglare\nglass\nglide\nglimpse\nglobe\ngloom\nglory\nglove\nglow\nglue\ngoat\ngoddess\ngold\ngood\ngoose\ngorilla\ngospel\ngossip\ngovern\ngown\ngrab\ngrace\ngrain\ngrant\ngrape\ngrass\ngravity\ngreat\ngreen\ngrid\ngrief\ngrit\ngrocery\ngroup\ngrow\ngrunt\nguard\nguess\nguide\nguilt\nguitar\ngun\ngym\nhabit\nhair\nhalf\nhammer\nhamster\nhand\nhappy\nharbor\nhard\nharsh\nharvest\nhat\nhave\nhawk\nhazard\nhead\nhealth\nheart\nheavy\nhedgehog\nheight\nhello\nhelmet\nhelp\nhen\nhero\nhidden\nhigh\nhill\nhint\nhip\nhire\nhistory\nhobby\nhockey\nhold\nhole\nholiday\nhollow\nhome\nhoney\nhood\nhope\nhorn\nhorror\nhorse\nhospital\nhost\nhotel\nhour\nhover\nhub\nhuge\nhuman\nhumble\nhumor\nhundred\nhungry\nhunt\nhurdle\nhurry\nhurt\nhusband\nhybrid\nice\nicon\nidea\nidentify\nidle\nignore\nill\nillegal\nillness\nimage\nimitate\nimmense\nimmune\nimpact\nimpose\nimprove\nimpulse\ninch\ninclude\nincome\nincrease\nindex\nindicate\nindoor\nindustry\ninfant\ninflict\ninform\ninhale\ninherit\ninitial\ninject\ninjury\ninmate\ninner\ninnocent\ninput\ninquiry\ninsane\ninsect\ninside\ninspire\ninstall\nintact\ninterest\ninto\ninvest\ninvite\ninvolve\niron\nisland\nisolate\nissue\nitem\nivory\njacket\njaguar\njar\njazz\njealous\njeans\njelly\njewel\njob\njoin\njoke\njourney\njoy\njudge\njuice\njump\njungle\njunior\njunk\njust\nkangaroo\nkeen\nkeep\nketchup\nkey\nkick\nkid\nkidney\nkind\nkingdom\nkiss\nkit\nkitchen\nkite\nkitten\nkiwi\nknee\nknife\nknock\nknow\nlab\nlabel\nlabor\nladder\nlady\nlake\nlamp\nlanguage\nlaptop\nlarge\nlater\nlatin\nlaugh\nlaundry\nlava\nlaw\nlawn\nlawsuit\nlayer\nlazy\nleader\nleaf\nlearn\nleave\nlecture\nleft\nleg\nlegal\nlegend\nleisure\nlemon\nlend\nlength\nlens\nleopard\nlesson\nletter\nlevel\nliar\nliberty\nlibrary\nlicense\nlife\nlift\nlight\nlike\nlimb\nlimit\nlink\nlion\nliquid\nlist\nlittle\nlive\nlizard\nload\nloan\nlobster\nlocal\nlock\nlogic\nlonely\nlong\nloop\nlottery\nloud\nlounge\nlove\nloyal\nlucky\nluggage\nlumber\nlunar\nlunch\nluxury\nlyrics\nmachine\nmad\nmagic\nmagnet\nmaid\nmail\nmain\nmajor\nmake\nmammal\nman\nmanage\nmandate\nmango\nmansion\nmanual\nmaple\nmarble\nmarch\nmargin\nmarine\nmarket\nmarriage\nmask\nmass\nmaster\nmatch\nmaterial\nmath\nmatrix\nmatter\nmaximum\nmaze\nmeadow\nmean\nmeasure\nmeat\nmechanic\nmedal\nmedia\nmelody\nmelt\nmember\nmemory\nmention\nmenu\nmercy\nmerge\nmerit\nmerry\nmesh\nmessage\nmetal\nmethod\nmiddle\nmidnight\nmilk\nmillion\nmimic\nmind\nminimum\nminor\nminute\nmiracle\nmirror\nmisery\nmiss\nmistake\nmix\nmixed\nmixture\nmobile\nmodel\nmodify\nmom\nmoment\nmonitor\nmonkey\nmonster\nmonth\nmoon\nmoral\nmore\nmorning\nmosquito\nmother\nmotion\nmotor\nmountain\nmouse\nmove\nmovie\nmuch\nmuffin\nmule\nmultiply\nmuscle\nmuseum\nmushroom\nmusic\nmust\nmutual\nmyself\nmystery\nmyth\nnaive\nname\nnapkin\nnarrow\nnasty\nnation\nnature\nnear\nneck\nneed\nnegative\nneglect\nneither\nnephew\nnerve\nnest\nnet\nnetwork\nneutral\nnever\nnews\nnext\nnice\nnight\nnoble\nnoise\nnominee\nnoodle\nnormal\nnorth\nnose\nnotable\nnote\nnothing\nnotice\nnovel\nnow\nnuclear\nnumber\nnurse\nnut\noak\nobey\nobject\noblige\nobscure\nobserve\nobtain\nobvious\noccur\nocean\noctober\nodor\noff\noffer\noffice\noften\noil\nokay\nold\nolive\nolympic\nomit\nonce\none\nonion\nonline\nonly\nopen\nopera\nopinion\noppose\noption\norange\norbit\norchard\norder\nordinary\norgan\norient\noriginal\norphan\nostrich\nother\noutdoor\nouter\noutput\noutside\noval\noven\nover\nown\nowner\noxygen\noyster\nozone\npact\npaddle\npage\npair\npalace\npalm\npanda\npanel\npanic\npanther\npaper\nparade\nparent\npark\nparrot\nparty\npass\npatch\npath\npatient\npatrol\npattern\npause\npave\npayment\npeace\npeanut\npear\npeasant\npelican\npen\npenalty\npencil\npeople\npepper\nperfect\npermit\nperson\npet\nphone\nphoto\nphrase\nphysical\npiano\npicnic\npicture\npiece\npig\npigeon\npill\npilot\npink\npioneer\npipe\npistol\npitch\npizza\nplace\nplanet\nplastic\nplate\nplay\nplease\npledge\npluck\nplug\nplunge\npoem\npoet\npoint\npolar\npole\npolice\npond\npony\npool\npopular\nportion\nposition\npossible\npost\npotato\npottery\npoverty\npowder\npower\npractice\npraise\npredict\nprefer\nprepare\npresent\npretty\nprevent\nprice\npride\nprimary\nprint\npriority\nprison\nprivate\nprize\nproblem\nprocess\nproduce\nprofit\nprogram\nproject\npromote\nproof\nproperty\nprosper\nprotect\nproud\nprovide\npublic\npudding\npull\npulp\npulse\npumpkin\npunch\npupil\npuppy\npurchase\npurity\npurpose\npurse\npush\nput\npuzzle\npyramid\nquality\nquantum\nquarter\nquestion\nquick\nquit\nquiz\nquote\nrabbit\nraccoon\nrace\nrack\nradar\nradio\nrail\nrain\nraise\nrally\nramp\nranch\nrandom\nrange\nrapid\nrare\nrate\nrather\nraven\nraw\nrazor\nready\nreal\nreason\nrebel\nrebuild\nrecall\nreceive\nrecipe\nrecord\nrecycle\nreduce\nreflect\nreform\nrefuse\nregion\nregret\nregular\nreject\nrelax\nrelease\nrelief\nrely\nremain\nremember\nremind\nremove\nrender\nrenew\nrent\nreopen\nrepair\nrepeat\nreplace\nreport\nrequire\nrescue\nresemble\nresist\nresource\nresponse\nresult\nretire\nretreat\nreturn\nreunion\nreveal\nreview\nreward\nrhythm\nrib\nribbon\nrice\nrich\nride\nridge\nrifle\nright\nrigid\nring\nriot\nripple\nrisk\nritual\nrival\nriver\nroad\nroast\nrobot\nrobust\nrocket\nromance\nroof\nrookie\nroom\nrose\nrotate\nrough\nround\nroute\nroyal\nrubber\nrude\nrug\nrule\nrun\nrunway\nrural\nsad\nsaddle\nsadness\nsafe\nsail\nsalad\nsalmon\nsalon\nsalt\nsalute\nsame\nsample\nsand\nsatisfy\nsatoshi\nsauce\nsausage\nsave\nsay\nscale\nscan\nscare\nscatter\nscene\nscheme\nschool\nscience\nscissors\nscorpion\nscout\nscrap\nscreen\nscript\nscrub\nsea\nsearch\nseason\nseat\nsecond\nsecret\nsection\nsecurity\nseed\nseek\nsegment\nselect\nsell\nseminar\nsenior\nsense\nsentence\nseries\nservice\nsession\nsettle\nsetup\nseven\nshadow\nshaft\nshallow\nshare\nshed\nshell\nsheriff\nshield\nshift\nshine\nship\nshiver\nshock\nshoe\nshoot\nshop\nshort\nshoulder\nshove\nshrimp\nshrug\nshuffle\nshy\nsibling\nsick\nside\nsiege\nsight\nsign\nsilent\nsilk\nsilly\nsilver\nsimilar\nsimple\nsince\nsing\nsiren\nsister\nsituate\nsix\nsize\nskate\nsketch\nski\nskill\nskin\nskirt\nskull\nslab\nslam\nsleep\nslender\nslice\nslide\nslight\nslim\nslogan\nslot\nslow\nslush\nsmall\nsmart\nsmile\nsmoke\nsmooth\nsnack\nsnake\nsnap\nsniff\nsnow\nsoap\nsoccer\nsocial\nsock\nsoda\nsoft\nsolar\nsoldier\nsolid\nsolution\nsolve\nsomeone\nsong\nsoon\nsorry\nsort\nsoul\nsound\nsoup\nsource\nsouth\nspace\nspare\nspatial\nspawn\nspeak\nspecial\nspeed\nspell\nspend\nsphere\nspice\nspider\nspike\nspin\nspirit\nsplit\nspoil\nsponsor\nspoon\nsport\nspot\nspray\nspread\nspring\nspy\nsquare\nsqueeze\nsquirrel\nstable\nstadium\nstaff\nstage\nstairs\nstamp\nstand\nstart\nstate\nstay\nsteak\nsteel\nstem\nstep\nstereo\nstick\nstill\nsting\nstock\nstomach\nstone\nstool\nstory\nstove\nstrategy\nstreet\nstrike\nstrong\nstruggle\nstudent\nstuff\nstumble\nstyle\nsubject\nsubmit\nsubway\nsuccess\nsuch\nsudden\nsuffer\nsugar\nsuggest\nsuit\nsummer\nsun\nsunny\nsunset\nsuper\nsupply\nsupreme\nsure\nsurface\nsurge\nsurprise\nsurround\nsurvey\nsuspect\nsustain\nswallow\nswamp\nswap\nswarm\nswear\nsweet\nswift\nswim\nswing\nswitch\nsword\nsymbol\nsymptom\nsyrup\nsystem\ntable\ntackle\ntag\ntail\ntalent\ntalk\ntank\ntape\ntarget\ntask\ntaste\ntattoo\ntaxi\nteach\nteam\ntell\nten\ntenant\ntennis\ntent\nterm\ntest\ntext\nthank\nthat\ntheme\nthen\ntheory\nthere\nthey\nthing\nthis\nthought\nthree\nthrive\nthrow\nthumb\nthunder\nticket\ntide\ntiger\ntilt\ntimber\ntime\ntiny\ntip\ntired\ntissue\ntitle\ntoast\ntobacco\ntoday\ntoddler\ntoe\ntogether\ntoilet\ntoken\ntomato\ntomorrow\ntone\ntongue\ntonight\ntool\ntooth\ntop\ntopic\ntopple\ntorch\ntornado\ntortoise\ntoss\ntotal\ntourist\ntoward\ntower\ntown\ntoy\ntrack\ntrade\ntraffic\ntragic\ntrain\ntransfer\ntrap\ntrash\ntravel\ntray\ntreat\ntree\ntrend\ntrial\ntribe\ntrick\ntrigger\ntrim\ntrip\ntrophy\ntrouble\ntruck\ntrue\ntruly\ntrumpet\ntrust\ntruth\ntry\ntube\ntuition\ntumble\ntuna\ntunnel\nturkey\nturn\nturtle\ntwelve\ntwenty\ntwice\ntwin\ntwist\ntwo\ntype\ntypical\nugly\numbrella\nunable\nunaware\nuncle\nuncover\nunder\nundo\nunfair\nunfold\nunhappy\nuniform\nunique\nunit\nuniverse\nunknown\nunlock\nuntil\nunusual\nunveil\nupdate\nupgrade\nuphold\nupon\nupper\nupset\nurban\nurge\nusage\nuse\nused\nuseful\nuseless\nusual\nutility\nvacant\nvacuum\nvague\nvalid\nvalley\nvalve\nvan\nvanish\nvapor\nvarious\nvast\nvault\nvehicle\nvelvet\nvendor\nventure\nvenue\nverb\nverify\nversion\nvery\nvessel\nveteran\nviable\nvibrant\nvicious\nvictory\nvideo\nview\nvillage\nvintage\nviolin\nvirtual\nvirus\nvisa\nvisit\nvisual\nvital\nvivid\nvocal\nvoice\nvoid\nvolcano\nvolume\nvote\nvoyage\nwage\nwagon\nwait\nwalk\nwall\nwalnut\nwant\nwarfare\nwarm\nwarrior\nwash\nwasp\nwaste\nwater\nwave\nway\nwealth\nweapon\nwear\nweasel\nweather\nweb\nwedding\nweekend\nweird\nwelcome\nwest\nwet\nwhale\nwhat\nwheat\nwheel\nwhen\nwhere\nwhip\nwhisper\nwide\nwidth\nwife\nwild\nwill\nwin\nwindow\nwine\nwing\nwink\nwinner\nwinter\nwire\nwisdom\nwise\nwish\nwitness\nwolf\nwoman\nwonder\nwood\nwool\nword\nwork\nworld\nworry\nworth\nwrap\nwreck\nwrestle\nwrist\nwrite\nwrong\nyard\nyear\nyellow\nyou\nyoung\nyouth\nzebra\nzero\nzone\nzoo`.split('\\n');\n", "export function number(n: number) {\n  if (!Number.isSafeInteger(n) || n < 0) throw new Error(`Wrong positive integer: ${n}`);\n}\n\nexport function bool(b: boolean) {\n  if (typeof b !== 'boolean') throw new Error(`Expected boolean, not ${b}`);\n}\n\nexport function bytes(b: Uint8Array | undefined, ...lengths: number[]) {\n  if (!(b instanceof Uint8Array)) throw new TypeError('Expected Uint8Array');\n  if (lengths.length > 0 && !lengths.includes(b.length))\n    throw new TypeError(`Expected Uint8Array of length ${lengths}, not of length=${b.length}`);\n}\n\ntype Hash = {\n  (data: Uint8Array): Uint8Array;\n  blockLen: number;\n  outputLen: number;\n  create: any;\n};\nexport function hash(hash: Hash) {\n  if (typeof hash !== 'function' || typeof hash.create !== 'function')\n    throw new Error('Hash should be wrapped by utils.wrapConstructor');\n  number(hash.outputLen);\n  number(hash.blockLen);\n}\n\nexport function exists(instance: any, checkFinished = true) {\n  if (instance.destroyed) throw new Error('Hash instance has been destroyed');\n  if (checkFinished && instance.finished) throw new Error('Hash#digest() has already been called');\n}\nexport function output(out: any, instance: any) {\n  bytes(out);\n  const min = instance.outputLen;\n  if (out.length < min) {\n    throw new Error(`digestInto() expects output buffer of length at least ${min}`);\n  }\n}\n\nconst assert = {\n  number,\n  bool,\n  bytes,\n  hash,\n  exists,\n  output,\n};\n\nexport default assert;\n", "// Global symbol available in browsers only\ndeclare const self: Record<string, any> | undefined;\nexport const crypto: { node?: any; web?: any } = {\n  node: undefined,\n  web: typeof self === 'object' && 'crypto' in self ? self.crypto : undefined,\n};\n", "/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n\n// The import here is via the package name. This is to ensure\n// that exports mapping/resolution does fall into place.\nimport { crypto } from '@noble/hashes/crypto';\n\n// prettier-ignore\nexport type TypedArray = Int8Array | Uint8ClampedArray | Uint8Array |\n  Uint16Array | Int16Array | Uint32Array | Int32Array;\n\n// Cast array to different type\nexport const u8 = (arr: TypedArray) => new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\nexport const u32 = (arr: TypedArray) =>\n  new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\n\n// Cast array to view\nexport const createView = (arr: TypedArray) =>\n  new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n\n// The rotate right (circular right shift) operation for uint32\nexport const rotr = (word: number, shift: number) => (word << (32 - shift)) | (word >>> shift);\n\nexport const isLE = new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44;\n// There is almost no big endian hardware, but js typed arrays uses platform specific endianness.\n// So, just to be sure not to corrupt anything.\nif (!isLE) throw new Error('Non little-endian hardware is not supported');\n\nconst hexes = Array.from({ length: 256 }, (v, i) => i.toString(16).padStart(2, '0'));\n/**\n * @example bytesToHex(Uint8Array.from([0xde, 0xad, 0xbe, 0xef]))\n */\nexport function bytesToHex(uint8a: Uint8Array): string {\n  // pre-caching improves the speed 6x\n  if (!(uint8a instanceof Uint8Array)) throw new Error('Uint8Array expected');\n  let hex = '';\n  for (let i = 0; i < uint8a.length; i++) {\n    hex += hexes[uint8a[i]];\n  }\n  return hex;\n}\n\n/**\n * @example hexToBytes('deadbeef')\n */\nexport function hexToBytes(hex: string): Uint8Array {\n  if (typeof hex !== 'string') {\n    throw new TypeError('hexToBytes: expected string, got ' + typeof hex);\n  }\n  if (hex.length % 2) throw new Error('hexToBytes: received invalid unpadded hex');\n  const array = new Uint8Array(hex.length / 2);\n  for (let i = 0; i < array.length; i++) {\n    const j = i * 2;\n    const hexByte = hex.slice(j, j + 2);\n    const byte = Number.parseInt(hexByte, 16);\n    if (Number.isNaN(byte) || byte < 0) throw new Error('Invalid byte sequence');\n    array[i] = byte;\n  }\n  return array;\n}\n\n// There is no setImmediate in browser and setTimeout is slow. However, call to async function will return Promise\n// which will be fullfiled only on next scheduler queue processing step and this is exactly what we need.\nexport const nextTick = async () => {};\n\n// Returns control to thread each 'tick' ms to avoid blocking\nexport async function asyncLoop(iters: number, tick: number, cb: (i: number) => void) {\n  let ts = Date.now();\n  for (let i = 0; i < iters; i++) {\n    cb(i);\n    // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n    const diff = Date.now() - ts;\n    if (diff >= 0 && diff < tick) continue;\n    await nextTick();\n    ts += diff;\n  }\n}\n\n// Global symbols in both browsers and Node.js since v11\n// See https://github.com/microsoft/TypeScript/issues/31535\ndeclare const TextEncoder: any;\ndeclare const TextDecoder: any;\n\nexport function utf8ToBytes(str: string): Uint8Array {\n  if (typeof str !== 'string') {\n    throw new TypeError(`utf8ToBytes expected string, got ${typeof str}`);\n  }\n  return new TextEncoder().encode(str);\n}\n\nexport type Input = Uint8Array | string;\nexport function toBytes(data: Input): Uint8Array {\n  if (typeof data === 'string') data = utf8ToBytes(data);\n  if (!(data instanceof Uint8Array))\n    throw new TypeError(`Expected input type is Uint8Array (got ${typeof data})`);\n  return data;\n}\n\n/**\n * Concats Uint8Array-s into one; like `Buffer.concat([buf1, buf2])`\n * @example concatBytes(buf1, buf2)\n */\nexport function concatBytes(...arrays: Uint8Array[]): Uint8Array {\n  if (!arrays.every((a) => a instanceof Uint8Array)) throw new Error('Uint8Array list expected');\n  if (arrays.length === 1) return arrays[0];\n  const length = arrays.reduce((a, arr) => a + arr.length, 0);\n  const result = new Uint8Array(length);\n  for (let i = 0, pad = 0; i < arrays.length; i++) {\n    const arr = arrays[i];\n    result.set(arr, pad);\n    pad += arr.length;\n  }\n  return result;\n}\n\n// For runtime check if class implements interface\nexport abstract class Hash<T extends Hash<T>> {\n  abstract blockLen: number; // Bytes per block\n  abstract outputLen: number; // Bytes in output\n  abstract update(buf: Input): this;\n  // Writes digest into buf\n  abstract digestInto(buf: Uint8Array): void;\n  abstract digest(): Uint8Array;\n  // Cleanup internal state. Not '.clean' because instance is not usable after that.\n  // Clean usually resets instance to initial state, but it is not possible for keyed hashes if key is consumed into state.\n  // NOTE: if digest is not consumed by user, user need manually call '.destroy' if zeroing is required\n  abstract destroy(): void;\n  // Unsafe because doesn't check if \"to\" is correct. Can be used as clone() if no opts passed.\n  // Why cloneInto instead of clone? Mostly performance (same as _digestInto), but also has nice property: it reuses instance\n  // which means all internal buffers is overwritten, which also causes overwrite buffer which used for digest (in some cases).\n  // We don't provide any guarantees about cleanup (it is impossible to!), so should be enough for now.\n  abstract _cloneInto(to?: T): T;\n  // Safe version that clones internal state\n  clone(): T {\n    return this._cloneInto();\n  }\n}\n\n/**\n * XOF: streaming API to read digest in chunks.\n * Same as 'squeeze' in keccak/k12 and 'seek' in blake3, but more generic name.\n * When hash used in XOF mode it is up to user to call '.destroy' afterwards, since we cannot destroy state, next call can require more bytes.\n */\nexport type HashXOF<T extends Hash<T>> = Hash<T> & {\n  xof(bytes: number): Uint8Array; // Read 'bytes' bytes from digest stream\n  xofInto(buf: Uint8Array): Uint8Array; // read buf.length bytes from digest stream into buf\n};\n\n// Check if object doens't have custom constructor (like Uint8Array/Array)\nconst isPlainObject = (obj: any) =>\n  Object.prototype.toString.call(obj) === '[object Object]' && obj.constructor === Object;\n\ntype EmptyObj = {};\nexport function checkOpts<T1 extends EmptyObj, T2 extends EmptyObj>(\n  defaults: T1,\n  opts?: T2\n): T1 & T2 {\n  if (opts !== undefined && (typeof opts !== 'object' || !isPlainObject(opts)))\n    throw new TypeError('Options should be object or undefined');\n  const merged = Object.assign(defaults, opts);\n  return merged as T1 & T2;\n}\n\nexport type CHash = ReturnType<typeof wrapConstructor>;\n\nexport function wrapConstructor<T extends Hash<T>>(hashConstructor: () => Hash<T>) {\n  const hashC = (message: Input): Uint8Array => hashConstructor().update(toBytes(message)).digest();\n  const tmp = hashConstructor();\n  hashC.outputLen = tmp.outputLen;\n  hashC.blockLen = tmp.blockLen;\n  hashC.create = () => hashConstructor();\n  return hashC;\n}\n\nexport function wrapConstructorWithOpts<H extends Hash<H>, T extends Object>(\n  hashCons: (opts?: T) => Hash<H>\n) {\n  const hashC = (msg: Input, opts?: T): Uint8Array => hashCons(opts).update(toBytes(msg)).digest();\n  const tmp = hashCons({} as T);\n  hashC.outputLen = tmp.outputLen;\n  hashC.blockLen = tmp.blockLen;\n  hashC.create = (opts: T) => hashCons(opts);\n  return hashC;\n}\n\n/**\n * Secure PRNG\n */\nexport function randomBytes(bytesLength = 32): Uint8Array {\n  if (crypto.web) {\n    return crypto.web.getRandomValues(new Uint8Array(bytesLength));\n  } else if (crypto.node) {\n    return new Uint8Array(crypto.node.randomBytes(bytesLength).buffer);\n  } else {\n    throw new Error(\"The environment doesn't have randomBytes function\");\n  }\n}\n", "import assert from './_assert.js';\nimport { Hash, CHash, Input, toBytes } from './utils.js';\n// HMAC (RFC 2104)\nclass HMAC<T extends Hash<T>> extends Hash<HMAC<T>> {\n  oHash: T;\n  iHash: T;\n  blockLen: number;\n  outputLen: number;\n  private finished = false;\n  private destroyed = false;\n\n  constructor(hash: CHash, _key: Input) {\n    super();\n    assert.hash(hash);\n    const key = toBytes(_key);\n    this.iHash = hash.create() as T;\n    if (typeof this.iHash.update !== 'function')\n      throw new TypeError('Expected instance of class which extends utils.Hash');\n    this.blockLen = this.iHash.blockLen;\n    this.outputLen = this.iHash.outputLen;\n    const blockLen = this.blockLen;\n    const pad = new Uint8Array(blockLen);\n    // blockLen can be bigger than outputLen\n    pad.set(key.length > blockLen ? hash.create().update(key).digest() : key);\n    for (let i = 0; i < pad.length; i++) pad[i] ^= 0x36;\n    this.iHash.update(pad);\n    // By doing update (processing of first block) of outer hash here we can re-use it between multiple calls via clone\n    this.oHash = hash.create() as T;\n    // Undo internal XOR && apply outer XOR\n    for (let i = 0; i < pad.length; i++) pad[i] ^= 0x36 ^ 0x5c;\n    this.oHash.update(pad);\n    pad.fill(0);\n  }\n  update(buf: Input) {\n    assert.exists(this);\n    this.iHash.update(buf);\n    return this;\n  }\n  digestInto(out: Uint8Array) {\n    assert.exists(this);\n    assert.bytes(out, this.outputLen);\n    this.finished = true;\n    this.iHash.digestInto(out);\n    this.oHash.update(out);\n    this.oHash.digestInto(out);\n    this.destroy();\n  }\n  digest() {\n    const out = new Uint8Array(this.oHash.outputLen);\n    this.digestInto(out);\n    return out;\n  }\n  _cloneInto(to?: HMAC<T>): HMAC<T> {\n    // Create new instance without calling constructor since key already in state and we don't know it.\n    to ||= Object.create(Object.getPrototypeOf(this), {});\n    const { oHash, iHash, finished, destroyed, blockLen, outputLen } = this;\n    to = to as this;\n    to.finished = finished;\n    to.destroyed = destroyed;\n    to.blockLen = blockLen;\n    to.outputLen = outputLen;\n    to.oHash = oHash._cloneInto(to.oHash);\n    to.iHash = iHash._cloneInto(to.iHash);\n    return to;\n  }\n  destroy() {\n    this.destroyed = true;\n    this.oHash.destroy();\n    this.iHash.destroy();\n  }\n}\n\n/**\n * HMAC: RFC2104 message authentication code.\n * @param hash - function that would be used e.g. sha256\n * @param key - message key\n * @param message - message data\n */\nexport const hmac = (hash: CHash, key: Input, message: Input): Uint8Array =>\n  new HMAC<any>(hash, key).update(message).digest();\nhmac.create = (hash: CHash, key: Input) => new HMAC<any>(hash, key);\n", "import assert from './_assert.js';\nimport { hmac } from './hmac.js';\nimport { Hash, CHash, Input, createView, toBytes, checkOpts, asyncLoop } from './utils.js';\n\n// PBKDF (RFC 2898)\nexport type Pbkdf2Opt = {\n  c: number; // Iterations\n  dkLen?: number; // Desired key length in bytes (Intended output length in octets of the derived key\n  asyncTick?: number; // Maximum time in ms for which async function can block execution\n};\n// Common prologue and epilogue for sync/async functions\nfunction pbkdf2Init(hash: CHash, _password: Input, _salt: Input, _opts: Pbkdf2Opt) {\n  assert.hash(hash);\n  const opts = checkOpts({ dkLen: 32, asyncTick: 10 }, _opts);\n  const { c, dkLen, asyncTick } = opts;\n  assert.number(c);\n  assert.number(dkLen);\n  assert.number(asyncTick);\n  if (c < 1) throw new Error('PBKDF2: iterations (c) should be >= 1');\n  const password = toBytes(_password);\n  const salt = toBytes(_salt);\n  // DK = PBKDF2(PRF, Password, Salt, c, dkLen);\n  const DK = new Uint8Array(dkLen);\n  // U1 = PRF(Password, Salt + INT_32_BE(i))\n  const PRF = hmac.create(hash, password);\n  const PRFSalt = PRF._cloneInto().update(salt);\n  return { c, dkLen, asyncTick, DK, PRF, PRFSalt };\n}\n\nfunction pbkdf2Output<T extends Hash<T>>(\n  PRF: Hash<T>,\n  PRFSalt: Hash<T>,\n  DK: Uint8Array,\n  prfW: Hash<T>,\n  u: Uint8Array\n) {\n  PRF.destroy();\n  PRFSalt.destroy();\n  if (prfW) prfW.destroy();\n  u.fill(0);\n  return DK;\n}\n\n/**\n * PBKDF2-HMAC: RFC 2898 key derivation function\n * @param hash - hash function that would be used e.g. sha256\n * @param password - password from which a derived key is generated\n * @param salt - cryptographic salt\n * @param opts - {c, dkLen} where c is work factor and dkLen is output message size\n */\nexport function pbkdf2(hash: CHash, password: Input, salt: Input, opts: Pbkdf2Opt) {\n  const { c, dkLen, DK, PRF, PRFSalt } = pbkdf2Init(hash, password, salt, opts);\n  let prfW: any; // Working copy\n  const arr = new Uint8Array(4);\n  const view = createView(arr);\n  const u = new Uint8Array(PRF.outputLen);\n  // DK = T1 + T2 + \u22EF + Tdklen/hlen\n  for (let ti = 1, pos = 0; pos < dkLen; ti++, pos += PRF.outputLen) {\n    // Ti = F(Password, Salt, c, i)\n    const Ti = DK.subarray(pos, pos + PRF.outputLen);\n    view.setInt32(0, ti, false);\n    // F(Password, Salt, c, i) = U1 ^ U2 ^ \u22EF ^ Uc\n    // U1 = PRF(Password, Salt + INT_32_BE(i))\n    (prfW = PRFSalt._cloneInto(prfW)).update(arr).digestInto(u);\n    Ti.set(u.subarray(0, Ti.length));\n    for (let ui = 1; ui < c; ui++) {\n      // Uc = PRF(Password, Uc\u22121)\n      PRF._cloneInto(prfW).update(u).digestInto(u);\n      for (let i = 0; i < Ti.length; i++) Ti[i] ^= u[i];\n    }\n  }\n  return pbkdf2Output(PRF, PRFSalt, DK, prfW, u);\n}\n\nexport async function pbkdf2Async(hash: CHash, password: Input, salt: Input, opts: Pbkdf2Opt) {\n  const { c, dkLen, asyncTick, DK, PRF, PRFSalt } = pbkdf2Init(hash, password, salt, opts);\n  let prfW: any; // Working copy\n  const arr = new Uint8Array(4);\n  const view = createView(arr);\n  const u = new Uint8Array(PRF.outputLen);\n  // DK = T1 + T2 + \u22EF + Tdklen/hlen\n  for (let ti = 1, pos = 0; pos < dkLen; ti++, pos += PRF.outputLen) {\n    // Ti = F(Password, Salt, c, i)\n    const Ti = DK.subarray(pos, pos + PRF.outputLen);\n    view.setInt32(0, ti, false);\n    // F(Password, Salt, c, i) = U1 ^ U2 ^ \u22EF ^ Uc\n    // U1 = PRF(Password, Salt + INT_32_BE(i))\n    (prfW = PRFSalt._cloneInto(prfW)).update(arr).digestInto(u);\n    Ti.set(u.subarray(0, Ti.length));\n    await asyncLoop(c - 1, asyncTick, (i) => {\n      // Uc = PRF(Password, Uc\u22121)\n      PRF._cloneInto(prfW).update(u).digestInto(u);\n      for (let i = 0; i < Ti.length; i++) Ti[i] ^= u[i];\n    });\n  }\n  return pbkdf2Output(PRF, PRFSalt, DK, prfW, u);\n}\n", "import assert from './_assert.js';\nimport { Hash, createView, Input, toBytes } from './utils.js';\n\n// Polyfill for Safari 14\nfunction setBigUint64(view: DataView, byteOffset: number, value: bigint, isLE: boolean): void {\n  if (typeof view.setBigUint64 === 'function') return view.setBigUint64(byteOffset, value, isLE);\n  const _32n = BigInt(32);\n  const _u32_max = BigInt(0xffffffff);\n  const wh = Number((value >> _32n) & _u32_max);\n  const wl = Number(value & _u32_max);\n  const h = isLE ? 4 : 0;\n  const l = isLE ? 0 : 4;\n  view.setUint32(byteOffset + h, wh, isLE);\n  view.setUint32(byteOffset + l, wl, isLE);\n}\n\n// Base SHA2 class (RFC 6234)\nexport abstract class SHA2<T extends SHA2<T>> extends Hash<T> {\n  protected abstract process(buf: DataView, offset: number): void;\n  protected abstract get(): number[];\n  protected abstract set(...args: number[]): void;\n  abstract destroy(): void;\n  protected abstract roundClean(): void;\n  // For partial updates less than block size\n  protected buffer: Uint8Array;\n  protected view: DataView;\n  protected finished = false;\n  protected length = 0;\n  protected pos = 0;\n  protected destroyed = false;\n\n  constructor(\n    readonly blockLen: number,\n    public outputLen: number,\n    readonly padOffset: number,\n    readonly isLE: boolean\n  ) {\n    super();\n    this.buffer = new Uint8Array(blockLen);\n    this.view = createView(this.buffer);\n  }\n  update(data: Input): this {\n    assert.exists(this);\n    const { view, buffer, blockLen } = this;\n    data = toBytes(data);\n    const len = data.length;\n    for (let pos = 0; pos < len; ) {\n      const take = Math.min(blockLen - this.pos, len - pos);\n      // Fast path: we have at least one block in input, cast it to view and process\n      if (take === blockLen) {\n        const dataView = createView(data);\n        for (; blockLen <= len - pos; pos += blockLen) this.process(dataView, pos);\n        continue;\n      }\n      buffer.set(data.subarray(pos, pos + take), this.pos);\n      this.pos += take;\n      pos += take;\n      if (this.pos === blockLen) {\n        this.process(view, 0);\n        this.pos = 0;\n      }\n    }\n    this.length += data.length;\n    this.roundClean();\n    return this;\n  }\n  digestInto(out: Uint8Array) {\n    assert.exists(this);\n    assert.output(out, this);\n    this.finished = true;\n    // Padding\n    // We can avoid allocation of buffer for padding completely if it\n    // was previously not allocated here. But it won't change performance.\n    const { buffer, view, blockLen, isLE } = this;\n    let { pos } = this;\n    // append the bit '1' to the message\n    buffer[pos++] = 0b10000000;\n    this.buffer.subarray(pos).fill(0);\n    // we have less than padOffset left in buffer, so we cannot put length in current block, need process it and pad again\n    if (this.padOffset > blockLen - pos) {\n      this.process(view, 0);\n      pos = 0;\n    }\n    // Pad until full block byte with zeros\n    for (let i = pos; i < blockLen; i++) buffer[i] = 0;\n    // Note: sha512 requires length to be 128bit integer, but length in JS will overflow before that\n    // You need to write around 2 exabytes (u64_max / 8 / (1024**6)) for this to happen.\n    // So we just write lowest 64 bits of that value.\n    setBigUint64(view, blockLen - 8, BigInt(this.length * 8), isLE);\n    this.process(view, 0);\n    const oview = createView(out);\n    const len = this.outputLen;\n    // NOTE: we do division by 4 later, which should be fused in single op with modulo by JIT\n    if (len % 4) throw new Error('_sha2: outputLen should be aligned to 32bit');\n    const outLen = len / 4;\n    const state = this.get();\n    if (outLen > state.length) throw new Error('_sha2: outputLen bigger than state');\n    for (let i = 0; i < outLen; i++) oview.setUint32(4 * i, state[i], isLE);\n  }\n  digest() {\n    const { buffer, outputLen } = this;\n    this.digestInto(buffer);\n    const res = buffer.slice(0, outputLen);\n    this.destroy();\n    return res;\n  }\n  _cloneInto(to?: T): T {\n    to ||= new (this.constructor as any)() as T;\n    to.set(...this.get());\n    const { blockLen, buffer, length, finished, destroyed, pos } = this;\n    to.length = length;\n    to.pos = pos;\n    to.finished = finished;\n    to.destroyed = destroyed;\n    if (length % blockLen) to.buffer.set(buffer);\n    return to;\n  }\n}\n", "import { SHA2 } from './_sha2.js';\nimport { rotr, wrapConstructor } from './utils.js';\n\n// Choice: a ? b : c\nconst Chi = (a: number, b: number, c: number) => (a & b) ^ (~a & c);\n// Majority function, true if any two inpust is true\nconst Maj = (a: number, b: number, c: number) => (a & b) ^ (a & c) ^ (b & c);\n\n// Round constants:\n// first 32 bits of the fractional parts of the cube roots of the first 64 primes 2..311)\n// prettier-ignore\nconst SHA256_K = new Uint32Array([\n  0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n  0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n  0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n  0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n  0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n  0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n  0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n  0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n]);\n\n// Initial state (first 32 bits of the fractional parts of the square roots of the first 8 primes 2..19):\n// prettier-ignore\nconst IV = new Uint32Array([\n  0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19\n]);\n\n// Temporary buffer, not used to store anything between runs\n// Named this way because it matches specification.\nconst SHA256_W = new Uint32Array(64);\nclass SHA256 extends SHA2<SHA256> {\n  // We cannot use array here since array allows indexing by variable\n  // which means optimizer/compiler cannot use registers.\n  A = IV[0] | 0;\n  B = IV[1] | 0;\n  C = IV[2] | 0;\n  D = IV[3] | 0;\n  E = IV[4] | 0;\n  F = IV[5] | 0;\n  G = IV[6] | 0;\n  H = IV[7] | 0;\n\n  constructor() {\n    super(64, 32, 8, false);\n  }\n  protected get(): [number, number, number, number, number, number, number, number] {\n    const { A, B, C, D, E, F, G, H } = this;\n    return [A, B, C, D, E, F, G, H];\n  }\n  // prettier-ignore\n  protected set(\n    A: number, B: number, C: number, D: number, E: number, F: number, G: number, H: number\n  ) {\n    this.A = A | 0;\n    this.B = B | 0;\n    this.C = C | 0;\n    this.D = D | 0;\n    this.E = E | 0;\n    this.F = F | 0;\n    this.G = G | 0;\n    this.H = H | 0;\n  }\n  protected process(view: DataView, offset: number): void {\n    // Extend the first 16 words into the remaining 48 words w[16..63] of the message schedule array\n    for (let i = 0; i < 16; i++, offset += 4) SHA256_W[i] = view.getUint32(offset, false);\n    for (let i = 16; i < 64; i++) {\n      const W15 = SHA256_W[i - 15];\n      const W2 = SHA256_W[i - 2];\n      const s0 = rotr(W15, 7) ^ rotr(W15, 18) ^ (W15 >>> 3);\n      const s1 = rotr(W2, 17) ^ rotr(W2, 19) ^ (W2 >>> 10);\n      SHA256_W[i] = (s1 + SHA256_W[i - 7] + s0 + SHA256_W[i - 16]) | 0;\n    }\n    // Compression function main loop, 64 rounds\n    let { A, B, C, D, E, F, G, H } = this;\n    for (let i = 0; i < 64; i++) {\n      const sigma1 = rotr(E, 6) ^ rotr(E, 11) ^ rotr(E, 25);\n      const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n      const sigma0 = rotr(A, 2) ^ rotr(A, 13) ^ rotr(A, 22);\n      const T2 = (sigma0 + Maj(A, B, C)) | 0;\n      H = G;\n      G = F;\n      F = E;\n      E = (D + T1) | 0;\n      D = C;\n      C = B;\n      B = A;\n      A = (T1 + T2) | 0;\n    }\n    // Add the compressed chunk to the current hash value\n    A = (A + this.A) | 0;\n    B = (B + this.B) | 0;\n    C = (C + this.C) | 0;\n    D = (D + this.D) | 0;\n    E = (E + this.E) | 0;\n    F = (F + this.F) | 0;\n    G = (G + this.G) | 0;\n    H = (H + this.H) | 0;\n    this.set(A, B, C, D, E, F, G, H);\n  }\n  protected roundClean() {\n    SHA256_W.fill(0);\n  }\n  destroy() {\n    this.set(0, 0, 0, 0, 0, 0, 0, 0);\n    this.buffer.fill(0);\n  }\n}\n// Constants from https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf\nclass SHA224 extends SHA256 {\n  A = 0xc1059ed8 | 0;\n  B = 0x367cd507 | 0;\n  C = 0x3070dd17 | 0;\n  D = 0xf70e5939 | 0;\n  E = 0xffc00b31 | 0;\n  F = 0x68581511 | 0;\n  G = 0x64f98fa7 | 0;\n  H = 0xbefa4fa4 | 0;\n  constructor() {\n    super();\n    this.outputLen = 28;\n  }\n}\n\n/**\n * SHA2-256 hash function\n * @param message - data that would be hashed\n */\nexport const sha256 = wrapConstructor(() => new SHA256());\nexport const sha224 = wrapConstructor(() => new SHA224());\n", "const U32_MASK64 = BigInt(2 ** 32 - 1);\nconst _32n = BigInt(32);\n\n// We are not using BigUint64Array, because they are extremely slow as per 2022\nexport function fromBig(n: bigint, le = false) {\n  if (le) return { h: Number(n & U32_MASK64), l: Number((n >> _32n) & U32_MASK64) };\n  return { h: Number((n >> _32n) & U32_MASK64) | 0, l: Number(n & U32_MASK64) | 0 };\n}\n\nexport function split(lst: bigint[], le = false) {\n  let Ah = new Uint32Array(lst.length);\n  let Al = new Uint32Array(lst.length);\n  for (let i = 0; i < lst.length; i++) {\n    const { h, l } = fromBig(lst[i], le);\n    [Ah[i], Al[i]] = [h, l];\n  }\n  return [Ah, Al];\n}\n\nexport const toBig = (h: number, l: number) => (BigInt(h >>> 0) << _32n) | BigInt(l >>> 0);\n// for Shift in [0, 32)\nconst shrSH = (h: number, l: number, s: number) => h >>> s;\nconst shrSL = (h: number, l: number, s: number) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in [1, 32)\nconst rotrSH = (h: number, l: number, s: number) => (h >>> s) | (l << (32 - s));\nconst rotrSL = (h: number, l: number, s: number) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotrBH = (h: number, l: number, s: number) => (h << (64 - s)) | (l >>> (s - 32));\nconst rotrBL = (h: number, l: number, s: number) => (h >>> (s - 32)) | (l << (64 - s));\n// Right rotate for shift===32 (just swaps l&h)\nconst rotr32H = (h: number, l: number) => l;\nconst rotr32L = (h: number, l: number) => h;\n// Left rotate for Shift in [1, 32)\nconst rotlSH = (h: number, l: number, s: number) => (h << s) | (l >>> (32 - s));\nconst rotlSL = (h: number, l: number, s: number) => (l << s) | (h >>> (32 - s));\n// Left rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotlBH = (h: number, l: number, s: number) => (l << (s - 32)) | (h >>> (64 - s));\nconst rotlBL = (h: number, l: number, s: number) => (h << (s - 32)) | (l >>> (64 - s));\n\n// JS uses 32-bit signed integers for bitwise operations which means we cannot\n// simple take carry out of low bit sum by shift, we need to use division.\n// Removing \"export\" has 5% perf penalty -_-\nexport function add(Ah: number, Al: number, Bh: number, Bl: number) {\n  const l = (Al >>> 0) + (Bl >>> 0);\n  return { h: (Ah + Bh + ((l / 2 ** 32) | 0)) | 0, l: l | 0 };\n}\n// Addition with more than 2 elements\nconst add3L = (Al: number, Bl: number, Cl: number) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0);\nconst add3H = (low: number, Ah: number, Bh: number, Ch: number) =>\n  (Ah + Bh + Ch + ((low / 2 ** 32) | 0)) | 0;\nconst add4L = (Al: number, Bl: number, Cl: number, Dl: number) =>\n  (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0);\nconst add4H = (low: number, Ah: number, Bh: number, Ch: number, Dh: number) =>\n  (Ah + Bh + Ch + Dh + ((low / 2 ** 32) | 0)) | 0;\nconst add5L = (Al: number, Bl: number, Cl: number, Dl: number, El: number) =>\n  (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0) + (El >>> 0);\nconst add5H = (low: number, Ah: number, Bh: number, Ch: number, Dh: number, Eh: number) =>\n  (Ah + Bh + Ch + Dh + Eh + ((low / 2 ** 32) | 0)) | 0;\n\n// prettier-ignore\nconst u64 = {\n  fromBig, split, toBig,\n  shrSH, shrSL,\n  rotrSH, rotrSL, rotrBH, rotrBL,\n  rotr32H, rotr32L,\n  rotlSH, rotlSL, rotlBH, rotlBL,\n  add, add3L, add3H, add4L, add4H, add5H, add5L,\n};\nexport default u64;\n", "import { SHA2 } from './_sha2.js';\nimport u64 from './_u64.js';\nimport { wrapConstructor } from './utils.js';\n\n// Round contants (first 32 bits of the fractional parts of the cube roots of the first 80 primes 2..409):\n// prettier-ignore\nconst [SHA512_Kh, SHA512_Kl] = u64.split([\n  '0x428a2f98d728ae22', '0x7137449123ef65cd', '0xb5c0fbcfec4d3b2f', '0xe9b5dba58189dbbc',\n  '0x3956c25bf348b538', '0x59f111f1b605d019', '0x923f82a4af194f9b', '0xab1c5ed5da6d8118',\n  '0xd807aa98a3030242', '0x12835b0145706fbe', '0x243185be4ee4b28c', '0x550c7dc3d5ffb4e2',\n  '0x72be5d74f27b896f', '0x80deb1fe3b1696b1', '0x9bdc06a725c71235', '0xc19bf174cf692694',\n  '0xe49b69c19ef14ad2', '0xefbe4786384f25e3', '0x0fc19dc68b8cd5b5', '0x240ca1cc77ac9c65',\n  '0x2de92c6f592b0275', '0x4a7484aa6ea6e483', '0x5cb0a9dcbd41fbd4', '0x76f988da831153b5',\n  '0x983e5152ee66dfab', '0xa831c66d2db43210', '0xb00327c898fb213f', '0xbf597fc7beef0ee4',\n  '0xc6e00bf33da88fc2', '0xd5a79147930aa725', '0x06ca6351e003826f', '0x142929670a0e6e70',\n  '0x27b70a8546d22ffc', '0x2e1b21385c26c926', '0x4d2c6dfc5ac42aed', '0x53380d139d95b3df',\n  '0x650a73548baf63de', '0x766a0abb3c77b2a8', '0x81c2c92e47edaee6', '0x92722c851482353b',\n  '0xa2bfe8a14cf10364', '0xa81a664bbc423001', '0xc24b8b70d0f89791', '0xc76c51a30654be30',\n  '0xd192e819d6ef5218', '0xd69906245565a910', '0xf40e35855771202a', '0x106aa07032bbd1b8',\n  '0x19a4c116b8d2d0c8', '0x1e376c085141ab53', '0x2748774cdf8eeb99', '0x34b0bcb5e19b48a8',\n  '0x391c0cb3c5c95a63', '0x4ed8aa4ae3418acb', '0x5b9cca4f7763e373', '0x682e6ff3d6b2b8a3',\n  '0x748f82ee5defb2fc', '0x78a5636f43172f60', '0x84c87814a1f0ab72', '0x8cc702081a6439ec',\n  '0x90befffa23631e28', '0xa4506cebde82bde9', '0xbef9a3f7b2c67915', '0xc67178f2e372532b',\n  '0xca273eceea26619c', '0xd186b8c721c0c207', '0xeada7dd6cde0eb1e', '0xf57d4f7fee6ed178',\n  '0x06f067aa72176fba', '0x0a637dc5a2c898a6', '0x113f9804bef90dae', '0x1b710b35131c471b',\n  '0x28db77f523047d84', '0x32caab7b40c72493', '0x3c9ebe0a15c9bebc', '0x431d67c49c100d4c',\n  '0x4cc5d4becb3e42b6', '0x597f299cfc657e2a', '0x5fcb6fab3ad6faec', '0x6c44198c4a475817'\n].map(n => BigInt(n)));\n\n// Temporary buffer, not used to store anything between runs\nconst SHA512_W_H = new Uint32Array(80);\nconst SHA512_W_L = new Uint32Array(80);\n\nexport class SHA512 extends SHA2<SHA512> {\n  // We cannot use array here since array allows indexing by variable which means optimizer/compiler cannot use registers.\n  // Also looks cleaner and easier to verify with spec.\n  // Initial state (first 32 bits of the fractional parts of the square roots of the first 8 primes 2..19):\n  // h -- high 32 bits, l -- low 32 bits\n  Ah = 0x6a09e667 | 0;\n  Al = 0xf3bcc908 | 0;\n  Bh = 0xbb67ae85 | 0;\n  Bl = 0x84caa73b | 0;\n  Ch = 0x3c6ef372 | 0;\n  Cl = 0xfe94f82b | 0;\n  Dh = 0xa54ff53a | 0;\n  Dl = 0x5f1d36f1 | 0;\n  Eh = 0x510e527f | 0;\n  El = 0xade682d1 | 0;\n  Fh = 0x9b05688c | 0;\n  Fl = 0x2b3e6c1f | 0;\n  Gh = 0x1f83d9ab | 0;\n  Gl = 0xfb41bd6b | 0;\n  Hh = 0x5be0cd19 | 0;\n  Hl = 0x137e2179 | 0;\n\n  constructor() {\n    super(128, 64, 16, false);\n  }\n  // prettier-ignore\n  protected get(): [\n    number, number, number, number, number, number, number, number,\n    number, number, number, number, number, number, number, number\n  ] {\n    const { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n    return [Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl];\n  }\n  // prettier-ignore\n  protected set(\n    Ah: number, Al: number, Bh: number, Bl: number, Ch: number, Cl: number, Dh: number, Dl: number,\n    Eh: number, El: number, Fh: number, Fl: number, Gh: number, Gl: number, Hh: number, Hl: number\n  ) {\n    this.Ah = Ah | 0;\n    this.Al = Al | 0;\n    this.Bh = Bh | 0;\n    this.Bl = Bl | 0;\n    this.Ch = Ch | 0;\n    this.Cl = Cl | 0;\n    this.Dh = Dh | 0;\n    this.Dl = Dl | 0;\n    this.Eh = Eh | 0;\n    this.El = El | 0;\n    this.Fh = Fh | 0;\n    this.Fl = Fl | 0;\n    this.Gh = Gh | 0;\n    this.Gl = Gl | 0;\n    this.Hh = Hh | 0;\n    this.Hl = Hl | 0;\n  }\n  protected process(view: DataView, offset: number) {\n    // Extend the first 16 words into the remaining 64 words w[16..79] of the message schedule array\n    for (let i = 0; i < 16; i++, offset += 4) {\n      SHA512_W_H[i] = view.getUint32(offset);\n      SHA512_W_L[i] = view.getUint32((offset += 4));\n    }\n    for (let i = 16; i < 80; i++) {\n      // s0 := (w[i-15] rightrotate 1) xor (w[i-15] rightrotate 8) xor (w[i-15] rightshift 7)\n      const W15h = SHA512_W_H[i - 15] | 0;\n      const W15l = SHA512_W_L[i - 15] | 0;\n      const s0h = u64.rotrSH(W15h, W15l, 1) ^ u64.rotrSH(W15h, W15l, 8) ^ u64.shrSH(W15h, W15l, 7);\n      const s0l = u64.rotrSL(W15h, W15l, 1) ^ u64.rotrSL(W15h, W15l, 8) ^ u64.shrSL(W15h, W15l, 7);\n      // s1 := (w[i-2] rightrotate 19) xor (w[i-2] rightrotate 61) xor (w[i-2] rightshift 6)\n      const W2h = SHA512_W_H[i - 2] | 0;\n      const W2l = SHA512_W_L[i - 2] | 0;\n      const s1h = u64.rotrSH(W2h, W2l, 19) ^ u64.rotrBH(W2h, W2l, 61) ^ u64.shrSH(W2h, W2l, 6);\n      const s1l = u64.rotrSL(W2h, W2l, 19) ^ u64.rotrBL(W2h, W2l, 61) ^ u64.shrSL(W2h, W2l, 6);\n      // SHA256_W[i] = s0 + s1 + SHA256_W[i - 7] + SHA256_W[i - 16];\n      const SUMl = u64.add4L(s0l, s1l, SHA512_W_L[i - 7], SHA512_W_L[i - 16]);\n      const SUMh = u64.add4H(SUMl, s0h, s1h, SHA512_W_H[i - 7], SHA512_W_H[i - 16]);\n      SHA512_W_H[i] = SUMh | 0;\n      SHA512_W_L[i] = SUMl | 0;\n    }\n    let { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n    // Compression function main loop, 80 rounds\n    for (let i = 0; i < 80; i++) {\n      // S1 := (e rightrotate 14) xor (e rightrotate 18) xor (e rightrotate 41)\n      const sigma1h = u64.rotrSH(Eh, El, 14) ^ u64.rotrSH(Eh, El, 18) ^ u64.rotrBH(Eh, El, 41);\n      const sigma1l = u64.rotrSL(Eh, El, 14) ^ u64.rotrSL(Eh, El, 18) ^ u64.rotrBL(Eh, El, 41);\n      //const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n      const CHIh = (Eh & Fh) ^ (~Eh & Gh);\n      const CHIl = (El & Fl) ^ (~El & Gl);\n      // T1 = H + sigma1 + Chi(E, F, G) + SHA512_K[i] + SHA512_W[i]\n      // prettier-ignore\n      const T1ll = u64.add5L(Hl, sigma1l, CHIl, SHA512_Kl[i], SHA512_W_L[i]);\n      const T1h = u64.add5H(T1ll, Hh, sigma1h, CHIh, SHA512_Kh[i], SHA512_W_H[i]);\n      const T1l = T1ll | 0;\n      // S0 := (a rightrotate 28) xor (a rightrotate 34) xor (a rightrotate 39)\n      const sigma0h = u64.rotrSH(Ah, Al, 28) ^ u64.rotrBH(Ah, Al, 34) ^ u64.rotrBH(Ah, Al, 39);\n      const sigma0l = u64.rotrSL(Ah, Al, 28) ^ u64.rotrBL(Ah, Al, 34) ^ u64.rotrBL(Ah, Al, 39);\n      const MAJh = (Ah & Bh) ^ (Ah & Ch) ^ (Bh & Ch);\n      const MAJl = (Al & Bl) ^ (Al & Cl) ^ (Bl & Cl);\n      Hh = Gh | 0;\n      Hl = Gl | 0;\n      Gh = Fh | 0;\n      Gl = Fl | 0;\n      Fh = Eh | 0;\n      Fl = El | 0;\n      ({ h: Eh, l: El } = u64.add(Dh | 0, Dl | 0, T1h | 0, T1l | 0));\n      Dh = Ch | 0;\n      Dl = Cl | 0;\n      Ch = Bh | 0;\n      Cl = Bl | 0;\n      Bh = Ah | 0;\n      Bl = Al | 0;\n      const All = u64.add3L(T1l, sigma0l, MAJl);\n      Ah = u64.add3H(All, T1h, sigma0h, MAJh);\n      Al = All | 0;\n    }\n    // Add the compressed chunk to the current hash value\n    ({ h: Ah, l: Al } = u64.add(this.Ah | 0, this.Al | 0, Ah | 0, Al | 0));\n    ({ h: Bh, l: Bl } = u64.add(this.Bh | 0, this.Bl | 0, Bh | 0, Bl | 0));\n    ({ h: Ch, l: Cl } = u64.add(this.Ch | 0, this.Cl | 0, Ch | 0, Cl | 0));\n    ({ h: Dh, l: Dl } = u64.add(this.Dh | 0, this.Dl | 0, Dh | 0, Dl | 0));\n    ({ h: Eh, l: El } = u64.add(this.Eh | 0, this.El | 0, Eh | 0, El | 0));\n    ({ h: Fh, l: Fl } = u64.add(this.Fh | 0, this.Fl | 0, Fh | 0, Fl | 0));\n    ({ h: Gh, l: Gl } = u64.add(this.Gh | 0, this.Gl | 0, Gh | 0, Gl | 0));\n    ({ h: Hh, l: Hl } = u64.add(this.Hh | 0, this.Hl | 0, Hh | 0, Hl | 0));\n    this.set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl);\n  }\n  protected roundClean() {\n    SHA512_W_H.fill(0);\n    SHA512_W_L.fill(0);\n  }\n  destroy() {\n    this.buffer.fill(0);\n    this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n  }\n}\n\nclass SHA512_224 extends SHA512 {\n  // h -- high 32 bits, l -- low 32 bits\n  Ah = 0x8c3d37c8 | 0;\n  Al = 0x19544da2 | 0;\n  Bh = 0x73e19966 | 0;\n  Bl = 0x89dcd4d6 | 0;\n  Ch = 0x1dfab7ae | 0;\n  Cl = 0x32ff9c82 | 0;\n  Dh = 0x679dd514 | 0;\n  Dl = 0x582f9fcf | 0;\n  Eh = 0x0f6d2b69 | 0;\n  El = 0x7bd44da8 | 0;\n  Fh = 0x77e36f73 | 0;\n  Fl = 0x04c48942 | 0;\n  Gh = 0x3f9d85a8 | 0;\n  Gl = 0x6a1d36c8 | 0;\n  Hh = 0x1112e6ad | 0;\n  Hl = 0x91d692a1 | 0;\n\n  constructor() {\n    super();\n    this.outputLen = 28;\n  }\n}\n\nclass SHA512_256 extends SHA512 {\n  // h -- high 32 bits, l -- low 32 bits\n  Ah = 0x22312194 | 0;\n  Al = 0xfc2bf72c | 0;\n  Bh = 0x9f555fa3 | 0;\n  Bl = 0xc84c64c2 | 0;\n  Ch = 0x2393b86b | 0;\n  Cl = 0x6f53b151 | 0;\n  Dh = 0x96387719 | 0;\n  Dl = 0x5940eabd | 0;\n  Eh = 0x96283ee2 | 0;\n  El = 0xa88effe3 | 0;\n  Fh = 0xbe5e1e25 | 0;\n  Fl = 0x53863992 | 0;\n  Gh = 0x2b0199fc | 0;\n  Gl = 0x2c85b8aa | 0;\n  Hh = 0x0eb72ddc | 0;\n  Hl = 0x81c52ca2 | 0;\n\n  constructor() {\n    super();\n    this.outputLen = 32;\n  }\n}\n\nclass SHA384 extends SHA512 {\n  // h -- high 32 bits, l -- low 32 bits\n  Ah = 0xcbbb9d5d | 0;\n  Al = 0xc1059ed8 | 0;\n  Bh = 0x629a292a | 0;\n  Bl = 0x367cd507 | 0;\n  Ch = 0x9159015a | 0;\n  Cl = 0x3070dd17 | 0;\n  Dh = 0x152fecd8 | 0;\n  Dl = 0xf70e5939 | 0;\n  Eh = 0x67332667 | 0;\n  El = 0xffc00b31 | 0;\n  Fh = 0x8eb44a87 | 0;\n  Fl = 0x68581511 | 0;\n  Gh = 0xdb0c2e0d | 0;\n  Gl = 0x64f98fa7 | 0;\n  Hh = 0x47b5481d | 0;\n  Hl = 0xbefa4fa4 | 0;\n\n  constructor() {\n    super();\n    this.outputLen = 48;\n  }\n}\n\nexport const sha512 = wrapConstructor(() => new SHA512());\nexport const sha512_224 = wrapConstructor(() => new SHA512_224());\nexport const sha512_256 = wrapConstructor(() => new SHA512_256());\nexport const sha384 = wrapConstructor(() => new SHA384());\n", "\"use strict\";\n/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.bytes = exports.stringToBytes = exports.str = exports.bytesToString = exports.hex = exports.utf8 = exports.bech32m = exports.bech32 = exports.base58check = exports.base58xmr = exports.base58xrp = exports.base58flickr = exports.base58 = exports.base64url = exports.base64 = exports.base32crockford = exports.base32hex = exports.base32 = exports.base16 = exports.utils = exports.assertNumber = void 0;\nfunction assertNumber(n) {\n    if (!Number.isSafeInteger(n))\n        throw new Error(`Wrong integer: ${n}`);\n}\nexports.assertNumber = assertNumber;\nfunction chain(...args) {\n    const wrap = (a, b) => (c) => a(b(c));\n    const encode = Array.from(args)\n        .reverse()\n        .reduce((acc, i) => (acc ? wrap(acc, i.encode) : i.encode), undefined);\n    const decode = args.reduce((acc, i) => (acc ? wrap(acc, i.decode) : i.decode), undefined);\n    return { encode, decode };\n}\nfunction alphabet(alphabet) {\n    return {\n        encode: (digits) => {\n            if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n                throw new Error('alphabet.encode input should be an array of numbers');\n            return digits.map((i) => {\n                assertNumber(i);\n                if (i < 0 || i >= alphabet.length)\n                    throw new Error(`Digit index outside alphabet: ${i} (alphabet: ${alphabet.length})`);\n                return alphabet[i];\n            });\n        },\n        decode: (input) => {\n            if (!Array.isArray(input) || (input.length && typeof input[0] !== 'string'))\n                throw new Error('alphabet.decode input should be array of strings');\n            return input.map((letter) => {\n                if (typeof letter !== 'string')\n                    throw new Error(`alphabet.decode: not string element=${letter}`);\n                const index = alphabet.indexOf(letter);\n                if (index === -1)\n                    throw new Error(`Unknown letter: \"${letter}\". Allowed: ${alphabet}`);\n                return index;\n            });\n        },\n    };\n}\nfunction join(separator = '') {\n    if (typeof separator !== 'string')\n        throw new Error('join separator should be string');\n    return {\n        encode: (from) => {\n            if (!Array.isArray(from) || (from.length && typeof from[0] !== 'string'))\n                throw new Error('join.encode input should be array of strings');\n            for (let i of from)\n                if (typeof i !== 'string')\n                    throw new Error(`join.encode: non-string input=${i}`);\n            return from.join(separator);\n        },\n        decode: (to) => {\n            if (typeof to !== 'string')\n                throw new Error('join.decode input should be string');\n            return to.split(separator);\n        },\n    };\n}\nfunction padding(bits, chr = '=') {\n    assertNumber(bits);\n    if (typeof chr !== 'string')\n        throw new Error('padding chr should be string');\n    return {\n        encode(data) {\n            if (!Array.isArray(data) || (data.length && typeof data[0] !== 'string'))\n                throw new Error('padding.encode input should be array of strings');\n            for (let i of data)\n                if (typeof i !== 'string')\n                    throw new Error(`padding.encode: non-string input=${i}`);\n            while ((data.length * bits) % 8)\n                data.push(chr);\n            return data;\n        },\n        decode(input) {\n            if (!Array.isArray(input) || (input.length && typeof input[0] !== 'string'))\n                throw new Error('padding.encode input should be array of strings');\n            for (let i of input)\n                if (typeof i !== 'string')\n                    throw new Error(`padding.decode: non-string input=${i}`);\n            let end = input.length;\n            if ((end * bits) % 8)\n                throw new Error('Invalid padding: string should have whole number of bytes');\n            for (; end > 0 && input[end - 1] === chr; end--) {\n                if (!(((end - 1) * bits) % 8))\n                    throw new Error('Invalid padding: string has too much padding');\n            }\n            return input.slice(0, end);\n        },\n    };\n}\nfunction normalize(fn) {\n    if (typeof fn !== 'function')\n        throw new Error('normalize fn should be function');\n    return { encode: (from) => from, decode: (to) => fn(to) };\n}\nfunction convertRadix(data, from, to) {\n    if (from < 2)\n        throw new Error(`convertRadix: wrong from=${from}, base cannot be less than 2`);\n    if (to < 2)\n        throw new Error(`convertRadix: wrong to=${to}, base cannot be less than 2`);\n    if (!Array.isArray(data))\n        throw new Error('convertRadix: data should be array');\n    if (!data.length)\n        return [];\n    let pos = 0;\n    const res = [];\n    const digits = Array.from(data);\n    digits.forEach((d) => {\n        assertNumber(d);\n        if (d < 0 || d >= from)\n            throw new Error(`Wrong integer: ${d}`);\n    });\n    while (true) {\n        let carry = 0;\n        let done = true;\n        for (let i = pos; i < digits.length; i++) {\n            const digit = digits[i];\n            const digitBase = from * carry + digit;\n            if (!Number.isSafeInteger(digitBase) ||\n                (from * carry) / from !== carry ||\n                digitBase - digit !== from * carry) {\n                throw new Error('convertRadix: carry overflow');\n            }\n            carry = digitBase % to;\n            digits[i] = Math.floor(digitBase / to);\n            if (!Number.isSafeInteger(digits[i]) || digits[i] * to + carry !== digitBase)\n                throw new Error('convertRadix: carry overflow');\n            if (!done)\n                continue;\n            else if (!digits[i])\n                pos = i;\n            else\n                done = false;\n        }\n        res.push(carry);\n        if (done)\n            break;\n    }\n    for (let i = 0; i < data.length - 1 && data[i] === 0; i++)\n        res.push(0);\n    return res.reverse();\n}\nconst gcd = (a, b) => (!b ? a : gcd(b, a % b));\nconst radix2carry = (from, to) => from + (to - gcd(from, to));\nfunction convertRadix2(data, from, to, padding) {\n    if (!Array.isArray(data))\n        throw new Error('convertRadix2: data should be array');\n    if (from <= 0 || from > 32)\n        throw new Error(`convertRadix2: wrong from=${from}`);\n    if (to <= 0 || to > 32)\n        throw new Error(`convertRadix2: wrong to=${to}`);\n    if (radix2carry(from, to) > 32) {\n        throw new Error(`convertRadix2: carry overflow from=${from} to=${to} carryBits=${radix2carry(from, to)}`);\n    }\n    let carry = 0;\n    let pos = 0;\n    const mask = 2 ** to - 1;\n    const res = [];\n    for (const n of data) {\n        assertNumber(n);\n        if (n >= 2 ** from)\n            throw new Error(`convertRadix2: invalid data word=${n} from=${from}`);\n        carry = (carry << from) | n;\n        if (pos + from > 32)\n            throw new Error(`convertRadix2: carry overflow pos=${pos} from=${from}`);\n        pos += from;\n        for (; pos >= to; pos -= to)\n            res.push(((carry >> (pos - to)) & mask) >>> 0);\n        carry &= 2 ** pos - 1;\n    }\n    carry = (carry << (to - pos)) & mask;\n    if (!padding && pos >= from)\n        throw new Error('Excess padding');\n    if (!padding && carry)\n        throw new Error(`Non-zero padding: ${carry}`);\n    if (padding && pos > 0)\n        res.push(carry >>> 0);\n    return res;\n}\nfunction radix(num) {\n    assertNumber(num);\n    return {\n        encode: (bytes) => {\n            if (!(bytes instanceof Uint8Array))\n                throw new Error('radix.encode input should be Uint8Array');\n            return convertRadix(Array.from(bytes), 2 ** 8, num);\n        },\n        decode: (digits) => {\n            if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n                throw new Error('radix.decode input should be array of strings');\n            return Uint8Array.from(convertRadix(digits, num, 2 ** 8));\n        },\n    };\n}\nfunction radix2(bits, revPadding = false) {\n    assertNumber(bits);\n    if (bits <= 0 || bits > 32)\n        throw new Error('radix2: bits should be in (0..32]');\n    if (radix2carry(8, bits) > 32 || radix2carry(bits, 8) > 32)\n        throw new Error('radix2: carry overflow');\n    return {\n        encode: (bytes) => {\n            if (!(bytes instanceof Uint8Array))\n                throw new Error('radix2.encode input should be Uint8Array');\n            return convertRadix2(Array.from(bytes), 8, bits, !revPadding);\n        },\n        decode: (digits) => {\n            if (!Array.isArray(digits) || (digits.length && typeof digits[0] !== 'number'))\n                throw new Error('radix2.decode input should be array of strings');\n            return Uint8Array.from(convertRadix2(digits, bits, 8, revPadding));\n        },\n    };\n}\nfunction unsafeWrapper(fn) {\n    if (typeof fn !== 'function')\n        throw new Error('unsafeWrapper fn should be function');\n    return function (...args) {\n        try {\n            return fn.apply(null, args);\n        }\n        catch (e) { }\n    };\n}\nfunction checksum(len, fn) {\n    assertNumber(len);\n    if (typeof fn !== 'function')\n        throw new Error('checksum fn should be function');\n    return {\n        encode(data) {\n            if (!(data instanceof Uint8Array))\n                throw new Error('checksum.encode: input should be Uint8Array');\n            const checksum = fn(data).slice(0, len);\n            const res = new Uint8Array(data.length + len);\n            res.set(data);\n            res.set(checksum, data.length);\n            return res;\n        },\n        decode(data) {\n            if (!(data instanceof Uint8Array))\n                throw new Error('checksum.decode: input should be Uint8Array');\n            const payload = data.slice(0, -len);\n            const newChecksum = fn(payload).slice(0, len);\n            const oldChecksum = data.slice(-len);\n            for (let i = 0; i < len; i++)\n                if (newChecksum[i] !== oldChecksum[i])\n                    throw new Error('Invalid checksum');\n            return payload;\n        },\n    };\n}\nexports.utils = { alphabet, chain, checksum, radix, radix2, join, padding };\nexports.base16 = chain(radix2(4), alphabet('0123456789ABCDEF'), join(''));\nexports.base32 = chain(radix2(5), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZ234567'), padding(5), join(''));\nexports.base32hex = chain(radix2(5), alphabet('0123456789ABCDEFGHIJKLMNOPQRSTUV'), padding(5), join(''));\nexports.base32crockford = chain(radix2(5), alphabet('0123456789ABCDEFGHJKMNPQRSTVWXYZ'), join(''), normalize((s) => s.toUpperCase().replace(/O/g, '0').replace(/[IL]/g, '1')));\nexports.base64 = chain(radix2(6), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'), padding(6), join(''));\nexports.base64url = chain(radix2(6), alphabet('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'), padding(6), join(''));\nconst genBase58 = (abc) => chain(radix(58), alphabet(abc), join(''));\nexports.base58 = genBase58('123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz');\nexports.base58flickr = genBase58('123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ');\nexports.base58xrp = genBase58('rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz');\nconst XMR_BLOCK_LEN = [0, 2, 3, 5, 6, 7, 9, 10, 11];\nexports.base58xmr = {\n    encode(data) {\n        let res = '';\n        for (let i = 0; i < data.length; i += 8) {\n            const block = data.subarray(i, i + 8);\n            res += exports.base58.encode(block).padStart(XMR_BLOCK_LEN[block.length], '1');\n        }\n        return res;\n    },\n    decode(str) {\n        let res = [];\n        for (let i = 0; i < str.length; i += 11) {\n            const slice = str.slice(i, i + 11);\n            const blockLen = XMR_BLOCK_LEN.indexOf(slice.length);\n            const block = exports.base58.decode(slice);\n            for (let j = 0; j < block.length - blockLen; j++) {\n                if (block[j] !== 0)\n                    throw new Error('base58xmr: wrong padding');\n            }\n            res = res.concat(Array.from(block.slice(block.length - blockLen)));\n        }\n        return Uint8Array.from(res);\n    },\n};\nconst base58check = (sha256) => chain(checksum(4, (data) => sha256(sha256(data))), exports.base58);\nexports.base58check = base58check;\nconst BECH_ALPHABET = chain(alphabet('qpzry9x8gf2tvdw0s3jn54khce6mua7l'), join(''));\nconst POLYMOD_GENERATORS = [0x3b6a57b2, 0x26508e6d, 0x1ea119fa, 0x3d4233dd, 0x2a1462b3];\nfunction bech32Polymod(pre) {\n    const b = pre >> 25;\n    let chk = (pre & 0x1ffffff) << 5;\n    for (let i = 0; i < POLYMOD_GENERATORS.length; i++) {\n        if (((b >> i) & 1) === 1)\n            chk ^= POLYMOD_GENERATORS[i];\n    }\n    return chk;\n}\nfunction bechChecksum(prefix, words, encodingConst = 1) {\n    const len = prefix.length;\n    let chk = 1;\n    for (let i = 0; i < len; i++) {\n        const c = prefix.charCodeAt(i);\n        if (c < 33 || c > 126)\n            throw new Error(`Invalid prefix (${prefix})`);\n        chk = bech32Polymod(chk) ^ (c >> 5);\n    }\n    chk = bech32Polymod(chk);\n    for (let i = 0; i < len; i++)\n        chk = bech32Polymod(chk) ^ (prefix.charCodeAt(i) & 0x1f);\n    for (let v of words)\n        chk = bech32Polymod(chk) ^ v;\n    for (let i = 0; i < 6; i++)\n        chk = bech32Polymod(chk);\n    chk ^= encodingConst;\n    return BECH_ALPHABET.encode(convertRadix2([chk % 2 ** 30], 30, 5, false));\n}\nfunction genBech32(encoding) {\n    const ENCODING_CONST = encoding === 'bech32' ? 1 : 0x2bc830a3;\n    const _words = radix2(5);\n    const fromWords = _words.decode;\n    const toWords = _words.encode;\n    const fromWordsUnsafe = unsafeWrapper(fromWords);\n    function encode(prefix, words, limit = 90) {\n        if (typeof prefix !== 'string')\n            throw new Error(`bech32.encode prefix should be string, not ${typeof prefix}`);\n        if (!Array.isArray(words) || (words.length && typeof words[0] !== 'number'))\n            throw new Error(`bech32.encode words should be array of numbers, not ${typeof words}`);\n        const actualLength = prefix.length + 7 + words.length;\n        if (limit !== false && actualLength > limit)\n            throw new TypeError(`Length ${actualLength} exceeds limit ${limit}`);\n        prefix = prefix.toLowerCase();\n        return `${prefix}1${BECH_ALPHABET.encode(words)}${bechChecksum(prefix, words, ENCODING_CONST)}`;\n    }\n    function decode(str, limit = 90) {\n        if (typeof str !== 'string')\n            throw new Error(`bech32.decode input should be string, not ${typeof str}`);\n        if (str.length < 8 || (limit !== false && str.length > limit))\n            throw new TypeError(`Wrong string length: ${str.length} (${str}). Expected (8..${limit})`);\n        const lowered = str.toLowerCase();\n        if (str !== lowered && str !== str.toUpperCase())\n            throw new Error(`String must be lowercase or uppercase`);\n        str = lowered;\n        const sepIndex = str.lastIndexOf('1');\n        if (sepIndex === 0 || sepIndex === -1)\n            throw new Error(`Letter \"1\" must be present between prefix and data only`);\n        const prefix = str.slice(0, sepIndex);\n        const _words = str.slice(sepIndex + 1);\n        if (_words.length < 6)\n            throw new Error('Data must be at least 6 characters long');\n        const words = BECH_ALPHABET.decode(_words).slice(0, -6);\n        const sum = bechChecksum(prefix, words, ENCODING_CONST);\n        if (!_words.endsWith(sum))\n            throw new Error(`Invalid checksum in ${str}: expected \"${sum}\"`);\n        return { prefix, words };\n    }\n    const decodeUnsafe = unsafeWrapper(decode);\n    function decodeToBytes(str) {\n        const { prefix, words } = decode(str, false);\n        return { prefix, words, bytes: fromWords(words) };\n    }\n    return { encode, decode, decodeToBytes, decodeUnsafe, fromWords, fromWordsUnsafe, toWords };\n}\nexports.bech32 = genBech32('bech32');\nexports.bech32m = genBech32('bech32m');\nexports.utf8 = {\n    encode: (data) => new TextDecoder().decode(data),\n    decode: (str) => new TextEncoder().encode(str),\n};\nexports.hex = chain(radix2(4), alphabet('0123456789abcdef'), join(''), normalize((s) => {\n    if (typeof s !== 'string' || s.length % 2)\n        throw new TypeError(`hex.decode: expected string, got ${typeof s} with length ${s.length}`);\n    return s.toLowerCase();\n}));\nconst CODERS = {\n    utf8: exports.utf8, hex: exports.hex, base16: exports.base16, base32: exports.base32, base64: exports.base64, base64url: exports.base64url, base58: exports.base58, base58xmr: exports.base58xmr\n};\nconst coderTypeError = `Invalid encoding type. Available types: ${Object.keys(CODERS).join(', ')}`;\nconst bytesToString = (type, bytes) => {\n    if (typeof type !== 'string' || !CODERS.hasOwnProperty(type))\n        throw new TypeError(coderTypeError);\n    if (!(bytes instanceof Uint8Array))\n        throw new TypeError('bytesToString() expects Uint8Array');\n    return CODERS[type].encode(bytes);\n};\nexports.bytesToString = bytesToString;\nexports.str = exports.bytesToString;\nconst stringToBytes = (type, str) => {\n    if (!CODERS.hasOwnProperty(type))\n        throw new TypeError(coderTypeError);\n    if (typeof str !== 'string')\n        throw new TypeError('stringToBytes() expects string');\n    return CODERS[type].decode(str);\n};\nexports.stringToBytes = stringToBytes;\nexports.bytes = exports.stringToBytes;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.mnemonicToSeedSync = exports.mnemonicToSeed = exports.validateMnemonic = exports.entropyToMnemonic = exports.mnemonicToEntropy = exports.generateMnemonic = void 0;\n/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */\nconst _assert_1 = require(\"@noble/hashes/_assert\");\nconst pbkdf2_1 = require(\"@noble/hashes/pbkdf2\");\nconst sha256_1 = require(\"@noble/hashes/sha256\");\nconst sha512_1 = require(\"@noble/hashes/sha512\");\nconst utils_1 = require(\"@noble/hashes/utils\");\nconst base_1 = require(\"@scure/base\");\n// Japanese wordlist\nconst isJapanese = (wordlist) => wordlist[0] === '\\u3042\\u3044\\u3053\\u304f\\u3057\\u3093';\n// Normalization replaces equivalent sequences of characters\n// so that any two texts that are equivalent will be reduced\n// to the same sequence of code points, called the normal form of the original text.\nfunction nfkd(str) {\n    if (typeof str !== 'string')\n        throw new TypeError(`Invalid mnemonic type: ${typeof str}`);\n    return str.normalize('NFKD');\n}\nfunction normalize(str) {\n    const norm = nfkd(str);\n    const words = norm.split(' ');\n    if (![12, 15, 18, 21, 24].includes(words.length))\n        throw new Error('Invalid mnemonic');\n    return { nfkd: norm, words };\n}\nfunction assertEntropy(entropy) {\n    _assert_1.default.bytes(entropy, 16, 20, 24, 28, 32);\n}\n/**\n * Generate x random words. Uses Cryptographically-Secure Random Number Generator.\n * @param wordlist imported wordlist for specific language\n * @param strength mnemonic strength 128-256 bits\n * @example\n * generateMnemonic(wordlist, 128)\n * // 'legal winner thank year wave sausage worth useful legal winner thank yellow'\n */\nfunction generateMnemonic(wordlist, strength = 128) {\n    _assert_1.default.number(strength);\n    if (strength % 32 !== 0 || strength > 256)\n        throw new TypeError('Invalid entropy');\n    return entropyToMnemonic((0, utils_1.randomBytes)(strength / 8), wordlist);\n}\nexports.generateMnemonic = generateMnemonic;\nconst calcChecksum = (entropy) => {\n    // Checksum is ent.length/4 bits long\n    const bitsLeft = 8 - entropy.length / 4;\n    // Zero rightmost \"bitsLeft\" bits in byte\n    // For example: bitsLeft=4 val=10111101 -> 10110000\n    return new Uint8Array([((0, sha256_1.sha256)(entropy)[0] >> bitsLeft) << bitsLeft]);\n};\nfunction getCoder(wordlist) {\n    if (!Array.isArray(wordlist) || wordlist.length !== 2048 || typeof wordlist[0] !== 'string')\n        throw new Error('Worlist: expected array of 2048 strings');\n    wordlist.forEach((i) => {\n        if (typeof i !== 'string')\n            throw new Error(`Wordlist: non-string element: ${i}`);\n    });\n    return base_1.utils.chain(base_1.utils.checksum(1, calcChecksum), base_1.utils.radix2(11, true), base_1.utils.alphabet(wordlist));\n}\n/**\n * Reversible: Converts mnemonic string to raw entropy in form of byte array.\n * @param mnemonic 12-24 words\n * @param wordlist imported wordlist for specific language\n * @example\n * const mnem = 'legal winner thank year wave sausage worth useful legal winner thank yellow';\n * mnemonicToEntropy(mnem, wordlist)\n * // Produces\n * new Uint8Array([\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f,\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f\n * ])\n */\nfunction mnemonicToEntropy(mnemonic, wordlist) {\n    const { words } = normalize(mnemonic);\n    const entropy = getCoder(wordlist).decode(words);\n    assertEntropy(entropy);\n    return entropy;\n}\nexports.mnemonicToEntropy = mnemonicToEntropy;\n/**\n * Reversible: Converts raw entropy in form of byte array to mnemonic string.\n * @param entropy byte array\n * @param wordlist imported wordlist for specific language\n * @returns 12-24 words\n * @example\n * const ent = new Uint8Array([\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f,\n *   0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f\n * ]);\n * entropyToMnemonic(ent, wordlist);\n * // 'legal winner thank year wave sausage worth useful legal winner thank yellow'\n */\nfunction entropyToMnemonic(entropy, wordlist) {\n    assertEntropy(entropy);\n    const words = getCoder(wordlist).encode(entropy);\n    return words.join(isJapanese(wordlist) ? '\\u3000' : ' ');\n}\nexports.entropyToMnemonic = entropyToMnemonic;\n/**\n * Validates mnemonic for being 12-24 words contained in `wordlist`.\n */\nfunction validateMnemonic(mnemonic, wordlist) {\n    try {\n        mnemonicToEntropy(mnemonic, wordlist);\n    }\n    catch (e) {\n        return false;\n    }\n    return true;\n}\nexports.validateMnemonic = validateMnemonic;\nconst salt = (passphrase) => nfkd(`mnemonic${passphrase}`);\n/**\n * Irreversible: Uses KDF to derive 64 bytes of key data from mnemonic + optional password.\n * @param mnemonic 12-24 words\n * @param passphrase string that will additionally protect the key\n * @returns 64 bytes of key data\n * @example\n * const mnem = 'legal winner thank year wave sausage worth useful legal winner thank yellow';\n * await mnemonicToSeed(mnem, 'password');\n * // new Uint8Array([...64 bytes])\n */\nfunction mnemonicToSeed(mnemonic, passphrase = '') {\n    return (0, pbkdf2_1.pbkdf2Async)(sha512_1.sha512, normalize(mnemonic).nfkd, salt(passphrase), { c: 2048, dkLen: 64 });\n}\nexports.mnemonicToSeed = mnemonicToSeed;\n/**\n * Irreversible: Uses KDF to derive 64 bytes of key data from mnemonic + optional password.\n * @param mnemonic 12-24 words\n * @param passphrase string that will additionally protect the key\n * @returns 64 bytes of key data\n * @example\n * const mnem = 'legal winner thank year wave sausage worth useful legal winner thank yellow';\n * mnemonicToSeedSync(mnem, 'password');\n * // new Uint8Array([...64 bytes])\n */\nfunction mnemonicToSeedSync(mnemonic, passphrase = '') {\n    return (0, pbkdf2_1.pbkdf2)(sha512_1.sha512, normalize(mnemonic).nfkd, salt(passphrase), { c: 2048, dkLen: 64 });\n}\nexports.mnemonicToSeedSync = mnemonicToSeedSync;\n", "export function number(n: number) {\n  if (!Number.isSafeInteger(n) || n < 0) throw new Error(`Wrong positive integer: ${n}`);\n}\n\nexport function bool(b: boolean) {\n  if (typeof b !== 'boolean') throw new Error(`Expected boolean, not ${b}`);\n}\n\nexport function bytes(b: Uint8Array | undefined, ...lengths: number[]) {\n  if (!(b instanceof Uint8Array)) throw new TypeError('Expected Uint8Array');\n  if (lengths.length > 0 && !lengths.includes(b.length))\n    throw new TypeError(`Expected Uint8Array of length ${lengths}, not of length=${b.length}`);\n}\n\ntype Hash = {\n  (data: Uint8Array): Uint8Array;\n  blockLen: number;\n  outputLen: number;\n  create: any;\n};\nexport function hash(hash: Hash) {\n  if (typeof hash !== 'function' || typeof hash.create !== 'function')\n    throw new Error('Hash should be wrapped by utils.wrapConstructor');\n  number(hash.outputLen);\n  number(hash.blockLen);\n}\n\nexport function exists(instance: any, checkFinished = true) {\n  if (instance.destroyed) throw new Error('Hash instance has been destroyed');\n  if (checkFinished && instance.finished) throw new Error('Hash#digest() has already been called');\n}\nexport function output(out: any, instance: any) {\n  bytes(out);\n  const min = instance.outputLen;\n  if (out.length < min) {\n    throw new Error(`digestInto() expects output buffer of length at least ${min}`);\n  }\n}\n\nconst assert = {\n  number,\n  bool,\n  bytes,\n  hash,\n  exists,\n  output,\n};\n\nexport default assert;\n", "// Global symbol available in browsers only\ndeclare const self: Record<string, any> | undefined;\nexport const crypto: { node?: any; web?: any } = {\n  node: undefined,\n  web: typeof self === 'object' && 'crypto' in self ? self.crypto : undefined,\n};\n", "/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n\n// The import here is via the package name. This is to ensure\n// that exports mapping/resolution does fall into place.\nimport { crypto } from '@noble/hashes/crypto';\n\n// prettier-ignore\nexport type TypedArray = Int8Array | Uint8ClampedArray | Uint8Array |\n  Uint16Array | Int16Array | Uint32Array | Int32Array;\n\n// Cast array to different type\nexport const u8 = (arr: TypedArray) => new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\nexport const u32 = (arr: TypedArray) =>\n  new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\n\n// Cast array to view\nexport const createView = (arr: TypedArray) =>\n  new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n\n// The rotate right (circular right shift) operation for uint32\nexport const rotr = (word: number, shift: number) => (word << (32 - shift)) | (word >>> shift);\n\nexport const isLE = new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44;\n// There is almost no big endian hardware, but js typed arrays uses platform specific endianness.\n// So, just to be sure not to corrupt anything.\nif (!isLE) throw new Error('Non little-endian hardware is not supported');\n\nconst hexes = Array.from({ length: 256 }, (v, i) => i.toString(16).padStart(2, '0'));\n/**\n * @example bytesToHex(Uint8Array.from([0xde, 0xad, 0xbe, 0xef]))\n */\nexport function bytesToHex(uint8a: Uint8Array): string {\n  // pre-caching improves the speed 6x\n  if (!(uint8a instanceof Uint8Array)) throw new Error('Uint8Array expected');\n  let hex = '';\n  for (let i = 0; i < uint8a.length; i++) {\n    hex += hexes[uint8a[i]];\n  }\n  return hex;\n}\n\n/**\n * @example hexToBytes('deadbeef')\n */\nexport function hexToBytes(hex: string): Uint8Array {\n  if (typeof hex !== 'string') {\n    throw new TypeError('hexToBytes: expected string, got ' + typeof hex);\n  }\n  if (hex.length % 2) throw new Error('hexToBytes: received invalid unpadded hex');\n  const array = new Uint8Array(hex.length / 2);\n  for (let i = 0; i < array.length; i++) {\n    const j = i * 2;\n    const hexByte = hex.slice(j, j + 2);\n    const byte = Number.parseInt(hexByte, 16);\n    if (Number.isNaN(byte) || byte < 0) throw new Error('Invalid byte sequence');\n    array[i] = byte;\n  }\n  return array;\n}\n\n// There is no setImmediate in browser and setTimeout is slow. However, call to async function will return Promise\n// which will be fullfiled only on next scheduler queue processing step and this is exactly what we need.\nexport const nextTick = async () => {};\n\n// Returns control to thread each 'tick' ms to avoid blocking\nexport async function asyncLoop(iters: number, tick: number, cb: (i: number) => void) {\n  let ts = Date.now();\n  for (let i = 0; i < iters; i++) {\n    cb(i);\n    // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n    const diff = Date.now() - ts;\n    if (diff >= 0 && diff < tick) continue;\n    await nextTick();\n    ts += diff;\n  }\n}\n\n// Global symbols in both browsers and Node.js since v11\n// See https://github.com/microsoft/TypeScript/issues/31535\ndeclare const TextEncoder: any;\ndeclare const TextDecoder: any;\n\nexport function utf8ToBytes(str: string): Uint8Array {\n  if (typeof str !== 'string') {\n    throw new TypeError(`utf8ToBytes expected string, got ${typeof str}`);\n  }\n  return new TextEncoder().encode(str);\n}\n\nexport type Input = Uint8Array | string;\nexport function toBytes(data: Input): Uint8Array {\n  if (typeof data === 'string') data = utf8ToBytes(data);\n  if (!(data instanceof Uint8Array))\n    throw new TypeError(`Expected input type is Uint8Array (got ${typeof data})`);\n  return data;\n}\n\n/**\n * Concats Uint8Array-s into one; like `Buffer.concat([buf1, buf2])`\n * @example concatBytes(buf1, buf2)\n */\nexport function concatBytes(...arrays: Uint8Array[]): Uint8Array {\n  if (!arrays.every((a) => a instanceof Uint8Array)) throw new Error('Uint8Array list expected');\n  if (arrays.length === 1) return arrays[0];\n  const length = arrays.reduce((a, arr) => a + arr.length, 0);\n  const result = new Uint8Array(length);\n  for (let i = 0, pad = 0; i < arrays.length; i++) {\n    const arr = arrays[i];\n    result.set(arr, pad);\n    pad += arr.length;\n  }\n  return result;\n}\n\n// For runtime check if class implements interface\nexport abstract class Hash<T extends Hash<T>> {\n  abstract blockLen: number; // Bytes per block\n  abstract outputLen: number; // Bytes in output\n  abstract update(buf: Input): this;\n  // Writes digest into buf\n  abstract digestInto(buf: Uint8Array): void;\n  abstract digest(): Uint8Array;\n  // Cleanup internal state. Not '.clean' because instance is not usable after that.\n  // Clean usually resets instance to initial state, but it is not possible for keyed hashes if key is consumed into state.\n  // NOTE: if digest is not consumed by user, user need manually call '.destroy' if zeroing is required\n  abstract destroy(): void;\n  // Unsafe because doesn't check if \"to\" is correct. Can be used as clone() if no opts passed.\n  // Why cloneInto instead of clone? Mostly performance (same as _digestInto), but also has nice property: it reuses instance\n  // which means all internal buffers is overwritten, which also causes overwrite buffer which used for digest (in some cases).\n  // We don't provide any guarantees about cleanup (it is impossible to!), so should be enough for now.\n  abstract _cloneInto(to?: T): T;\n  // Safe version that clones internal state\n  clone(): T {\n    return this._cloneInto();\n  }\n}\n\n/**\n * XOF: streaming API to read digest in chunks.\n * Same as 'squeeze' in keccak/k12 and 'seek' in blake3, but more generic name.\n * When hash used in XOF mode it is up to user to call '.destroy' afterwards, since we cannot destroy state, next call can require more bytes.\n */\nexport type HashXOF<T extends Hash<T>> = Hash<T> & {\n  xof(bytes: number): Uint8Array; // Read 'bytes' bytes from digest stream\n  xofInto(buf: Uint8Array): Uint8Array; // read buf.length bytes from digest stream into buf\n};\n\n// Check if object doens't have custom constructor (like Uint8Array/Array)\nconst isPlainObject = (obj: any) =>\n  Object.prototype.toString.call(obj) === '[object Object]' && obj.constructor === Object;\n\ntype EmptyObj = {};\nexport function checkOpts<T1 extends EmptyObj, T2 extends EmptyObj>(\n  defaults: T1,\n  opts?: T2\n): T1 & T2 {\n  if (opts !== undefined && (typeof opts !== 'object' || !isPlainObject(opts)))\n    throw new TypeError('Options should be object or undefined');\n  const merged = Object.assign(defaults, opts);\n  return merged as T1 & T2;\n}\n\nexport type CHash = ReturnType<typeof wrapConstructor>;\n\nexport function wrapConstructor<T extends Hash<T>>(hashConstructor: () => Hash<T>) {\n  const hashC = (message: Input): Uint8Array => hashConstructor().update(toBytes(message)).digest();\n  const tmp = hashConstructor();\n  hashC.outputLen = tmp.outputLen;\n  hashC.blockLen = tmp.blockLen;\n  hashC.create = () => hashConstructor();\n  return hashC;\n}\n\nexport function wrapConstructorWithOpts<H extends Hash<H>, T extends Object>(\n  hashCons: (opts?: T) => Hash<H>\n) {\n  const hashC = (msg: Input, opts?: T): Uint8Array => hashCons(opts).update(toBytes(msg)).digest();\n  const tmp = hashCons({} as T);\n  hashC.outputLen = tmp.outputLen;\n  hashC.blockLen = tmp.blockLen;\n  hashC.create = (opts: T) => hashCons(opts);\n  return hashC;\n}\n\n/**\n * Secure PRNG\n */\nexport function randomBytes(bytesLength = 32): Uint8Array {\n  if (crypto.web) {\n    return crypto.web.getRandomValues(new Uint8Array(bytesLength));\n  } else if (crypto.node) {\n    return new Uint8Array(crypto.node.randomBytes(bytesLength).buffer);\n  } else {\n    throw new Error(\"The environment doesn't have randomBytes function\");\n  }\n}\n", "import assert from './_assert.js';\nimport { Hash, CHash, Input, toBytes } from './utils.js';\n// HMAC (RFC 2104)\nclass HMAC<T extends Hash<T>> extends Hash<HMAC<T>> {\n  oHash: T;\n  iHash: T;\n  blockLen: number;\n  outputLen: number;\n  private finished = false;\n  private destroyed = false;\n\n  constructor(hash: CHash, _key: Input) {\n    super();\n    assert.hash(hash);\n    const key = toBytes(_key);\n    this.iHash = hash.create() as T;\n    if (typeof this.iHash.update !== 'function')\n      throw new TypeError('Expected instance of class which extends utils.Hash');\n    this.blockLen = this.iHash.blockLen;\n    this.outputLen = this.iHash.outputLen;\n    const blockLen = this.blockLen;\n    const pad = new Uint8Array(blockLen);\n    // blockLen can be bigger than outputLen\n    pad.set(key.length > blockLen ? hash.create().update(key).digest() : key);\n    for (let i = 0; i < pad.length; i++) pad[i] ^= 0x36;\n    this.iHash.update(pad);\n    // By doing update (processing of first block) of outer hash here we can re-use it between multiple calls via clone\n    this.oHash = hash.create() as T;\n    // Undo internal XOR && apply outer XOR\n    for (let i = 0; i < pad.length; i++) pad[i] ^= 0x36 ^ 0x5c;\n    this.oHash.update(pad);\n    pad.fill(0);\n  }\n  update(buf: Input) {\n    assert.exists(this);\n    this.iHash.update(buf);\n    return this;\n  }\n  digestInto(out: Uint8Array) {\n    assert.exists(this);\n    assert.bytes(out, this.outputLen);\n    this.finished = true;\n    this.iHash.digestInto(out);\n    this.oHash.update(out);\n    this.oHash.digestInto(out);\n    this.destroy();\n  }\n  digest() {\n    const out = new Uint8Array(this.oHash.outputLen);\n    this.digestInto(out);\n    return out;\n  }\n  _cloneInto(to?: HMAC<T>): HMAC<T> {\n    // Create new instance without calling constructor since key already in state and we don't know it.\n    to ||= Object.create(Object.getPrototypeOf(this), {});\n    const { oHash, iHash, finished, destroyed, blockLen, outputLen } = this;\n    to = to as this;\n    to.finished = finished;\n    to.destroyed = destroyed;\n    to.blockLen = blockLen;\n    to.outputLen = outputLen;\n    to.oHash = oHash._cloneInto(to.oHash);\n    to.iHash = iHash._cloneInto(to.iHash);\n    return to;\n  }\n  destroy() {\n    this.destroyed = true;\n    this.oHash.destroy();\n    this.iHash.destroy();\n  }\n}\n\n/**\n * HMAC: RFC2104 message authentication code.\n * @param hash - function that would be used e.g. sha256\n * @param key - message key\n * @param message - message data\n */\nexport const hmac = (hash: CHash, key: Input, message: Input): Uint8Array =>\n  new HMAC<any>(hash, key).update(message).digest();\nhmac.create = (hash: CHash, key: Input) => new HMAC<any>(hash, key);\n", "import assert from './_assert.js';\nimport { Hash, createView, Input, toBytes } from './utils.js';\n\n// Polyfill for Safari 14\nfunction setBigUint64(view: DataView, byteOffset: number, value: bigint, isLE: boolean): void {\n  if (typeof view.setBigUint64 === 'function') return view.setBigUint64(byteOffset, value, isLE);\n  const _32n = BigInt(32);\n  const _u32_max = BigInt(0xffffffff);\n  const wh = Number((value >> _32n) & _u32_max);\n  const wl = Number(value & _u32_max);\n  const h = isLE ? 4 : 0;\n  const l = isLE ? 0 : 4;\n  view.setUint32(byteOffset + h, wh, isLE);\n  view.setUint32(byteOffset + l, wl, isLE);\n}\n\n// Base SHA2 class (RFC 6234)\nexport abstract class SHA2<T extends SHA2<T>> extends Hash<T> {\n  protected abstract process(buf: DataView, offset: number): void;\n  protected abstract get(): number[];\n  protected abstract set(...args: number[]): void;\n  abstract destroy(): void;\n  protected abstract roundClean(): void;\n  // For partial updates less than block size\n  protected buffer: Uint8Array;\n  protected view: DataView;\n  protected finished = false;\n  protected length = 0;\n  protected pos = 0;\n  protected destroyed = false;\n\n  constructor(\n    readonly blockLen: number,\n    public outputLen: number,\n    readonly padOffset: number,\n    readonly isLE: boolean\n  ) {\n    super();\n    this.buffer = new Uint8Array(blockLen);\n    this.view = createView(this.buffer);\n  }\n  update(data: Input): this {\n    assert.exists(this);\n    const { view, buffer, blockLen } = this;\n    data = toBytes(data);\n    const len = data.length;\n    for (let pos = 0; pos < len; ) {\n      const take = Math.min(blockLen - this.pos, len - pos);\n      // Fast path: we have at least one block in input, cast it to view and process\n      if (take === blockLen) {\n        const dataView = createView(data);\n        for (; blockLen <= len - pos; pos += blockLen) this.process(dataView, pos);\n        continue;\n      }\n      buffer.set(data.subarray(pos, pos + take), this.pos);\n      this.pos += take;\n      pos += take;\n      if (this.pos === blockLen) {\n        this.process(view, 0);\n        this.pos = 0;\n      }\n    }\n    this.length += data.length;\n    this.roundClean();\n    return this;\n  }\n  digestInto(out: Uint8Array) {\n    assert.exists(this);\n    assert.output(out, this);\n    this.finished = true;\n    // Padding\n    // We can avoid allocation of buffer for padding completely if it\n    // was previously not allocated here. But it won't change performance.\n    const { buffer, view, blockLen, isLE } = this;\n    let { pos } = this;\n    // append the bit '1' to the message\n    buffer[pos++] = 0b10000000;\n    this.buffer.subarray(pos).fill(0);\n    // we have less than padOffset left in buffer, so we cannot put length in current block, need process it and pad again\n    if (this.padOffset > blockLen - pos) {\n      this.process(view, 0);\n      pos = 0;\n    }\n    // Pad until full block byte with zeros\n    for (let i = pos; i < blockLen; i++) buffer[i] = 0;\n    // Note: sha512 requires length to be 128bit integer, but length in JS will overflow before that\n    // You need to write around 2 exabytes (u64_max / 8 / (1024**6)) for this to happen.\n    // So we just write lowest 64 bits of that value.\n    setBigUint64(view, blockLen - 8, BigInt(this.length * 8), isLE);\n    this.process(view, 0);\n    const oview = createView(out);\n    const len = this.outputLen;\n    // NOTE: we do division by 4 later, which should be fused in single op with modulo by JIT\n    if (len % 4) throw new Error('_sha2: outputLen should be aligned to 32bit');\n    const outLen = len / 4;\n    const state = this.get();\n    if (outLen > state.length) throw new Error('_sha2: outputLen bigger than state');\n    for (let i = 0; i < outLen; i++) oview.setUint32(4 * i, state[i], isLE);\n  }\n  digest() {\n    const { buffer, outputLen } = this;\n    this.digestInto(buffer);\n    const res = buffer.slice(0, outputLen);\n    this.destroy();\n    return res;\n  }\n  _cloneInto(to?: T): T {\n    to ||= new (this.constructor as any)() as T;\n    to.set(...this.get());\n    const { blockLen, buffer, length, finished, destroyed, pos } = this;\n    to.length = length;\n    to.pos = pos;\n    to.finished = finished;\n    to.destroyed = destroyed;\n    if (length % blockLen) to.buffer.set(buffer);\n    return to;\n  }\n}\n", "import { SHA2 } from './_sha2.js';\nimport { wrapConstructor } from './utils.js';\n\n// https://homes.esat.kuleuven.be/~bosselae/ripemd160.html\n// https://homes.esat.kuleuven.be/~bosselae/ripemd160/pdf/AB-9601/AB-9601.pdf\nconst Rho = new Uint8Array([7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8]);\nconst Id = Uint8Array.from({ length: 16 }, (_, i) => i);\nconst Pi = Id.map((i) => (9 * i + 5) % 16);\nlet idxL = [Id];\nlet idxR = [Pi];\nfor (let i = 0; i < 4; i++) for (let j of [idxL, idxR]) j.push(j[i].map((k) => Rho[k]));\n\nconst shifts = [\n  [11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8],\n  [12, 13, 11, 15, 6, 9, 9, 7, 12, 15, 11, 13, 7, 8, 7, 7],\n  [13, 15, 14, 11, 7, 7, 6, 8, 13, 14, 13, 12, 5, 5, 6, 9],\n  [14, 11, 12, 14, 8, 6, 5, 5, 15, 12, 15, 14, 9, 9, 8, 6],\n  [15, 12, 13, 13, 9, 5, 8, 6, 14, 11, 12, 11, 8, 6, 5, 5],\n].map((i) => new Uint8Array(i));\n\nconst shiftsL = idxL.map((idx, i) => idx.map((j) => shifts[i][j]));\nconst shiftsR = idxR.map((idx, i) => idx.map((j) => shifts[i][j]));\n\nconst Kl = new Uint32Array([0x00000000, 0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xa953fd4e]);\nconst Kr = new Uint32Array([0x50a28be6, 0x5c4dd124, 0x6d703ef3, 0x7a6d76e9, 0x00000000]);\n// The rotate left (circular left shift) operation for uint32\nconst rotl = (word: number, shift: number) => (word << shift) | (word >>> (32 - shift));\n// It's called f() in spec.\nfunction f(group: number, x: number, y: number, z: number): number {\n  if (group === 0) return x ^ y ^ z;\n  else if (group === 1) return (x & y) | (~x & z);\n  else if (group === 2) return (x | ~y) ^ z;\n  else if (group === 3) return (x & z) | (y & ~z);\n  else return x ^ (y | ~z);\n}\n// Temporary buffer, not used to store anything between runs\nconst BUF = new Uint32Array(16);\nexport class RIPEMD160 extends SHA2<RIPEMD160> {\n  private h0 = 0x67452301 | 0;\n  private h1 = 0xefcdab89 | 0;\n  private h2 = 0x98badcfe | 0;\n  private h3 = 0x10325476 | 0;\n  private h4 = 0xc3d2e1f0 | 0;\n\n  constructor() {\n    super(64, 20, 8, true);\n  }\n  protected get(): [number, number, number, number, number] {\n    const { h0, h1, h2, h3, h4 } = this;\n    return [h0, h1, h2, h3, h4];\n  }\n  protected set(h0: number, h1: number, h2: number, h3: number, h4: number) {\n    this.h0 = h0 | 0;\n    this.h1 = h1 | 0;\n    this.h2 = h2 | 0;\n    this.h3 = h3 | 0;\n    this.h4 = h4 | 0;\n  }\n  protected process(view: DataView, offset: number): void {\n    for (let i = 0; i < 16; i++, offset += 4) BUF[i] = view.getUint32(offset, true);\n    // prettier-ignore\n    let al = this.h0 | 0, ar = al,\n        bl = this.h1 | 0, br = bl,\n        cl = this.h2 | 0, cr = cl,\n        dl = this.h3 | 0, dr = dl,\n        el = this.h4 | 0, er = el;\n\n    // Instead of iterating 0 to 80, we split it into 5 groups\n    // And use the groups in constants, functions, etc. Much simpler\n    for (let group = 0; group < 5; group++) {\n      const rGroup = 4 - group;\n      const hbl = Kl[group], hbr = Kr[group]; // prettier-ignore\n      const rl = idxL[group], rr = idxR[group]; // prettier-ignore\n      const sl = shiftsL[group], sr = shiftsR[group]; // prettier-ignore\n      for (let i = 0; i < 16; i++) {\n        const tl = (rotl(al + f(group, bl, cl, dl) + BUF[rl[i]] + hbl, sl[i]) + el) | 0;\n        al = el, el = dl, dl = rotl(cl, 10) | 0, cl = bl, bl = tl; // prettier-ignore\n      }\n      // 2 loops are 10% faster\n      for (let i = 0; i < 16; i++) {\n        const tr = (rotl(ar + f(rGroup, br, cr, dr) + BUF[rr[i]] + hbr, sr[i]) + er) | 0;\n        ar = er, er = dr, dr = rotl(cr, 10) | 0, cr = br, br = tr; // prettier-ignore\n      }\n    }\n    // Add the compressed chunk to the current hash value\n    this.set(\n      (this.h1 + cl + dr) | 0,\n      (this.h2 + dl + er) | 0,\n      (this.h3 + el + ar) | 0,\n      (this.h4 + al + br) | 0,\n      (this.h0 + bl + cr) | 0\n    );\n  }\n  protected roundClean() {\n    BUF.fill(0);\n  }\n  destroy() {\n    this.destroyed = true;\n    this.buffer.fill(0);\n    this.set(0, 0, 0, 0, 0);\n  }\n}\n\n/**\n * RIPEMD-160 - a hash function from 1990s.\n * @param message - msg that would be hashed\n */\nexport const ripemd160 = wrapConstructor(() => new RIPEMD160());\n", "import { SHA2 } from './_sha2.js';\nimport { rotr, wrapConstructor } from './utils.js';\n\n// Choice: a ? b : c\nconst Chi = (a: number, b: number, c: number) => (a & b) ^ (~a & c);\n// Majority function, true if any two inpust is true\nconst Maj = (a: number, b: number, c: number) => (a & b) ^ (a & c) ^ (b & c);\n\n// Round constants:\n// first 32 bits of the fractional parts of the cube roots of the first 64 primes 2..311)\n// prettier-ignore\nconst SHA256_K = new Uint32Array([\n  0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n  0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n  0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n  0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n  0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n  0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n  0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n  0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n]);\n\n// Initial state (first 32 bits of the fractional parts of the square roots of the first 8 primes 2..19):\n// prettier-ignore\nconst IV = new Uint32Array([\n  0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19\n]);\n\n// Temporary buffer, not used to store anything between runs\n// Named this way because it matches specification.\nconst SHA256_W = new Uint32Array(64);\nclass SHA256 extends SHA2<SHA256> {\n  // We cannot use array here since array allows indexing by variable\n  // which means optimizer/compiler cannot use registers.\n  A = IV[0] | 0;\n  B = IV[1] | 0;\n  C = IV[2] | 0;\n  D = IV[3] | 0;\n  E = IV[4] | 0;\n  F = IV[5] | 0;\n  G = IV[6] | 0;\n  H = IV[7] | 0;\n\n  constructor() {\n    super(64, 32, 8, false);\n  }\n  protected get(): [number, number, number, number, number, number, number, number] {\n    const { A, B, C, D, E, F, G, H } = this;\n    return [A, B, C, D, E, F, G, H];\n  }\n  // prettier-ignore\n  protected set(\n    A: number, B: number, C: number, D: number, E: number, F: number, G: number, H: number\n  ) {\n    this.A = A | 0;\n    this.B = B | 0;\n    this.C = C | 0;\n    this.D = D | 0;\n    this.E = E | 0;\n    this.F = F | 0;\n    this.G = G | 0;\n    this.H = H | 0;\n  }\n  protected process(view: DataView, offset: number): void {\n    // Extend the first 16 words into the remaining 48 words w[16..63] of the message schedule array\n    for (let i = 0; i < 16; i++, offset += 4) SHA256_W[i] = view.getUint32(offset, false);\n    for (let i = 16; i < 64; i++) {\n      const W15 = SHA256_W[i - 15];\n      const W2 = SHA256_W[i - 2];\n      const s0 = rotr(W15, 7) ^ rotr(W15, 18) ^ (W15 >>> 3);\n      const s1 = rotr(W2, 17) ^ rotr(W2, 19) ^ (W2 >>> 10);\n      SHA256_W[i] = (s1 + SHA256_W[i - 7] + s0 + SHA256_W[i - 16]) | 0;\n    }\n    // Compression function main loop, 64 rounds\n    let { A, B, C, D, E, F, G, H } = this;\n    for (let i = 0; i < 64; i++) {\n      const sigma1 = rotr(E, 6) ^ rotr(E, 11) ^ rotr(E, 25);\n      const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n      const sigma0 = rotr(A, 2) ^ rotr(A, 13) ^ rotr(A, 22);\n      const T2 = (sigma0 + Maj(A, B, C)) | 0;\n      H = G;\n      G = F;\n      F = E;\n      E = (D + T1) | 0;\n      D = C;\n      C = B;\n      B = A;\n      A = (T1 + T2) | 0;\n    }\n    // Add the compressed chunk to the current hash value\n    A = (A + this.A) | 0;\n    B = (B + this.B) | 0;\n    C = (C + this.C) | 0;\n    D = (D + this.D) | 0;\n    E = (E + this.E) | 0;\n    F = (F + this.F) | 0;\n    G = (G + this.G) | 0;\n    H = (H + this.H) | 0;\n    this.set(A, B, C, D, E, F, G, H);\n  }\n  protected roundClean() {\n    SHA256_W.fill(0);\n  }\n  destroy() {\n    this.set(0, 0, 0, 0, 0, 0, 0, 0);\n    this.buffer.fill(0);\n  }\n}\n// Constants from https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf\nclass SHA224 extends SHA256 {\n  A = 0xc1059ed8 | 0;\n  B = 0x367cd507 | 0;\n  C = 0x3070dd17 | 0;\n  D = 0xf70e5939 | 0;\n  E = 0xffc00b31 | 0;\n  F = 0x68581511 | 0;\n  G = 0x64f98fa7 | 0;\n  H = 0xbefa4fa4 | 0;\n  constructor() {\n    super();\n    this.outputLen = 28;\n  }\n}\n\n/**\n * SHA2-256 hash function\n * @param message - data that would be hashed\n */\nexport const sha256 = wrapConstructor(() => new SHA256());\nexport const sha224 = wrapConstructor(() => new SHA224());\n", "const U32_MASK64 = BigInt(2 ** 32 - 1);\nconst _32n = BigInt(32);\n\n// We are not using BigUint64Array, because they are extremely slow as per 2022\nexport function fromBig(n: bigint, le = false) {\n  if (le) return { h: Number(n & U32_MASK64), l: Number((n >> _32n) & U32_MASK64) };\n  return { h: Number((n >> _32n) & U32_MASK64) | 0, l: Number(n & U32_MASK64) | 0 };\n}\n\nexport function split(lst: bigint[], le = false) {\n  let Ah = new Uint32Array(lst.length);\n  let Al = new Uint32Array(lst.length);\n  for (let i = 0; i < lst.length; i++) {\n    const { h, l } = fromBig(lst[i], le);\n    [Ah[i], Al[i]] = [h, l];\n  }\n  return [Ah, Al];\n}\n\nexport const toBig = (h: number, l: number) => (BigInt(h >>> 0) << _32n) | BigInt(l >>> 0);\n// for Shift in [0, 32)\nconst shrSH = (h: number, l: number, s: number) => h >>> s;\nconst shrSL = (h: number, l: number, s: number) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in [1, 32)\nconst rotrSH = (h: number, l: number, s: number) => (h >>> s) | (l << (32 - s));\nconst rotrSL = (h: number, l: number, s: number) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotrBH = (h: number, l: number, s: number) => (h << (64 - s)) | (l >>> (s - 32));\nconst rotrBL = (h: number, l: number, s: number) => (h >>> (s - 32)) | (l << (64 - s));\n// Right rotate for shift===32 (just swaps l&h)\nconst rotr32H = (h: number, l: number) => l;\nconst rotr32L = (h: number, l: number) => h;\n// Left rotate for Shift in [1, 32)\nconst rotlSH = (h: number, l: number, s: number) => (h << s) | (l >>> (32 - s));\nconst rotlSL = (h: number, l: number, s: number) => (l << s) | (h >>> (32 - s));\n// Left rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotlBH = (h: number, l: number, s: number) => (l << (s - 32)) | (h >>> (64 - s));\nconst rotlBL = (h: number, l: number, s: number) => (h << (s - 32)) | (l >>> (64 - s));\n\n// JS uses 32-bit signed integers for bitwise operations which means we cannot\n// simple take carry out of low bit sum by shift, we need to use division.\n// Removing \"export\" has 5% perf penalty -_-\nexport function add(Ah: number, Al: number, Bh: number, Bl: number) {\n  const l = (Al >>> 0) + (Bl >>> 0);\n  return { h: (Ah + Bh + ((l / 2 ** 32) | 0)) | 0, l: l | 0 };\n}\n// Addition with more than 2 elements\nconst add3L = (Al: number, Bl: number, Cl: number) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0);\nconst add3H = (low: number, Ah: number, Bh: number, Ch: number) =>\n  (Ah + Bh + Ch + ((low / 2 ** 32) | 0)) | 0;\nconst add4L = (Al: number, Bl: number, Cl: number, Dl: number) =>\n  (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0);\nconst add4H = (low: number, Ah: number, Bh: number, Ch: number, Dh: number) =>\n  (Ah + Bh + Ch + Dh + ((low / 2 ** 32) | 0)) | 0;\nconst add5L = (Al: number, Bl: number, Cl: number, Dl: number, El: number) =>\n  (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0) + (El >>> 0);\nconst add5H = (low: number, Ah: number, Bh: number, Ch: number, Dh: number, Eh: number) =>\n  (Ah + Bh + Ch + Dh + Eh + ((low / 2 ** 32) | 0)) | 0;\n\n// prettier-ignore\nconst u64 = {\n  fromBig, split, toBig,\n  shrSH, shrSL,\n  rotrSH, rotrSL, rotrBH, rotrBL,\n  rotr32H, rotr32L,\n  rotlSH, rotlSL, rotlBH, rotlBL,\n  add, add3L, add3H, add4L, add4H, add5H, add5L,\n};\nexport default u64;\n", "import { SHA2 } from './_sha2.js';\nimport u64 from './_u64.js';\nimport { wrapConstructor } from './utils.js';\n\n// Round contants (first 32 bits of the fractional parts of the cube roots of the first 80 primes 2..409):\n// prettier-ignore\nconst [SHA512_Kh, SHA512_Kl] = u64.split([\n  '0x428a2f98d728ae22', '0x7137449123ef65cd', '0xb5c0fbcfec4d3b2f', '0xe9b5dba58189dbbc',\n  '0x3956c25bf348b538', '0x59f111f1b605d019', '0x923f82a4af194f9b', '0xab1c5ed5da6d8118',\n  '0xd807aa98a3030242', '0x12835b0145706fbe', '0x243185be4ee4b28c', '0x550c7dc3d5ffb4e2',\n  '0x72be5d74f27b896f', '0x80deb1fe3b1696b1', '0x9bdc06a725c71235', '0xc19bf174cf692694',\n  '0xe49b69c19ef14ad2', '0xefbe4786384f25e3', '0x0fc19dc68b8cd5b5', '0x240ca1cc77ac9c65',\n  '0x2de92c6f592b0275', '0x4a7484aa6ea6e483', '0x5cb0a9dcbd41fbd4', '0x76f988da831153b5',\n  '0x983e5152ee66dfab', '0xa831c66d2db43210', '0xb00327c898fb213f', '0xbf597fc7beef0ee4',\n  '0xc6e00bf33da88fc2', '0xd5a79147930aa725', '0x06ca6351e003826f', '0x142929670a0e6e70',\n  '0x27b70a8546d22ffc', '0x2e1b21385c26c926', '0x4d2c6dfc5ac42aed', '0x53380d139d95b3df',\n  '0x650a73548baf63de', '0x766a0abb3c77b2a8', '0x81c2c92e47edaee6', '0x92722c851482353b',\n  '0xa2bfe8a14cf10364', '0xa81a664bbc423001', '0xc24b8b70d0f89791', '0xc76c51a30654be30',\n  '0xd192e819d6ef5218', '0xd69906245565a910', '0xf40e35855771202a', '0x106aa07032bbd1b8',\n  '0x19a4c116b8d2d0c8', '0x1e376c085141ab53', '0x2748774cdf8eeb99', '0x34b0bcb5e19b48a8',\n  '0x391c0cb3c5c95a63', '0x4ed8aa4ae3418acb', '0x5b9cca4f7763e373', '0x682e6ff3d6b2b8a3',\n  '0x748f82ee5defb2fc', '0x78a5636f43172f60', '0x84c87814a1f0ab72', '0x8cc702081a6439ec',\n  '0x90befffa23631e28', '0xa4506cebde82bde9', '0xbef9a3f7b2c67915', '0xc67178f2e372532b',\n  '0xca273eceea26619c', '0xd186b8c721c0c207', '0xeada7dd6cde0eb1e', '0xf57d4f7fee6ed178',\n  '0x06f067aa72176fba', '0x0a637dc5a2c898a6', '0x113f9804bef90dae', '0x1b710b35131c471b',\n  '0x28db77f523047d84', '0x32caab7b40c72493', '0x3c9ebe0a15c9bebc', '0x431d67c49c100d4c',\n  '0x4cc5d4becb3e42b6', '0x597f299cfc657e2a', '0x5fcb6fab3ad6faec', '0x6c44198c4a475817'\n].map(n => BigInt(n)));\n\n// Temporary buffer, not used to store anything between runs\nconst SHA512_W_H = new Uint32Array(80);\nconst SHA512_W_L = new Uint32Array(80);\n\nexport class SHA512 extends SHA2<SHA512> {\n  // We cannot use array here since array allows indexing by variable which means optimizer/compiler cannot use registers.\n  // Also looks cleaner and easier to verify with spec.\n  // Initial state (first 32 bits of the fractional parts of the square roots of the first 8 primes 2..19):\n  // h -- high 32 bits, l -- low 32 bits\n  Ah = 0x6a09e667 | 0;\n  Al = 0xf3bcc908 | 0;\n  Bh = 0xbb67ae85 | 0;\n  Bl = 0x84caa73b | 0;\n  Ch = 0x3c6ef372 | 0;\n  Cl = 0xfe94f82b | 0;\n  Dh = 0xa54ff53a | 0;\n  Dl = 0x5f1d36f1 | 0;\n  Eh = 0x510e527f | 0;\n  El = 0xade682d1 | 0;\n  Fh = 0x9b05688c | 0;\n  Fl = 0x2b3e6c1f | 0;\n  Gh = 0x1f83d9ab | 0;\n  Gl = 0xfb41bd6b | 0;\n  Hh = 0x5be0cd19 | 0;\n  Hl = 0x137e2179 | 0;\n\n  constructor() {\n    super(128, 64, 16, false);\n  }\n  // prettier-ignore\n  protected get(): [\n    number, number, number, number, number, number, number, number,\n    number, number, number, number, number, number, number, number\n  ] {\n    const { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n    return [Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl];\n  }\n  // prettier-ignore\n  protected set(\n    Ah: number, Al: number, Bh: number, Bl: number, Ch: number, Cl: number, Dh: number, Dl: number,\n    Eh: number, El: number, Fh: number, Fl: number, Gh: number, Gl: number, Hh: number, Hl: number\n  ) {\n    this.Ah = Ah | 0;\n    this.Al = Al | 0;\n    this.Bh = Bh | 0;\n    this.Bl = Bl | 0;\n    this.Ch = Ch | 0;\n    this.Cl = Cl | 0;\n    this.Dh = Dh | 0;\n    this.Dl = Dl | 0;\n    this.Eh = Eh | 0;\n    this.El = El | 0;\n    this.Fh = Fh | 0;\n    this.Fl = Fl | 0;\n    this.Gh = Gh | 0;\n    this.Gl = Gl | 0;\n    this.Hh = Hh | 0;\n    this.Hl = Hl | 0;\n  }\n  protected process(view: DataView, offset: number) {\n    // Extend the first 16 words into the remaining 64 words w[16..79] of the message schedule array\n    for (let i = 0; i < 16; i++, offset += 4) {\n      SHA512_W_H[i] = view.getUint32(offset);\n      SHA512_W_L[i] = view.getUint32((offset += 4));\n    }\n    for (let i = 16; i < 80; i++) {\n      // s0 := (w[i-15] rightrotate 1) xor (w[i-15] rightrotate 8) xor (w[i-15] rightshift 7)\n      const W15h = SHA512_W_H[i - 15] | 0;\n      const W15l = SHA512_W_L[i - 15] | 0;\n      const s0h = u64.rotrSH(W15h, W15l, 1) ^ u64.rotrSH(W15h, W15l, 8) ^ u64.shrSH(W15h, W15l, 7);\n      const s0l = u64.rotrSL(W15h, W15l, 1) ^ u64.rotrSL(W15h, W15l, 8) ^ u64.shrSL(W15h, W15l, 7);\n      // s1 := (w[i-2] rightrotate 19) xor (w[i-2] rightrotate 61) xor (w[i-2] rightshift 6)\n      const W2h = SHA512_W_H[i - 2] | 0;\n      const W2l = SHA512_W_L[i - 2] | 0;\n      const s1h = u64.rotrSH(W2h, W2l, 19) ^ u64.rotrBH(W2h, W2l, 61) ^ u64.shrSH(W2h, W2l, 6);\n      const s1l = u64.rotrSL(W2h, W2l, 19) ^ u64.rotrBL(W2h, W2l, 61) ^ u64.shrSL(W2h, W2l, 6);\n      // SHA256_W[i] = s0 + s1 + SHA256_W[i - 7] + SHA256_W[i - 16];\n      const SUMl = u64.add4L(s0l, s1l, SHA512_W_L[i - 7], SHA512_W_L[i - 16]);\n      const SUMh = u64.add4H(SUMl, s0h, s1h, SHA512_W_H[i - 7], SHA512_W_H[i - 16]);\n      SHA512_W_H[i] = SUMh | 0;\n      SHA512_W_L[i] = SUMl | 0;\n    }\n    let { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n    // Compression function main loop, 80 rounds\n    for (let i = 0; i < 80; i++) {\n      // S1 := (e rightrotate 14) xor (e rightrotate 18) xor (e rightrotate 41)\n      const sigma1h = u64.rotrSH(Eh, El, 14) ^ u64.rotrSH(Eh, El, 18) ^ u64.rotrBH(Eh, El, 41);\n      const sigma1l = u64.rotrSL(Eh, El, 14) ^ u64.rotrSL(Eh, El, 18) ^ u64.rotrBL(Eh, El, 41);\n      //const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n      const CHIh = (Eh & Fh) ^ (~Eh & Gh);\n      const CHIl = (El & Fl) ^ (~El & Gl);\n      // T1 = H + sigma1 + Chi(E, F, G) + SHA512_K[i] + SHA512_W[i]\n      // prettier-ignore\n      const T1ll = u64.add5L(Hl, sigma1l, CHIl, SHA512_Kl[i], SHA512_W_L[i]);\n      const T1h = u64.add5H(T1ll, Hh, sigma1h, CHIh, SHA512_Kh[i], SHA512_W_H[i]);\n      const T1l = T1ll | 0;\n      // S0 := (a rightrotate 28) xor (a rightrotate 34) xor (a rightrotate 39)\n      const sigma0h = u64.rotrSH(Ah, Al, 28) ^ u64.rotrBH(Ah, Al, 34) ^ u64.rotrBH(Ah, Al, 39);\n      const sigma0l = u64.rotrSL(Ah, Al, 28) ^ u64.rotrBL(Ah, Al, 34) ^ u64.rotrBL(Ah, Al, 39);\n      const MAJh = (Ah & Bh) ^ (Ah & Ch) ^ (Bh & Ch);\n      const MAJl = (Al & Bl) ^ (Al & Cl) ^ (Bl & Cl);\n      Hh = Gh | 0;\n      Hl = Gl | 0;\n      Gh = Fh | 0;\n      Gl = Fl | 0;\n      Fh = Eh | 0;\n      Fl = El | 0;\n      ({ h: Eh, l: El } = u64.add(Dh | 0, Dl | 0, T1h | 0, T1l | 0));\n      Dh = Ch | 0;\n      Dl = Cl | 0;\n      Ch = Bh | 0;\n      Cl = Bl | 0;\n      Bh = Ah | 0;\n      Bl = Al | 0;\n      const All = u64.add3L(T1l, sigma0l, MAJl);\n      Ah = u64.add3H(All, T1h, sigma0h, MAJh);\n      Al = All | 0;\n    }\n    // Add the compressed chunk to the current hash value\n    ({ h: Ah, l: Al } = u64.add(this.Ah | 0, this.Al | 0, Ah | 0, Al | 0));\n    ({ h: Bh, l: Bl } = u64.add(this.Bh | 0, this.Bl | 0, Bh | 0, Bl | 0));\n    ({ h: Ch, l: Cl } = u64.add(this.Ch | 0, this.Cl | 0, Ch | 0, Cl | 0));\n    ({ h: Dh, l: Dl } = u64.add(this.Dh | 0, this.Dl | 0, Dh | 0, Dl | 0));\n    ({ h: Eh, l: El } = u64.add(this.Eh | 0, this.El | 0, Eh | 0, El | 0));\n    ({ h: Fh, l: Fl } = u64.add(this.Fh | 0, this.Fl | 0, Fh | 0, Fl | 0));\n    ({ h: Gh, l: Gl } = u64.add(this.Gh | 0, this.Gl | 0, Gh | 0, Gl | 0));\n    ({ h: Hh, l: Hl } = u64.add(this.Hh | 0, this.Hl | 0, Hh | 0, Hl | 0));\n    this.set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl);\n  }\n  protected roundClean() {\n    SHA512_W_H.fill(0);\n    SHA512_W_L.fill(0);\n  }\n  destroy() {\n    this.buffer.fill(0);\n    this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n  }\n}\n\nclass SHA512_224 extends SHA512 {\n  // h -- high 32 bits, l -- low 32 bits\n  Ah = 0x8c3d37c8 | 0;\n  Al = 0x19544da2 | 0;\n  Bh = 0x73e19966 | 0;\n  Bl = 0x89dcd4d6 | 0;\n  Ch = 0x1dfab7ae | 0;\n  Cl = 0x32ff9c82 | 0;\n  Dh = 0x679dd514 | 0;\n  Dl = 0x582f9fcf | 0;\n  Eh = 0x0f6d2b69 | 0;\n  El = 0x7bd44da8 | 0;\n  Fh = 0x77e36f73 | 0;\n  Fl = 0x04c48942 | 0;\n  Gh = 0x3f9d85a8 | 0;\n  Gl = 0x6a1d36c8 | 0;\n  Hh = 0x1112e6ad | 0;\n  Hl = 0x91d692a1 | 0;\n\n  constructor() {\n    super();\n    this.outputLen = 28;\n  }\n}\n\nclass SHA512_256 extends SHA512 {\n  // h -- high 32 bits, l -- low 32 bits\n  Ah = 0x22312194 | 0;\n  Al = 0xfc2bf72c | 0;\n  Bh = 0x9f555fa3 | 0;\n  Bl = 0xc84c64c2 | 0;\n  Ch = 0x2393b86b | 0;\n  Cl = 0x6f53b151 | 0;\n  Dh = 0x96387719 | 0;\n  Dl = 0x5940eabd | 0;\n  Eh = 0x96283ee2 | 0;\n  El = 0xa88effe3 | 0;\n  Fh = 0xbe5e1e25 | 0;\n  Fl = 0x53863992 | 0;\n  Gh = 0x2b0199fc | 0;\n  Gl = 0x2c85b8aa | 0;\n  Hh = 0x0eb72ddc | 0;\n  Hl = 0x81c52ca2 | 0;\n\n  constructor() {\n    super();\n    this.outputLen = 32;\n  }\n}\n\nclass SHA384 extends SHA512 {\n  // h -- high 32 bits, l -- low 32 bits\n  Ah = 0xcbbb9d5d | 0;\n  Al = 0xc1059ed8 | 0;\n  Bh = 0x629a292a | 0;\n  Bl = 0x367cd507 | 0;\n  Ch = 0x9159015a | 0;\n  Cl = 0x3070dd17 | 0;\n  Dh = 0x152fecd8 | 0;\n  Dl = 0xf70e5939 | 0;\n  Eh = 0x67332667 | 0;\n  El = 0xffc00b31 | 0;\n  Fh = 0x8eb44a87 | 0;\n  Fl = 0x68581511 | 0;\n  Gh = 0xdb0c2e0d | 0;\n  Gl = 0x64f98fa7 | 0;\n  Hh = 0x47b5481d | 0;\n  Hl = 0xbefa4fa4 | 0;\n\n  constructor() {\n    super();\n    this.outputLen = 48;\n  }\n}\n\nexport const sha512 = wrapConstructor(() => new SHA512());\nexport const sha512_224 = wrapConstructor(() => new SHA512_224());\nexport const sha512_256 = wrapConstructor(() => new SHA512_256());\nexport const sha384 = wrapConstructor(() => new SHA384());\n", "/*! scure-bip32 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */\nimport { hmac } from '@noble/hashes/hmac';\nimport { ripemd160 } from '@noble/hashes/ripemd160';\nimport { sha256 } from '@noble/hashes/sha256';\nimport { sha512 } from '@noble/hashes/sha512';\nimport { bytes as assertBytes } from '@noble/hashes/_assert';\nimport { bytesToHex, concatBytes, createView, hexToBytes, utf8ToBytes } from '@noble/hashes/utils';\nimport * as secp from '@noble/secp256k1';\nimport { base58check as base58checker } from '@scure/base';\n\n// Enable sync API for noble-secp256k1\nsecp.utils.hmacSha256Sync = (key, ...msgs) => hmac(sha256, key, secp.utils.concatBytes(...msgs));\nconst base58check = base58checker(sha256);\n\nfunction bytesToNumber(bytes: Uint8Array): bigint {\n  return BigInt(`0x${bytesToHex(bytes)}`);\n}\n\nfunction numberToBytes(num: bigint): Uint8Array {\n  return hexToBytes(num.toString(16).padStart(64, '0'));\n}\n\nconst MASTER_SECRET = utf8ToBytes('Bitcoin seed');\n// Bitcoin hardcoded by default\nconst BITCOIN_VERSIONS: Versions = { private: 0x0488ade4, public: 0x0488b21e };\nexport const HARDENED_OFFSET: number = 0x80000000;\n\nexport interface Versions {\n  private: number;\n  public: number;\n}\n\nconst hash160 = (data: Uint8Array) => ripemd160(sha256(data));\nconst fromU32 = (data: Uint8Array) => createView(data).getUint32(0, false);\nconst toU32 = (n: number) => {\n  if (!Number.isSafeInteger(n) || n < 0 || n > 2 ** 32 - 1) {\n    throw new Error(`Invalid number=${n}. Should be from 0 to 2 ** 32 - 1`);\n  }\n  const buf = new Uint8Array(4);\n  createView(buf).setUint32(0, n, false);\n  return buf;\n};\n\ninterface HDKeyOpt {\n  versions: Versions;\n  depth?: number;\n  index?: number;\n  parentFingerprint?: number;\n  chainCode: Uint8Array;\n  publicKey?: Uint8Array;\n  privateKey?: Uint8Array | bigint;\n}\n\nexport class HDKey {\n  get fingerprint(): number {\n    if (!this.pubHash) {\n      throw new Error('No publicKey set!');\n    }\n    return fromU32(this.pubHash);\n  }\n  get identifier(): Uint8Array | undefined {\n    return this.pubHash;\n  }\n  get pubKeyHash(): Uint8Array | undefined {\n    return this.pubHash;\n  }\n  get privateKey(): Uint8Array | null {\n    return this.privKeyBytes || null;\n  }\n  get publicKey(): Uint8Array | null {\n    return this.pubKey || null;\n  }\n  get privateExtendedKey(): string {\n    const priv = this.privateKey;\n    if (!priv) {\n      throw new Error('No private key');\n    }\n    return base58check.encode(\n      this.serialize(this.versions.private, concatBytes(new Uint8Array([0]), priv))\n    );\n  }\n  get publicExtendedKey(): string {\n    if (!this.pubKey) {\n      throw new Error('No public key');\n    }\n    return base58check.encode(this.serialize(this.versions.public, this.pubKey));\n  }\n\n  public static fromMasterSeed(seed: Uint8Array, versions: Versions = BITCOIN_VERSIONS): HDKey {\n    assertBytes(seed);\n    if (8 * seed.length < 128 || 8 * seed.length > 512) {\n      throw new Error(\n        `HDKey: wrong seed length=${seed.length}. Should be between 128 and 512 bits; 256 bits is advised)`\n      );\n    }\n    const I = hmac(sha512, MASTER_SECRET, seed);\n    return new HDKey({\n      versions,\n      chainCode: I.slice(32),\n      privateKey: I.slice(0, 32),\n    });\n  }\n\n  public static fromExtendedKey(base58key: string, versions: Versions = BITCOIN_VERSIONS): HDKey {\n    // => version(4) || depth(1) || fingerprint(4) || index(4) || chain(32) || key(33)\n    const keyBuffer: Uint8Array = base58check.decode(base58key);\n    const keyView = createView(keyBuffer);\n    const version = keyView.getUint32(0, false);\n    const opt = {\n      versions,\n      depth: keyBuffer[4],\n      parentFingerprint: keyView.getUint32(5, false),\n      index: keyView.getUint32(9, false),\n      chainCode: keyBuffer.slice(13, 45),\n    };\n    const key = keyBuffer.slice(45);\n    const isPriv = key[0] === 0;\n    if (version !== versions[isPriv ? 'private' : 'public']) {\n      throw new Error('Version mismatch');\n    }\n    if (isPriv) {\n      return new HDKey({ ...opt, privateKey: key.slice(1) });\n    } else {\n      return new HDKey({ ...opt, publicKey: key });\n    }\n  }\n\n  public static fromJSON(json: { xpriv: string }): HDKey {\n    return HDKey.fromExtendedKey(json.xpriv);\n  }\n  public readonly versions: Versions;\n  public readonly depth: number = 0;\n  public readonly index: number = 0;\n  public readonly chainCode: Uint8Array | null = null;\n  public readonly parentFingerprint: number = 0;\n  private privKey?: bigint;\n  private privKeyBytes?: Uint8Array;\n  private pubKey?: Uint8Array;\n  private pubHash: Uint8Array | undefined;\n\n  constructor(opt: HDKeyOpt) {\n    if (!opt || typeof opt !== 'object') {\n      throw new Error('HDKey.constructor must not be called directly');\n    }\n    this.versions = opt.versions || BITCOIN_VERSIONS;\n    this.depth = opt.depth || 0;\n    this.chainCode = opt.chainCode;\n    this.index = opt.index || 0;\n    this.parentFingerprint = opt.parentFingerprint || 0;\n    if (!this.depth) {\n      if (this.parentFingerprint || this.index) {\n        throw new Error('HDKey: zero depth with non-zero index/parent fingerprint');\n      }\n    }\n    if (opt.publicKey && opt.privateKey) {\n      throw new Error('HDKey: publicKey and privateKey at same time.');\n    }\n    if (opt.privateKey) {\n      if (!secp.utils.isValidPrivateKey(opt.privateKey)) {\n        throw new Error('Invalid private key');\n      }\n      this.privKey =\n        typeof opt.privateKey === 'bigint' ? opt.privateKey : bytesToNumber(opt.privateKey);\n      this.privKeyBytes = numberToBytes(this.privKey);\n      this.pubKey = secp.getPublicKey(opt.privateKey, true);\n    } else if (opt.publicKey) {\n      this.pubKey = secp.Point.fromHex(opt.publicKey).toRawBytes(true); // force compressed point\n    } else {\n      throw new Error('HDKey: no public or private key provided');\n    }\n    this.pubHash = hash160(this.pubKey);\n  }\n\n  public derive(path: string): HDKey {\n    if (!/^[mM]'?/.test(path)) {\n      throw new Error('Path must start with \"m\" or \"M\"');\n    }\n    if (/^[mM]'?$/.test(path)) {\n      return this;\n    }\n    const parts = path.replace(/^[mM]'?\\//, '').split('/');\n    // tslint:disable-next-line\n    let child: HDKey = this;\n    for (const c of parts) {\n      const m = /^(\\d+)('?)$/.exec(c);\n      if (!m || m.length !== 3) {\n        throw new Error(`Invalid child index: ${c}`);\n      }\n      let idx = +m[1];\n      if (!Number.isSafeInteger(idx) || idx >= HARDENED_OFFSET) {\n        throw new Error('Invalid index');\n      }\n      // hardened key\n      if (m[2] === \"'\") {\n        idx += HARDENED_OFFSET;\n      }\n      child = child.deriveChild(idx);\n    }\n    return child;\n  }\n\n  public deriveChild(index: number): HDKey {\n    if (!this.pubKey || !this.chainCode) {\n      throw new Error('No publicKey or chainCode set');\n    }\n    let data = toU32(index);\n    if (index >= HARDENED_OFFSET) {\n      // Hardened\n      const priv = this.privateKey;\n      if (!priv) {\n        throw new Error('Could not derive hardened child key');\n      }\n      // Hardened child: 0x00 || ser256(kpar) || ser32(index)\n      data = concatBytes(new Uint8Array([0]), priv, data);\n    } else {\n      // Normal child: serP(point(kpar)) || ser32(index)\n      data = concatBytes(this.pubKey, data);\n    }\n    const I = hmac(sha512, this.chainCode, data);\n    const childTweak = bytesToNumber(I.slice(0, 32));\n    const chainCode = I.slice(32);\n    if (!secp.utils.isValidPrivateKey(childTweak)) {\n      throw new Error('Tweak bigger than curve order');\n    }\n    const opt: HDKeyOpt = {\n      versions: this.versions,\n      chainCode,\n      depth: this.depth + 1,\n      parentFingerprint: this.fingerprint,\n      index,\n    };\n    try {\n      // Private parent key -> private child key\n      if (this.privateKey) {\n        const added = secp.utils.mod(this.privKey! + childTweak, secp.CURVE.n);\n        if (!secp.utils.isValidPrivateKey(added)) {\n          throw new Error('The tweak was out of range or the resulted private key is invalid');\n        }\n        opt.privateKey = added;\n      } else {\n        const added = secp.Point.fromHex(this.pubKey).add(secp.Point.fromPrivateKey(childTweak));\n        // Cryptographically impossible: hmac-sha512 preimage would need to be found\n        if (added.equals(secp.Point.ZERO)) {\n          throw new Error('The tweak was equal to negative P, which made the result key invalid');\n        }\n        opt.publicKey = added.toRawBytes(true);\n      }\n      return new HDKey(opt);\n    } catch (err) {\n      return this.deriveChild(index + 1);\n    }\n  }\n\n  public sign(hash: Uint8Array): Uint8Array {\n    if (!this.privateKey) {\n      throw new Error('No privateKey set!');\n    }\n    assertBytes(hash, 32);\n    return secp.signSync(hash, this.privKey!, {\n      canonical: true,\n      der: false,\n    });\n  }\n\n  public verify(hash: Uint8Array, signature: Uint8Array): boolean {\n    assertBytes(hash, 32);\n    assertBytes(signature, 64);\n    if (!this.publicKey) {\n      throw new Error('No publicKey set!');\n    }\n    let sig;\n    try {\n      sig = secp.Signature.fromCompact(signature);\n    } catch (error) {\n      return false;\n    }\n    return secp.verify(sig, hash, this.publicKey);\n  }\n\n  public wipePrivateData(): this {\n    this.privKey = undefined;\n    if (this.privKeyBytes) {\n      this.privKeyBytes.fill(0);\n      this.privKeyBytes = undefined;\n    }\n    return this;\n  }\n  public toJSON(): { xpriv: string; xpub: string } {\n    return {\n      xpriv: this.privateExtendedKey,\n      xpub: this.publicExtendedKey,\n    };\n  }\n\n  private serialize(version: number, key: Uint8Array) {\n    if (!this.chainCode) {\n      throw new Error('No chainCode set');\n    }\n    assertBytes(key, 33);\n    // version(4) || depth(1) || fingerprint(4) || index(4) || chain(32) || key(33)\n    return concatBytes(\n      toU32(version),\n      new Uint8Array([this.depth]),\n      toU32(this.parentFingerprint),\n      toU32(this.index),\n      this.chainCode,\n      key\n    );\n  }\n}\n", "import { assertHash, Hash, toBytes } from './utils.js';\n// HMAC (RFC 2104)\nclass HMAC extends Hash {\n    constructor(hash, _key) {\n        super();\n        this.finished = false;\n        this.destroyed = false;\n        assertHash(hash);\n        const key = toBytes(_key);\n        this.iHash = hash.create();\n        if (!(this.iHash instanceof Hash))\n            throw new TypeError('Expected instance of class which extends utils.Hash');\n        const blockLen = (this.blockLen = this.iHash.blockLen);\n        this.outputLen = this.iHash.outputLen;\n        const pad = new Uint8Array(blockLen);\n        // blockLen can be bigger than outputLen\n        pad.set(key.length > this.iHash.blockLen ? hash.create().update(key).digest() : key);\n        for (let i = 0; i < pad.length; i++)\n            pad[i] ^= 0x36;\n        this.iHash.update(pad);\n        // By doing update (processing of first block) of outer hash here we can re-use it between multiple calls via clone\n        this.oHash = hash.create();\n        // Undo internal XOR && apply outer XOR\n        for (let i = 0; i < pad.length; i++)\n            pad[i] ^= 0x36 ^ 0x5c;\n        this.oHash.update(pad);\n        pad.fill(0);\n    }\n    update(buf) {\n        if (this.destroyed)\n            throw new Error('instance is destroyed');\n        this.iHash.update(buf);\n        return this;\n    }\n    digestInto(out) {\n        if (this.destroyed)\n            throw new Error('instance is destroyed');\n        if (!(out instanceof Uint8Array) || out.length !== this.outputLen)\n            throw new Error('HMAC: Invalid output buffer');\n        if (this.finished)\n            throw new Error('digest() was already called');\n        this.finished = true;\n        this.iHash.digestInto(out);\n        this.oHash.update(out);\n        this.oHash.digestInto(out);\n        this.destroy();\n    }\n    digest() {\n        const out = new Uint8Array(this.oHash.outputLen);\n        this.digestInto(out);\n        return out;\n    }\n    _cloneInto(to) {\n        // Create new instance without calling constructor since key already in state and we don't know it.\n        to || (to = Object.create(Object.getPrototypeOf(this), {}));\n        const { oHash, iHash, finished, destroyed, blockLen, outputLen } = this;\n        to = to;\n        to.finished = finished;\n        to.destroyed = destroyed;\n        to.blockLen = blockLen;\n        to.outputLen = outputLen;\n        to.oHash = oHash._cloneInto(to.oHash);\n        to.iHash = iHash._cloneInto(to.iHash);\n        return to;\n    }\n    destroy() {\n        this.destroyed = true;\n        this.oHash.destroy();\n        this.iHash.destroy();\n    }\n}\n/**\n * HMAC: RFC2104 message authentication code.\n * @param hash - function that would be used e.g. sha256\n * @param key - message key\n * @param message - message data\n */\nexport const hmac = (hash, key, message) => new HMAC(hash, key).update(message).digest();\nhmac.create = (hash, key) => new HMAC(hash, key);\n", "var __defProp = Object.defineProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\n\n// keys.ts\nimport * as secp256k1 from \"@noble/secp256k1\";\nfunction generatePrivateKey() {\n  return secp256k1.utils.bytesToHex(secp256k1.utils.randomPrivateKey());\n}\nfunction getPublicKey(privateKey) {\n  return secp256k1.utils.bytesToHex(secp256k1.schnorr.getPublicKey(privateKey));\n}\n\n// event.ts\nimport * as secp256k12 from \"@noble/secp256k1\";\nimport { sha256 } from \"@noble/hashes/sha256\";\n\n// utils.ts\nvar utils_exports = {};\n__export(utils_exports, {\n  insertEventIntoAscendingList: () => insertEventIntoAscendingList,\n  insertEventIntoDescendingList: () => insertEventIntoDescendingList,\n  normalizeURL: () => normalizeURL,\n  utf8Decoder: () => utf8Decoder,\n  utf8Encoder: () => utf8Encoder\n});\nvar utf8Decoder = new TextDecoder(\"utf-8\");\nvar utf8Encoder = new TextEncoder();\nfunction normalizeURL(url) {\n  let p = new URL(url);\n  p.pathname = p.pathname.replace(/\\/+/g, \"/\");\n  if (p.pathname.endsWith(\"/\"))\n    p.pathname = p.pathname.slice(0, -1);\n  if (p.port === \"80\" && p.protocol === \"ws:\" || p.port === \"443\" && p.protocol === \"wss:\")\n    p.port = \"\";\n  p.searchParams.sort();\n  p.hash = \"\";\n  return p.toString();\n}\nfunction insertEventIntoDescendingList(sortedArray, event) {\n  let start = 0;\n  let end = sortedArray.length - 1;\n  let midPoint;\n  let position = start;\n  if (end < 0) {\n    position = 0;\n  } else if (event.created_at < sortedArray[end].created_at) {\n    position = end + 1;\n  } else if (event.created_at >= sortedArray[start].created_at) {\n    position = start;\n  } else\n    while (true) {\n      if (end <= start + 1) {\n        position = end;\n        break;\n      }\n      midPoint = Math.floor(start + (end - start) / 2);\n      if (sortedArray[midPoint].created_at > event.created_at) {\n        start = midPoint;\n      } else if (sortedArray[midPoint].created_at < event.created_at) {\n        end = midPoint;\n      } else {\n        position = midPoint;\n        break;\n      }\n    }\n  if (sortedArray[position]?.id !== event.id) {\n    return [\n      ...sortedArray.slice(0, position),\n      event,\n      ...sortedArray.slice(position)\n    ];\n  }\n  return sortedArray;\n}\nfunction insertEventIntoAscendingList(sortedArray, event) {\n  let start = 0;\n  let end = sortedArray.length - 1;\n  let midPoint;\n  let position = start;\n  if (end < 0) {\n    position = 0;\n  } else if (event.created_at > sortedArray[end].created_at) {\n    position = end + 1;\n  } else if (event.created_at <= sortedArray[start].created_at) {\n    position = start;\n  } else\n    while (true) {\n      if (end <= start + 1) {\n        position = end;\n        break;\n      }\n      midPoint = Math.floor(start + (end - start) / 2);\n      if (sortedArray[midPoint].created_at < event.created_at) {\n        start = midPoint;\n      } else if (sortedArray[midPoint].created_at > event.created_at) {\n        end = midPoint;\n      } else {\n        position = midPoint;\n        break;\n      }\n    }\n  if (sortedArray[position]?.id !== event.id) {\n    return [\n      ...sortedArray.slice(0, position),\n      event,\n      ...sortedArray.slice(position)\n    ];\n  }\n  return sortedArray;\n}\n\n// event.ts\nvar Kind = /* @__PURE__ */ ((Kind2) => {\n  Kind2[Kind2[\"Metadata\"] = 0] = \"Metadata\";\n  Kind2[Kind2[\"Text\"] = 1] = \"Text\";\n  Kind2[Kind2[\"RecommendRelay\"] = 2] = \"RecommendRelay\";\n  Kind2[Kind2[\"Contacts\"] = 3] = \"Contacts\";\n  Kind2[Kind2[\"EncryptedDirectMessage\"] = 4] = \"EncryptedDirectMessage\";\n  Kind2[Kind2[\"EventDeletion\"] = 5] = \"EventDeletion\";\n  Kind2[Kind2[\"Reaction\"] = 7] = \"Reaction\";\n  Kind2[Kind2[\"ChannelCreation\"] = 40] = \"ChannelCreation\";\n  Kind2[Kind2[\"ChannelMetadata\"] = 41] = \"ChannelMetadata\";\n  Kind2[Kind2[\"ChannelMessage\"] = 42] = \"ChannelMessage\";\n  Kind2[Kind2[\"ChannelHideMessage\"] = 43] = \"ChannelHideMessage\";\n  Kind2[Kind2[\"ChannelMuteUser\"] = 44] = \"ChannelMuteUser\";\n  Kind2[Kind2[\"Report\"] = 1984] = \"Report\";\n  Kind2[Kind2[\"ZapRequest\"] = 9734] = \"ZapRequest\";\n  Kind2[Kind2[\"Zap\"] = 9735] = \"Zap\";\n  Kind2[Kind2[\"RelayList\"] = 10002] = \"RelayList\";\n  Kind2[Kind2[\"ClientAuth\"] = 22242] = \"ClientAuth\";\n  Kind2[Kind2[\"Article\"] = 30023] = \"Article\";\n  return Kind2;\n})(Kind || {});\nfunction getBlankEvent() {\n  return {\n    kind: 255,\n    content: \"\",\n    tags: [],\n    created_at: 0\n  };\n}\nfunction finishEvent(t, privateKey) {\n  let event = t;\n  event.pubkey = getPublicKey(privateKey);\n  event.id = getEventHash(event);\n  event.sig = signEvent(event, privateKey);\n  return event;\n}\nfunction serializeEvent(evt) {\n  if (!validateEvent(evt))\n    throw new Error(\"can't serialize event with wrong or missing properties\");\n  return JSON.stringify([\n    0,\n    evt.pubkey,\n    evt.created_at,\n    evt.kind,\n    evt.tags,\n    evt.content\n  ]);\n}\nfunction getEventHash(event) {\n  let eventHash = sha256(utf8Encoder.encode(serializeEvent(event)));\n  return secp256k12.utils.bytesToHex(eventHash);\n}\nfunction validateEvent(event) {\n  if (typeof event !== \"object\")\n    return false;\n  if (typeof event.kind !== \"number\")\n    return false;\n  if (typeof event.content !== \"string\")\n    return false;\n  if (typeof event.created_at !== \"number\")\n    return false;\n  if (typeof event.pubkey !== \"string\")\n    return false;\n  if (!event.pubkey.match(/^[a-f0-9]{64}$/))\n    return false;\n  if (!Array.isArray(event.tags))\n    return false;\n  for (let i = 0; i < event.tags.length; i++) {\n    let tag = event.tags[i];\n    if (!Array.isArray(tag))\n      return false;\n    for (let j = 0; j < tag.length; j++) {\n      if (typeof tag[j] === \"object\")\n        return false;\n    }\n  }\n  return true;\n}\nfunction verifySignature(event) {\n  return secp256k12.schnorr.verifySync(\n    event.sig,\n    getEventHash(event),\n    event.pubkey\n  );\n}\nfunction signEvent(event, key) {\n  return secp256k12.utils.bytesToHex(\n    secp256k12.schnorr.signSync(getEventHash(event), key)\n  );\n}\n\n// filter.ts\nfunction matchFilter(filter, event) {\n  if (filter.ids && filter.ids.indexOf(event.id) === -1)\n    return false;\n  if (filter.kinds && filter.kinds.indexOf(event.kind) === -1)\n    return false;\n  if (filter.authors && filter.authors.indexOf(event.pubkey) === -1)\n    return false;\n  for (let f in filter) {\n    if (f[0] === \"#\") {\n      let tagName = f.slice(1);\n      let values = filter[`#${tagName}`];\n      if (values && !event.tags.find(\n        ([t, v]) => t === f.slice(1) && values.indexOf(v) !== -1\n      ))\n        return false;\n    }\n  }\n  if (filter.since && event.created_at < filter.since)\n    return false;\n  if (filter.until && event.created_at >= filter.until)\n    return false;\n  return true;\n}\nfunction matchFilters(filters, event) {\n  for (let i = 0; i < filters.length; i++) {\n    if (matchFilter(filters[i], event))\n      return true;\n  }\n  return false;\n}\n\n// fakejson.ts\nvar fakejson_exports = {};\n__export(fakejson_exports, {\n  getHex64: () => getHex64,\n  getInt: () => getInt,\n  getSubscriptionId: () => getSubscriptionId,\n  matchEventId: () => matchEventId,\n  matchEventKind: () => matchEventKind,\n  matchEventPubkey: () => matchEventPubkey\n});\nfunction getHex64(json, field) {\n  let len = field.length + 3;\n  let idx = json.indexOf(`\"${field}\":`) + len;\n  let s = json.slice(idx).indexOf(`\"`) + idx + 1;\n  return json.slice(s, s + 64);\n}\nfunction getInt(json, field) {\n  let len = field.length;\n  let idx = json.indexOf(`\"${field}\":`) + len + 3;\n  let sliced = json.slice(idx);\n  let end = Math.min(sliced.indexOf(\",\"), sliced.indexOf(\"}\"));\n  return parseInt(sliced.slice(0, end), 10);\n}\nfunction getSubscriptionId(json) {\n  let idx = json.slice(0, 22).indexOf(`\"EVENT\"`);\n  if (idx === -1)\n    return null;\n  let pstart = json.slice(idx + 7 + 1).indexOf(`\"`);\n  if (pstart === -1)\n    return null;\n  let start = idx + 7 + 1 + pstart;\n  let pend = json.slice(start + 1, 80).indexOf(`\"`);\n  if (pend === -1)\n    return null;\n  let end = start + 1 + pend;\n  return json.slice(start + 1, end);\n}\nfunction matchEventId(json, id) {\n  return id === getHex64(json, \"id\");\n}\nfunction matchEventPubkey(json, pubkey) {\n  return pubkey === getHex64(json, \"pubkey\");\n}\nfunction matchEventKind(json, kind) {\n  return kind === getInt(json, \"kind\");\n}\n\n// relay.ts\nfunction relayInit(url, options = {}) {\n  let { listTimeout = 3e3, getTimeout = 3e3 } = options;\n  var ws;\n  var openSubs = {};\n  var listeners = {\n    connect: [],\n    disconnect: [],\n    error: [],\n    notice: []\n  };\n  var subListeners = {};\n  var pubListeners = {};\n  async function connectRelay() {\n    return new Promise((resolve, reject) => {\n      ws = new WebSocket(url);\n      ws.onopen = () => {\n        listeners.connect.forEach((cb) => cb());\n        resolve();\n      };\n      ws.onerror = () => {\n        listeners.error.forEach((cb) => cb());\n        reject();\n      };\n      ws.onclose = async () => {\n        listeners.disconnect.forEach((cb) => cb());\n      };\n      let incomingMessageQueue = [];\n      let handleNextInterval;\n      ws.onmessage = (e) => {\n        incomingMessageQueue.push(e.data);\n        if (!handleNextInterval) {\n          handleNextInterval = setInterval(handleNext, 0);\n        }\n      };\n      function handleNext() {\n        if (incomingMessageQueue.length === 0) {\n          clearInterval(handleNextInterval);\n          handleNextInterval = null;\n          return;\n        }\n        var json = incomingMessageQueue.shift();\n        if (!json)\n          return;\n        let subid = getSubscriptionId(json);\n        if (subid) {\n          let so = openSubs[subid];\n          if (so && so.alreadyHaveEvent && so.alreadyHaveEvent(getHex64(json, \"id\"), url)) {\n            return;\n          }\n        }\n        try {\n          let data = JSON.parse(json);\n          switch (data[0]) {\n            case \"EVENT\":\n              let id = data[1];\n              let event = data[2];\n              if (validateEvent(event) && openSubs[id] && (openSubs[id].skipVerification || verifySignature(event)) && matchFilters(openSubs[id].filters, event)) {\n                openSubs[id];\n                (subListeners[id]?.event || []).forEach((cb) => cb(event));\n              }\n              return;\n            case \"EOSE\": {\n              let id2 = data[1];\n              if (id2 in subListeners) {\n                subListeners[id2].eose.forEach((cb) => cb());\n                subListeners[id2].eose = [];\n              }\n              return;\n            }\n            case \"OK\": {\n              let id2 = data[1];\n              let ok = data[2];\n              let reason = data[3] || \"\";\n              if (id2 in pubListeners) {\n                if (ok)\n                  pubListeners[id2].ok.forEach((cb) => cb());\n                else\n                  pubListeners[id2].failed.forEach((cb) => cb(reason));\n                pubListeners[id2].ok = [];\n                pubListeners[id2].failed = [];\n              }\n              return;\n            }\n            case \"NOTICE\":\n              let notice = data[1];\n              listeners.notice.forEach((cb) => cb(notice));\n              return;\n          }\n        } catch (err) {\n          return;\n        }\n      }\n    });\n  }\n  function connected() {\n    return ws?.readyState === 1;\n  }\n  async function connect() {\n    if (connected())\n      return;\n    await connectRelay();\n  }\n  async function trySend(params) {\n    let msg = JSON.stringify(params);\n    if (!connected()) {\n      await new Promise((resolve) => setTimeout(resolve, 1e3));\n      if (!connected()) {\n        return;\n      }\n    }\n    try {\n      ws.send(msg);\n    } catch (err) {\n      console.log(err);\n    }\n  }\n  const sub = (filters, {\n    skipVerification = false,\n    alreadyHaveEvent = null,\n    id = Math.random().toString().slice(2)\n  } = {}) => {\n    let subid = id;\n    openSubs[subid] = {\n      id: subid,\n      filters,\n      skipVerification,\n      alreadyHaveEvent\n    };\n    trySend([\"REQ\", subid, ...filters]);\n    return {\n      sub: (newFilters, newOpts = {}) => sub(newFilters || filters, {\n        skipVerification: newOpts.skipVerification || skipVerification,\n        alreadyHaveEvent: newOpts.alreadyHaveEvent || alreadyHaveEvent,\n        id: subid\n      }),\n      unsub: () => {\n        delete openSubs[subid];\n        delete subListeners[subid];\n        trySend([\"CLOSE\", subid]);\n      },\n      on: (type, cb) => {\n        subListeners[subid] = subListeners[subid] || {\n          event: [],\n          eose: []\n        };\n        subListeners[subid][type].push(cb);\n      },\n      off: (type, cb) => {\n        let listeners2 = subListeners[subid];\n        let idx = listeners2[type].indexOf(cb);\n        if (idx >= 0)\n          listeners2[type].splice(idx, 1);\n      }\n    };\n  };\n  return {\n    url,\n    sub,\n    on: (type, cb) => {\n      listeners[type].push(cb);\n      if (type === \"connect\" && ws?.readyState === 1) {\n        cb();\n      }\n    },\n    off: (type, cb) => {\n      let index = listeners[type].indexOf(cb);\n      if (index !== -1)\n        listeners[type].splice(index, 1);\n    },\n    list: (filters, opts) => new Promise((resolve) => {\n      let s = sub(filters, opts);\n      let events = [];\n      let timeout = setTimeout(() => {\n        s.unsub();\n        resolve(events);\n      }, listTimeout);\n      s.on(\"eose\", () => {\n        s.unsub();\n        clearTimeout(timeout);\n        resolve(events);\n      });\n      s.on(\"event\", (event) => {\n        events.push(event);\n      });\n    }),\n    get: (filter, opts) => new Promise((resolve) => {\n      let s = sub([filter], opts);\n      let timeout = setTimeout(() => {\n        s.unsub();\n        resolve(null);\n      }, getTimeout);\n      s.on(\"event\", (event) => {\n        s.unsub();\n        clearTimeout(timeout);\n        resolve(event);\n      });\n    }),\n    publish(event) {\n      if (!event.id)\n        throw new Error(`event ${event} has no id`);\n      let id = event.id;\n      trySend([\"EVENT\", event]);\n      return {\n        on: (type, cb) => {\n          pubListeners[id] = pubListeners[id] || {\n            ok: [],\n            failed: []\n          };\n          pubListeners[id][type].push(cb);\n        },\n        off: (type, cb) => {\n          let listeners2 = pubListeners[id];\n          if (!listeners2)\n            return;\n          let idx = listeners2[type].indexOf(cb);\n          if (idx >= 0)\n            listeners2[type].splice(idx, 1);\n        }\n      };\n    },\n    connect,\n    close() {\n      listeners = { connect: [], disconnect: [], error: [], notice: [] };\n      subListeners = {};\n      pubListeners = {};\n      ws?.close();\n    },\n    get status() {\n      return ws?.readyState ?? 3;\n    }\n  };\n}\n\n// pool.ts\nvar SimplePool = class {\n  _conn;\n  _seenOn = {};\n  eoseSubTimeout;\n  getTimeout;\n  constructor(options = {}) {\n    this._conn = {};\n    this.eoseSubTimeout = options.eoseSubTimeout || 3400;\n    this.getTimeout = options.getTimeout || 3400;\n  }\n  close(relays) {\n    relays.forEach((url) => {\n      let relay = this._conn[normalizeURL(url)];\n      if (relay)\n        relay.close();\n    });\n  }\n  async ensureRelay(url) {\n    const nm = normalizeURL(url);\n    const existing = this._conn[nm];\n    if (existing)\n      return existing;\n    const relay = relayInit(nm, {\n      getTimeout: this.getTimeout * 0.9,\n      listTimeout: this.getTimeout * 0.9\n    });\n    this._conn[nm] = relay;\n    await relay.connect();\n    return relay;\n  }\n  sub(relays, filters, opts) {\n    let _knownIds = /* @__PURE__ */ new Set();\n    let modifiedOpts = opts || {};\n    modifiedOpts.alreadyHaveEvent = (id, url) => {\n      let set = this._seenOn[id] || /* @__PURE__ */ new Set();\n      set.add(url);\n      this._seenOn[id] = set;\n      return _knownIds.has(id);\n    };\n    let subs = [];\n    let eventListeners = /* @__PURE__ */ new Set();\n    let eoseListeners = /* @__PURE__ */ new Set();\n    let eosesMissing = relays.length;\n    let eoseSent = false;\n    let eoseTimeout = setTimeout(() => {\n      eoseSent = true;\n      for (let cb of eoseListeners.values())\n        cb();\n    }, this.eoseSubTimeout);\n    relays.forEach(async (relay) => {\n      let r;\n      try {\n        r = await this.ensureRelay(relay);\n      } catch (err) {\n        handleEose();\n        return;\n      }\n      if (!r)\n        return;\n      let s = r.sub(filters, modifiedOpts);\n      s.on(\"event\", (event) => {\n        _knownIds.add(event.id);\n        for (let cb of eventListeners.values())\n          cb(event);\n      });\n      s.on(\"eose\", () => {\n        if (eoseSent)\n          return;\n        handleEose();\n      });\n      subs.push(s);\n      function handleEose() {\n        eosesMissing--;\n        if (eosesMissing === 0) {\n          clearTimeout(eoseTimeout);\n          for (let cb of eoseListeners.values())\n            cb();\n        }\n      }\n    });\n    let greaterSub = {\n      sub(filters2, opts2) {\n        subs.forEach((sub) => sub.sub(filters2, opts2));\n        return greaterSub;\n      },\n      unsub() {\n        subs.forEach((sub) => sub.unsub());\n      },\n      on(type, cb) {\n        switch (type) {\n          case \"event\":\n            eventListeners.add(cb);\n            break;\n          case \"eose\":\n            eoseListeners.add(cb);\n            break;\n        }\n      },\n      off(type, cb) {\n        if (type === \"event\") {\n          eventListeners.delete(cb);\n        } else if (type === \"eose\")\n          eoseListeners.delete(cb);\n      }\n    };\n    return greaterSub;\n  }\n  get(relays, filter, opts) {\n    return new Promise((resolve) => {\n      let sub = this.sub(relays, [filter], opts);\n      let timeout = setTimeout(() => {\n        sub.unsub();\n        resolve(null);\n      }, this.getTimeout);\n      sub.on(\"event\", (event) => {\n        resolve(event);\n        clearTimeout(timeout);\n        sub.unsub();\n      });\n    });\n  }\n  list(relays, filters, opts) {\n    return new Promise((resolve) => {\n      let events = [];\n      let sub = this.sub(relays, filters, opts);\n      sub.on(\"event\", (event) => {\n        events.push(event);\n      });\n      sub.on(\"eose\", () => {\n        sub.unsub();\n        resolve(events);\n      });\n    });\n  }\n  publish(relays, event) {\n    let pubs = relays.map((relay) => {\n      let r = this._conn[normalizeURL(relay)];\n      if (!r)\n        return badPub(relay);\n      return r.publish(event);\n    });\n    return {\n      on(type, cb) {\n        pubs.forEach((pub, i) => {\n          pub.on(type, () => cb(relays[i]));\n        });\n      },\n      off() {\n      }\n    };\n  }\n  seenOn(id) {\n    return Array.from(this._seenOn[id]?.values?.() || []);\n  }\n};\nfunction badPub(relay) {\n  return {\n    on(typ, cb) {\n      if (typ === \"failed\")\n        cb(`relay ${relay} not connected`);\n    },\n    off() {\n    }\n  };\n}\n\n// nip04.ts\nvar nip04_exports = {};\n__export(nip04_exports, {\n  decrypt: () => decrypt,\n  encrypt: () => encrypt\n});\nimport { randomBytes } from \"@noble/hashes/utils\";\nimport * as secp256k13 from \"@noble/secp256k1\";\nimport { base64 } from \"@scure/base\";\nasync function encrypt(privkey, pubkey, text) {\n  const key = secp256k13.getSharedSecret(privkey, \"02\" + pubkey);\n  const normalizedKey = getNormalizedX(key);\n  let iv = Uint8Array.from(randomBytes(16));\n  let plaintext = utf8Encoder.encode(text);\n  let cryptoKey = await crypto.subtle.importKey(\n    \"raw\",\n    normalizedKey,\n    { name: \"AES-CBC\" },\n    false,\n    [\"encrypt\"]\n  );\n  let ciphertext = await crypto.subtle.encrypt(\n    { name: \"AES-CBC\", iv },\n    cryptoKey,\n    plaintext\n  );\n  let ctb64 = base64.encode(new Uint8Array(ciphertext));\n  let ivb64 = base64.encode(new Uint8Array(iv.buffer));\n  return `${ctb64}?iv=${ivb64}`;\n}\nasync function decrypt(privkey, pubkey, data) {\n  let [ctb64, ivb64] = data.split(\"?iv=\");\n  let key = secp256k13.getSharedSecret(privkey, \"02\" + pubkey);\n  let normalizedKey = getNormalizedX(key);\n  let cryptoKey = await crypto.subtle.importKey(\n    \"raw\",\n    normalizedKey,\n    { name: \"AES-CBC\" },\n    false,\n    [\"decrypt\"]\n  );\n  let ciphertext = base64.decode(ctb64);\n  let iv = base64.decode(ivb64);\n  let plaintext = await crypto.subtle.decrypt(\n    { name: \"AES-CBC\", iv },\n    cryptoKey,\n    ciphertext\n  );\n  let text = utf8Decoder.decode(plaintext);\n  return text;\n}\nfunction getNormalizedX(key) {\n  return key.slice(1, 33);\n}\n\n// nip05.ts\nvar nip05_exports = {};\n__export(nip05_exports, {\n  queryProfile: () => queryProfile,\n  searchDomain: () => searchDomain,\n  useFetchImplementation: () => useFetchImplementation\n});\nvar _fetch;\ntry {\n  _fetch = fetch;\n} catch {\n}\nfunction useFetchImplementation(fetchImplementation) {\n  _fetch = fetchImplementation;\n}\nasync function searchDomain(domain, query = \"\") {\n  try {\n    let res = await (await _fetch(`https://${domain}/.well-known/nostr.json?name=${query}`)).json();\n    return res.names;\n  } catch (_) {\n    return {};\n  }\n}\nasync function queryProfile(fullname) {\n  let [name, domain] = fullname.split(\"@\");\n  if (!domain) {\n    domain = name;\n    name = \"_\";\n  }\n  if (!name.match(/^[A-Za-z0-9-_]+$/))\n    return null;\n  let res;\n  try {\n    res = await (await _fetch(`https://${domain}/.well-known/nostr.json?name=${name}`)).json();\n  } catch (err) {\n    return null;\n  }\n  if (!res?.names?.[name])\n    return null;\n  let pubkey = res.names[name];\n  let relays = res.relays?.[pubkey] || [];\n  return {\n    pubkey,\n    relays\n  };\n}\n\n// nip06.ts\nvar nip06_exports = {};\n__export(nip06_exports, {\n  generateSeedWords: () => generateSeedWords,\n  privateKeyFromSeedWords: () => privateKeyFromSeedWords,\n  validateWords: () => validateWords\n});\nimport * as secp256k14 from \"@noble/secp256k1\";\nimport { wordlist } from \"@scure/bip39/wordlists/english.js\";\nimport {\n  generateMnemonic,\n  mnemonicToSeedSync,\n  validateMnemonic\n} from \"@scure/bip39\";\nimport { HDKey } from \"@scure/bip32\";\nfunction privateKeyFromSeedWords(mnemonic, passphrase) {\n  let root = HDKey.fromMasterSeed(mnemonicToSeedSync(mnemonic, passphrase));\n  let privateKey = root.derive(`m/44'/1237'/0'/0/0`).privateKey;\n  if (!privateKey)\n    throw new Error(\"could not derive private key\");\n  return secp256k14.utils.bytesToHex(privateKey);\n}\nfunction generateSeedWords() {\n  return generateMnemonic(wordlist);\n}\nfunction validateWords(words) {\n  return validateMnemonic(words, wordlist);\n}\n\n// nip19.ts\nvar nip19_exports = {};\n__export(nip19_exports, {\n  decode: () => decode,\n  naddrEncode: () => naddrEncode,\n  neventEncode: () => neventEncode,\n  noteEncode: () => noteEncode,\n  nprofileEncode: () => nprofileEncode,\n  npubEncode: () => npubEncode,\n  nsecEncode: () => nsecEncode\n});\nimport * as secp256k15 from \"@noble/secp256k1\";\nimport { bech32 } from \"@scure/base\";\nvar Bech32MaxSize = 5e3;\nfunction decode(nip19) {\n  let { prefix, words } = bech32.decode(nip19, Bech32MaxSize);\n  let data = new Uint8Array(bech32.fromWords(words));\n  switch (prefix) {\n    case \"nprofile\": {\n      let tlv = parseTLV(data);\n      if (!tlv[0]?.[0])\n        throw new Error(\"missing TLV 0 for nprofile\");\n      if (tlv[0][0].length !== 32)\n        throw new Error(\"TLV 0 should be 32 bytes\");\n      return {\n        type: \"nprofile\",\n        data: {\n          pubkey: secp256k15.utils.bytesToHex(tlv[0][0]),\n          relays: tlv[1] ? tlv[1].map((d) => utf8Decoder.decode(d)) : []\n        }\n      };\n    }\n    case \"nevent\": {\n      let tlv = parseTLV(data);\n      if (!tlv[0]?.[0])\n        throw new Error(\"missing TLV 0 for nevent\");\n      if (tlv[0][0].length !== 32)\n        throw new Error(\"TLV 0 should be 32 bytes\");\n      return {\n        type: \"nevent\",\n        data: {\n          id: secp256k15.utils.bytesToHex(tlv[0][0]),\n          relays: tlv[1] ? tlv[1].map((d) => utf8Decoder.decode(d)) : []\n        }\n      };\n    }\n    case \"naddr\": {\n      let tlv = parseTLV(data);\n      if (!tlv[0]?.[0])\n        throw new Error(\"missing TLV 0 for naddr\");\n      if (!tlv[2]?.[0])\n        throw new Error(\"missing TLV 2 for naddr\");\n      if (tlv[2][0].length !== 32)\n        throw new Error(\"TLV 2 should be 32 bytes\");\n      if (!tlv[3]?.[0])\n        throw new Error(\"missing TLV 3 for naddr\");\n      if (tlv[3][0].length !== 4)\n        throw new Error(\"TLV 3 should be 4 bytes\");\n      return {\n        type: \"naddr\",\n        data: {\n          identifier: utf8Decoder.decode(tlv[0][0]),\n          pubkey: secp256k15.utils.bytesToHex(tlv[2][0]),\n          kind: parseInt(secp256k15.utils.bytesToHex(tlv[3][0]), 16),\n          relays: tlv[1] ? tlv[1].map((d) => utf8Decoder.decode(d)) : []\n        }\n      };\n    }\n    case \"nsec\":\n    case \"npub\":\n    case \"note\":\n      return { type: prefix, data: secp256k15.utils.bytesToHex(data) };\n    default:\n      throw new Error(`unknown prefix ${prefix}`);\n  }\n}\nfunction parseTLV(data) {\n  let result = {};\n  let rest = data;\n  while (rest.length > 0) {\n    let t = rest[0];\n    let l = rest[1];\n    let v = rest.slice(2, 2 + l);\n    rest = rest.slice(2 + l);\n    if (v.length < l)\n      continue;\n    result[t] = result[t] || [];\n    result[t].push(v);\n  }\n  return result;\n}\nfunction nsecEncode(hex) {\n  return encodeBytes(\"nsec\", hex);\n}\nfunction npubEncode(hex) {\n  return encodeBytes(\"npub\", hex);\n}\nfunction noteEncode(hex) {\n  return encodeBytes(\"note\", hex);\n}\nfunction encodeBytes(prefix, hex) {\n  let data = secp256k15.utils.hexToBytes(hex);\n  let words = bech32.toWords(data);\n  return bech32.encode(prefix, words, Bech32MaxSize);\n}\nfunction nprofileEncode(profile) {\n  let data = encodeTLV({\n    0: [secp256k15.utils.hexToBytes(profile.pubkey)],\n    1: (profile.relays || []).map((url) => utf8Encoder.encode(url))\n  });\n  let words = bech32.toWords(data);\n  return bech32.encode(\"nprofile\", words, Bech32MaxSize);\n}\nfunction neventEncode(event) {\n  let data = encodeTLV({\n    0: [secp256k15.utils.hexToBytes(event.id)],\n    1: (event.relays || []).map((url) => utf8Encoder.encode(url))\n  });\n  let words = bech32.toWords(data);\n  return bech32.encode(\"nevent\", words, Bech32MaxSize);\n}\nfunction naddrEncode(addr) {\n  let kind = new ArrayBuffer(4);\n  new DataView(kind).setUint32(0, addr.kind, false);\n  let data = encodeTLV({\n    0: [utf8Encoder.encode(addr.identifier)],\n    1: (addr.relays || []).map((url) => utf8Encoder.encode(url)),\n    2: [secp256k15.utils.hexToBytes(addr.pubkey)],\n    3: [new Uint8Array(kind)]\n  });\n  let words = bech32.toWords(data);\n  return bech32.encode(\"naddr\", words, Bech32MaxSize);\n}\nfunction encodeTLV(tlv) {\n  let entries = [];\n  Object.entries(tlv).forEach(([t, vs]) => {\n    vs.forEach((v) => {\n      let entry = new Uint8Array(v.length + 2);\n      entry.set([parseInt(t)], 0);\n      entry.set([v.length], 1);\n      entry.set(v, 2);\n      entries.push(entry);\n    });\n  });\n  return secp256k15.utils.concatBytes(...entries);\n}\n\n// nip26.ts\nvar nip26_exports = {};\n__export(nip26_exports, {\n  createDelegation: () => createDelegation,\n  getDelegator: () => getDelegator\n});\nimport * as secp256k16 from \"@noble/secp256k1\";\nimport { sha256 as sha2562 } from \"@noble/hashes/sha256\";\nfunction createDelegation(privateKey, parameters) {\n  let conditions = [];\n  if ((parameters.kind || -1) >= 0)\n    conditions.push(`kind=${parameters.kind}`);\n  if (parameters.until)\n    conditions.push(`created_at<${parameters.until}`);\n  if (parameters.since)\n    conditions.push(`created_at>${parameters.since}`);\n  let cond = conditions.join(\"&\");\n  if (cond === \"\")\n    throw new Error(\"refusing to create a delegation without any conditions\");\n  let sighash = sha2562(\n    utf8Encoder.encode(`nostr:delegation:${parameters.pubkey}:${cond}`)\n  );\n  let sig = secp256k16.utils.bytesToHex(\n    secp256k16.schnorr.signSync(sighash, privateKey)\n  );\n  return {\n    from: getPublicKey(privateKey),\n    to: parameters.pubkey,\n    cond,\n    sig\n  };\n}\nfunction getDelegator(event) {\n  let tag = event.tags.find((tag2) => tag2[0] === \"delegation\" && tag2.length >= 4);\n  if (!tag)\n    return null;\n  let pubkey = tag[1];\n  let cond = tag[2];\n  let sig = tag[3];\n  let conditions = cond.split(\"&\");\n  for (let i = 0; i < conditions.length; i++) {\n    let [key, operator, value] = conditions[i].split(/\\b/);\n    if (key === \"kind\" && operator === \"=\" && event.kind === parseInt(value))\n      continue;\n    else if (key === \"created_at\" && operator === \"<\" && event.created_at < parseInt(value))\n      continue;\n    else if (key === \"created_at\" && operator === \">\" && event.created_at > parseInt(value))\n      continue;\n    else\n      return null;\n  }\n  let sighash = sha2562(\n    utf8Encoder.encode(`nostr:delegation:${event.pubkey}:${cond}`)\n  );\n  if (!secp256k16.schnorr.verifySync(sig, sighash, pubkey))\n    return null;\n  return pubkey;\n}\n\n// nip57.ts\nvar nip57_exports = {};\n__export(nip57_exports, {\n  getZapEndpoint: () => getZapEndpoint,\n  makeZapReceipt: () => makeZapReceipt,\n  makeZapRequest: () => makeZapRequest,\n  useFetchImplementation: () => useFetchImplementation2,\n  validateZapRequest: () => validateZapRequest\n});\nimport { bech32 as bech322 } from \"@scure/base\";\nvar _fetch2;\ntry {\n  _fetch2 = fetch;\n} catch {\n}\nfunction useFetchImplementation2(fetchImplementation) {\n  _fetch2 = fetchImplementation;\n}\nasync function getZapEndpoint(metadata) {\n  try {\n    let lnurl = \"\";\n    let { lud06, lud16 } = JSON.parse(metadata.content);\n    if (lud06) {\n      let { words } = bech322.decode(lud06, 1e3);\n      let data = bech322.fromWords(words);\n      lnurl = utf8Decoder.decode(data);\n    } else if (lud16) {\n      let [name, domain] = lud16.split(\"@\");\n      lnurl = `https://${domain}/.well-known/lnurlp/${name}`;\n    } else {\n      return null;\n    }\n    let res = await _fetch2(lnurl);\n    let body = await res.json();\n    if (body.allowsNostr && body.nostrPubkey) {\n      return body.callback;\n    }\n  } catch (err) {\n  }\n  return null;\n}\nfunction makeZapRequest({\n  profile,\n  event,\n  amount,\n  relays,\n  comment = \"\"\n}) {\n  if (!amount)\n    throw new Error(\"amount not given\");\n  if (!profile)\n    throw new Error(\"profile not given\");\n  let zr = {\n    kind: 9734,\n    created_at: Math.round(Date.now() / 1e3),\n    content: comment,\n    tags: [\n      [\"p\", profile],\n      [\"amount\", amount.toString()],\n      [\"relays\", ...relays]\n    ]\n  };\n  if (event) {\n    zr.tags.push([\"e\", event]);\n  }\n  return zr;\n}\nfunction validateZapRequest(zapRequestString) {\n  let zapRequest;\n  try {\n    zapRequest = JSON.parse(zapRequestString);\n  } catch (err) {\n    return \"Invalid zap request JSON.\";\n  }\n  if (!validateEvent(zapRequest))\n    return \"Zap request is not a valid Nostr event.\";\n  if (!verifySignature(zapRequest))\n    return \"Invalid signature on zap request.\";\n  let p = zapRequest.tags.find(([t, v]) => t === \"p\" && v);\n  if (!p)\n    return \"Zap request doesn't have a 'p' tag.\";\n  if (!p[1].match(/^[a-f0-9]{64}$/))\n    return \"Zap request 'p' tag is not valid hex.\";\n  let e = zapRequest.tags.find(([t, v]) => t === \"e\" && v);\n  if (e && !e[1].match(/^[a-f0-9]{64}$/))\n    return \"Zap request 'e' tag is not valid hex.\";\n  let relays = zapRequest.tags.find(([t, v]) => t === \"relays\" && v);\n  if (!relays)\n    return \"Zap request doesn't have a 'relays' tag.\";\n  return null;\n}\nfunction makeZapReceipt({\n  zapRequest,\n  preimage,\n  bolt11,\n  paidAt\n}) {\n  let zr = JSON.parse(zapRequest);\n  let tagsFromZapRequest = zr.tags.filter(\n    ([t]) => t === \"e\" || t === \"p\" || t === \"a\"\n  );\n  let zap = {\n    kind: 9735,\n    created_at: Math.round(paidAt.getTime() / 1e3),\n    content: \"\",\n    tags: [\n      ...tagsFromZapRequest,\n      [\"bolt11\", bolt11],\n      [\"description\", zapRequest]\n    ]\n  };\n  if (preimage) {\n    zap.tags.push([\"preimage\", preimage]);\n  }\n  return zap;\n}\n\n// index.ts\nimport * as secp256k17 from \"@noble/secp256k1\";\nimport { hmac } from \"@noble/hashes/hmac\";\nimport { sha256 as sha2563 } from \"@noble/hashes/sha256\";\nsecp256k17.utils.hmacSha256Sync = (key, ...msgs) => hmac(sha2563, key, secp256k17.utils.concatBytes(...msgs));\nsecp256k17.utils.sha256Sync = (...msgs) => sha2563(secp256k17.utils.concatBytes(...msgs));\nexport {\n  Kind,\n  SimplePool,\n  finishEvent,\n  fakejson_exports as fj,\n  generatePrivateKey,\n  getBlankEvent,\n  getEventHash,\n  getPublicKey,\n  matchFilter,\n  matchFilters,\n  nip04_exports as nip04,\n  nip05_exports as nip05,\n  nip06_exports as nip06,\n  nip19_exports as nip19,\n  nip26_exports as nip26,\n  nip57_exports as nip57,\n  relayInit,\n  serializeEvent,\n  signEvent,\n  utils_exports as utils,\n  validateEvent,\n  verifySignature\n};\n", "import { Event, SimplePool } from 'nostr-tools';\n\n// Use a singleton pattern for the SimplePool to reuse connections\nconst pool = new SimplePool();\n\n// Track active connections to avoid duplicate connections\nconst activeRelays = new Set<string>();\n\n/**\n * Request events from specified relays with improved connection management\n * @param pubkeys - Array of public keys to filter events by\n * @param eventProcesser - Callback function to process events\n * @param relays - Array of relay URLs\n * @param kinds - Array of event kinds to filter by\n * @returns Promise that resolves when EOSE is received\n */\nexport const requestEventsFromRelays = async (\n  pubkeys: string[],\n  eventProcesser: (event: Event) => void,\n  relays: string[],\n  kinds: number[],\n) => {\n  // Filter out duplicate relays\n  const uniqueRelays = [...new Set(relays)];\n  \n  // Create subscription\n  const sub = pool.sub(\n    uniqueRelays,\n    [{\n      kinds,\n      authors: pubkeys,\n    }],\n  );\n\n  // Process events and resolve on EOSE\n  return new Promise<void>((r) => {\n    sub.on('event', (event: Event) => {\n      if (\n        pubkeys.indexOf(event.pubkey) !== -1\n        && kinds.indexOf(event.kind) !== -1\n      ) {\n        eventProcesser(event);\n      }\n    });\n    \n    sub.on('eose', () => {\n      // Close subscription but keep pool connections alive for reuse\n      sub.unsub();\n      r();\n    });\n  });\n};\n\n/**\n * Publish an event to specified relays with improved error handling\n * @param event - The event to publish\n * @param relays - Array of relay URLs to publish to\n * @returns Promise that resolves to true if successful, false otherwise\n */\nexport const publishEventToRelay = async (event: Event, relays: string[]): Promise<boolean> => {\n  // Filter out duplicate relays\n  const uniqueRelays = [...new Set(relays)];\n  \n  try {\n    const pub = pool.publish(uniqueRelays, event);\n    return new Promise((r) => {\n      // Set a timeout to prevent hanging if relays don't respond\n      const timeout = setTimeout(() => r(false), 10000);\n      \n      pub.on('ok', () => {\n        clearTimeout(timeout);\n        r(true);\n      });\n      \n      pub.on('failed', () => {\n        clearTimeout(timeout);\n        r(false);\n      });\n    });\n  } catch (error) {\n    console.error(\"Error publishing event:\", error);\n    return false;\n  }\n};\n\n/**\n * Close all connections in the pool when they're no longer needed\n * (e.g., when switching pages or logging out)\n */\nexport const closeAllConnections = (): void => {\n  pool.close();\n  activeRelays.clear();\n};", "import { Event, UnsignedEvent } from 'nostr-tools';\nimport { sanitize } from 'isomorphic-dompurify';\nimport { localStorageGetItem, localStorageSetItem } from './LocalStorage';\nimport { publishEventToRelay, requestEventsFromRelays } from './RelayManagement';\n\n// In-memory cache to reduce localStorage reads/writes\nconst eventCache: {[key: string]: Event[]} = {};\nconst profileCache: {[pubkey: string]: {[kind: number]: Event}} = {};\n\n/**\n * Check when events were last fetched from relays\n * @returns Timestamp of last fetch or null if never fetched\n */\nexport const lastFetchDate = (): number | null => {\n  const d = localStorageGetItem('my-profile-last-fetch-date');\n  if (d === null) return null;\n  return Number(d);\n};\n\n// Track if we've fetched data in the current session\nlet fetchedthissession: boolean = false;\n\n/**\n * Update the timestamp of the last fetch from relays\n */\nexport const updateLastFetchDate = (): void => {\n  fetchedthissession = true;\n  localStorageSetItem('my-profile-last-fetch-date', Date.now().toString());\n};\n\n/**\n * Check when profile was last updated\n * @returns Timestamp of last update or null if never updated\n */\nexport const lastUpdateDate = (): number | null => {\n  const d = localStorageGetItem('my-profile-last-update-date');\n  if (d === null) return null;\n  return Number(d);\n};\n\n/**\n * Update the timestamp of the last profile update\n */\nexport const updateLastUpdateDate = (): void => {\n  localStorageSetItem('my-profile-last-update-date', Date.now().toString());\n};\n\n/**\n * Check if profile data is up-to-date in this session\n * @returns True if data has been fetched in this session\n */\nexport const isUptodate = (): boolean => fetchedthissession;\n\n/**\n * Check if we have the latest profile data\n * @returns True if the last fetch happened after the last update (with a 10s buffer)\n */\nexport const hadLatest = (): boolean => {\n  if (!isUptodate()) return false;\n  const f = lastFetchDate();\n  const u = lastUpdateDate();\n  return !(u === null || f === null || u > (f - 10000));\n};\n\n/**\n * Store a profile event in cache and localStorage\n * @param event Event to store\n * @returns true if stored, false if duplicate, wrong kind or wrong pubkey\n */\nexport const storeMyProfileEvent = (event: Event): boolean => {\n  // Throw if no pubkey in localStorage\n  if (localStorageGetItem('pubkey') === null) {\n    throw new Error('storeMyProfileEvent no pubkey in localStorage');\n  }\n  \n  // Return false if unsupported kind or from a different pubkey\n  if (\n    !(event.kind === 0 || event.kind === 2 || event.kind === 10002 || event.kind === 3)\n    || event.pubkey !== localStorageGetItem('pubkey')\n  ) return false;\n\n  const arrayname = `my-profile-event-${event.kind}`;\n  \n  // Initialize cache if needed\n  if (!eventCache[arrayname]) {\n    const ls = localStorageGetItem(arrayname);\n    eventCache[arrayname] = ls === null ? [] : JSON.parse(ls) as Event[];\n  }\n  \n  // Check if event already exists in cache\n  if (eventCache[arrayname].some((e) => e.id === event.id)) return false;\n  \n  // Add event to cache\n  eventCache[arrayname].push(event);\n  \n  // Efficiently update localStorage\n  localStorageSetItem(arrayname, JSON.stringify(eventCache[arrayname]));\n  \n  // Update last updated date\n  updateLastUpdateDate();\n  \n  return true;\n};\n\n/**\n * Get event history for a given kind from cache\n * @param kind Event kind to retrieve\n * @returns Array of events sorted by creation date, or null if none found\n */\nexport const fetchCachedMyProfileEventHistory = (\n  kind: 0 | 2 | 10002 | 3,\n): null | [Event, ...Event[]] => {\n  // Get array name\n  const arrayname = `my-profile-event-${kind}`;\n  \n  // Use cached data if available\n  if (!eventCache[arrayname]) {\n    const ls = localStorageGetItem(arrayname);\n    // Return null if no events are cached\n    if (ls === null) return null;\n    \n    // Parse and cache events\n    eventCache[arrayname] = JSON.parse(ls) as Event[];\n  }\n  \n  // Return null if the array is empty\n  if (eventCache[arrayname].length === 0) return null;\n  \n  // Return sorted events array\n  return eventCache[arrayname].sort((x, y) => y.created_at - x.created_at) as [Event, ...Event[]];\n};\n\n/**\n * Get the most recent event for a given kind\n * @param kind Event kind to retrieve\n * @returns Most recent event or null if none found\n */\nexport const fetchCachedMyProfileEvent = (kind: 0 | 2 | 10002 | 3): null | Event => {\n  const a = fetchCachedMyProfileEventHistory(kind);\n  if (a === null) return null;\n  return a[0];\n};\n\n/**\n * Get relays from kind 10002 event or use defaults\n * @returns Array of relay URLs\n */\nconst getRelays = () => {\n  const e = fetchCachedMyProfileEvent(10002);\n  const myrelays = !e ? [] : e.tags.filter(t => t[0] === 'r').map((r) => r[1]);\n  \n  // Return minimum of 3 relays, filling in with default relays (removing duplicates)\n  return myrelays.length > 3 ? myrelays : [...new Set([\n    ...myrelays,\n    'wss://hist.nostr.land',\n    'wss://relay.damus.io',\n    'wss://nostr-pub.wellorder.net',\n    'wss://purplepag.es',\n    'wss://relay.nos.social',\n    'wss://relay.nostr.band',\n    'wss://relay.snort.social',\n  ])].slice(0, 3);\n};\n\n/**\n * Fetch profile events from relays or cache\n * @param pubkey Public key to fetch events for\n * @param profileEventProcesser Callback function to process events\n */\nexport const fetchMyProfileEvents = async (\n  pubkey: string,\n  profileEventProcesser: (event: Event) => void,\n): Promise<void> => {\n  // Skip fetching if data is up-to-date\n  if (!isUptodate()) {\n    const starterRelays = getRelays();\n    let additionalRelaysFound = false;\n    \n    // Fetch events from relays\n    await requestEventsFromRelays([pubkey], (event: Event) => {\n      // Track if we find additional write relays\n      if (event.kind === 10002) {\n        const existingRelays = new Set(starterRelays);\n        const newWriteRelays = event.tags\n          .filter(t => t[0] === 'r' && (!t[2] || t[2] === 'write'))\n          .map(t => t[1])\n          .filter(relay => !existingRelays.has(relay));\n          \n        if (newWriteRelays.length > 0) {\n          additionalRelaysFound = true;\n        }\n      }\n      \n      // Store event and process it\n      storeMyProfileEvent(event);\n      profileEventProcesser(event);\n    }, starterRelays, [0, 2, 10002, 3]);\n    \n    // Fetch again with expanded relay list if needed\n    if (additionalRelaysFound) {\n      const newRelayList = getRelays(); // This will now include any new relays found\n      \n      // Only fetch again if we have a different relay list\n      if (JSON.stringify(newRelayList) !== JSON.stringify(starterRelays)) {\n        await requestEventsFromRelays([pubkey], (event: Event) => {\n          storeMyProfileEvent(event);\n          profileEventProcesser(event);\n        }, newRelayList, [0, 2, 10002, 3]);\n      }\n    }\n    \n    // Update last fetch timestamp\n    updateLastFetchDate();\n  } else {\n    // Load from cache\n    [0, 2, 10002, 3].forEach((k) => {\n      const e = fetchCachedMyProfileEvent(k as 0 | 2 | 10002 | 3);\n      if (e !== null) profileEventProcesser(e);\n    });\n  }\n};\n\n/**\n * Store user profile events in memory cache\n * @param event Event to store\n */\nconst storeProfileEvent = (event: Event) => {\n  if (!profileCache[event.pubkey]) profileCache[event.pubkey] = {};\n  if (\n    // No event of kind for pubkey\n    !profileCache[event.pubkey][event.kind]\n    // Newer event of kind received\n    || profileCache[event.pubkey][event.kind].created_at < event.created_at\n  ) {\n    // Store it\n    profileCache[event.pubkey][event.kind] = event;\n  }\n};\n\n/**\n * Fetch profile events for all contacts\n */\nexport const fetchMyContactsProfileEvents = async () => {\n  const c = fetchCachedMyProfileEvent(3);\n  if (!c || c.tags.length === 0) return;\n  \n  // Filter for contacts not already in cache\n  const required = c.tags\n    .filter(t => t[0] === 'p')\n    .map(t => t[1])\n    .filter(pubkey => !profileCache[pubkey]);\n  \n  if (required.length > 0) {\n    await requestEventsFromRelays(\n      required,\n      storeProfileEvent,\n      getRelays(),\n      [0, 10002, 3],\n    );\n  }\n};\n\n/**\n * Get cached profile event for a specific pubkey and kind\n * @param pubkey Public key to get event for\n * @param kind Event kind to get\n * @returns Event or null if not found\n */\nexport const fetchCachedProfileEvent = (pubkey: string, kind: 0 | 10002 | 3): Event | null => {\n  if (localStorageGetItem('pubkey') === pubkey) return fetchCachedMyProfileEvent(kind);\n  if (!profileCache[pubkey]) return null;\n  if (!profileCache[pubkey][kind]) return null;\n  return profileCache[pubkey][kind];\n};\n\n/**\n * Get all cached profile events of a specific kind\n * @param kind Event kind to get\n * @returns Array of events\n */\nexport const fetchAllCachedProfileEvents = (\n  kind: 0 | 10002 | 3,\n): Event[] => Object.keys(profileCache)\n  .filter((p) => !!profileCache[p][kind])\n  .map((p) => profileCache[p][kind]);\n\n/**\n * Fetch profile events for multiple pubkeys\n * @param pubkeys Array of public keys\n * @param kind Event kind to fetch\n * @param relays Optional array of relays to use\n * @returns Array of events or nulls\n */\nexport const fetchProfileEvents = async (\n  pubkeys: [string, ...string[]],\n  kind: 0 | 10002 | 3,\n  relays?: string[] | null,\n): Promise<[(Event | null), ...(Event | null)[]]> => {\n  // Filter out pubkeys already in cache\n  const notcached = pubkeys.filter((p) => !fetchCachedProfileEvent(p, kind));\n  \n  if (notcached.length > 0) {\n    await requestEventsFromRelays(\n      notcached,\n      storeProfileEvent,\n      relays || getRelays(),\n      [0, 10002, 3],\n    );\n  }\n  \n  // Return events for all requested pubkeys\n  return pubkeys.map(\n    (p) => fetchCachedProfileEvent(p, kind),\n  ) as [(Event | null), ...(Event | null)[]];\n};\n\n/**\n * Fetch profile event for a single pubkey\n * @param pubkey Public key to fetch event for\n * @param kind Event kind to fetch\n * @param relays Optional array of relays to use\n * @returns Event or null if not found\n */\nexport const fetchProfileEvent = async (\n  pubkey: string,\n  kind: 0 | 10002 | 3,\n  relays?: string[] | null,\n): Promise<Event | null> => {\n  const r = await fetchProfileEvents([pubkey], kind, relays);\n  return r[0];\n};\n\n/**\n * Get the most popular petname for a contact among all contacts\n * @param pubkey Public key to get petname for\n * @returns Sanitized petname or null if none found\n */\nexport const getContactMostPopularPetname = (pubkey: string): string | null => {\n  // Count petnames for this pubkey across all contacts\n  const petnamecounts: { [petname: string]: number } = Object.keys(profileCache)\n    .map((pk) => {\n      if (!profileCache[pk][3]) return null;\n      const petnametag = profileCache[pk][3].tags.find((t) => t[1] === pubkey && t[3]);\n      if (petnametag) return sanitize(petnametag[3]);\n      return null;\n    })\n    .reduce((pv, c) => {\n      if (!c) return pv;\n      if (!pv[c]) return { ...pv, [c]: 1 };\n      return { ...pv, [c]: pv[c] + 1 };\n    }, {} as { [petname: string]: number });\n  \n  if (Object.keys(petnamecounts).length === 0) return null;\n  \n  // Return most frequent petname\n  return sanitize(\n    Object.keys(petnamecounts).sort((a, b) => petnamecounts[b] - petnamecounts[a])[0],\n  );\n};\n\n/**\n * Get my petname for a specific user\n * @param pubkey Public key to get petname for\n * @returns Sanitized petname or null if none found\n */\nexport const getMyPetnameForUser = (pubkey: string): string | null => {\n  const e = fetchCachedMyProfileEvent(3);\n  if (e) {\n    const mypetname = e.tags.find((t) => t[1] === pubkey && t[3]);\n    if (mypetname) return sanitize(mypetname[3]);\n  }\n  return null;\n};\n\n/**\n * Get my relay for a specific user\n * @param pubkey Public key to get relay for\n * @returns Relay URL or null if none found\n */\nexport const getMyRelayForUser = (pubkey: string): string | null => {\n  const e = fetchCachedMyProfileEvent(3);\n  if (e) {\n    const relay = e.tags.find((t) => t[1] === pubkey && t[2] && t[2] !== '');\n    if (relay) return relay[2];\n  }\n  return null;\n};\n\n/**\n * Check if a user is in my contacts\n * @param pubkey Public key to check\n * @returns True if user is a contact, false if not, null if contacts not loaded\n */\nexport const isUserMyContact = (pubkey: string): boolean | null => {\n  const e = fetchCachedMyProfileEvent(3);\n  if (e) {\n    if (e.tags.some((t) => t[1] === pubkey)) return true;\n    return false;\n  }\n  return null;\n};\n\n/**\n * Get sanitized contact name\n * @param pubkey Public key to get name for\n * @returns Sanitized name\n */\nexport const getContactName = (pubkey: string): string => {\n  // Check if it's my own pubkey\n  if (localStorageGetItem('pubkey') === pubkey) {\n    const m = fetchCachedMyProfileEvent(0);\n    if (m) {\n      const { name } = JSON.parse(m.content);\n      if (name) return sanitize(name);\n    }\n  } else {\n    // Check my petname for contact\n    const mypetname = getMyPetnameForUser(pubkey);\n    if (mypetname) return mypetname;\n    \n    // Check their kind 0 name\n    if (profileCache[pubkey]) {\n      if (profileCache[pubkey][0]) {\n        const { name, display_name } = JSON.parse(profileCache[pubkey][0].content);\n        if (name) return sanitize(name);\n        if (display_name) return sanitize(display_name);\n      }\n    }\n  }\n  \n  // Check most popular petname\n  const popularpetname = getContactMostPopularPetname(pubkey);\n  if (popularpetname) return `${popularpetname} (?)`;\n  \n  // Return shortened pubkey\n  return `${pubkey.substring(0, 10)}...`;\n};\n\n/**\n * Publish an event to all relevant relays\n * @param event Event to publish\n * @returns True if successful, false otherwise\n */\nexport const publishEvent = async (event: Event): Promise<boolean> => {\n  storeMyProfileEvent(event);\n  \n  // Get all relevant relays\n  const relays = [\n    ...getRelays(),\n    'wss://nostr.mutinywallet.com', // blastr\n    'wss://purplepag.es',\n    'wss://relay.nos.social',\n    'wss://relay.nostr.band',\n    'wss://relay.snort.social',\n  ];\n  \n  // Use a Set to remove duplicates\n  const uniqueRelays = [...new Set(relays)];\n  \n  return await publishEventToRelay(event, uniqueRelays);\n};\n\n/**\n * Submit an unsigned event for signing and publishing\n * @param e Unsigned event to submit\n * @param ElementId ID of the button or anchor element\n * @param innerHTMLAfterSuccess What the button should read after success\n * @returns True if published, false otherwise\n */\nexport const submitUnsignedEvent = async (\n  e: UnsignedEvent,\n  ElementId: string,\n  innerHTMLAfterSuccess: string = 'Update',\n): Promise<boolean> => {\n  const b = document.getElementById(ElementId) as HTMLButtonElement | HTMLAnchorElement;\n  if (!b) return false;\n  \n  // Set loading status\n  b.setAttribute('disabled', '');\n  b.setAttribute('aria-busy', 'true');\n  b.innerHTML = 'Signing...';\n  \n  // Check if nostr extension is available\n  if (!window.nostr) return new Promise((r) => { r(false); });\n  \n  try {\n    // Sign event\n    const ne = await window.nostr.signEvent(e);\n    \n    // Update button\n    b.innerHTML = 'Sending...';\n    \n    // Publish\n    const r = await publishEvent(ne);\n    \n    // Update button\n    b.removeAttribute('aria-busy');\n    b.innerHTML = 'Received by Relays!';\n    \n    // Reset button after delay\n    setTimeout(() => {\n      b.innerHTML = innerHTMLAfterSuccess;\n      b.removeAttribute('disabled');\n    }, 1000);\n    \n    return r;\n  } catch (error) {\n    console.error(\"Error signing or publishing event:\", error);\n    \n    // Reset button\n    b.removeAttribute('aria-busy');\n    b.removeAttribute('disabled');\n    b.innerHTML = 'Error! Try again';\n    \n    return false;\n  }\n};", null, null, null, null, null, null, null, null, "import * as timeago from 'timeago.js';\nimport { Event } from 'nostr-tools';\nimport { sanitize } from 'isomorphic-dompurify';\nimport { fetchCachedMyProfileEventHistory, getContactName, submitUnsignedEvent } from './fetchEvents';\n\n// Cache for memoizing expensive change calculations\nconst changeCache = new Map<string, VersionChange[]>();\n\nexport type VersionChange = {\n  ago: number;\n  changes: string[];\n  option: string;\n};\n\n/**\n * Generate an HTML table from version changes\n * @param changes Array of version changes\n * @returns HTML string for changes table\n */\nconst generateChangesTable = (changes: VersionChange[]) => `\n    <table role=\"grid\" class=\"historytable\">\n        <tbody>${changes.map((c) => `\n            <tr>\n                <td><small>${timeago.format(c.ago * 1000)}</small></td>\n                <td><ul>${c.changes.map((v) => `<li>${v}</li>`).join('')}</ul></td>\n                <td>${c.option}</td>\n            </tr>\n        `).join('')}\n        </tbody>\n    </table>\n`;\n\n/**\n * Generate metadata changes between events\n * @param history Array of events\n * @returns Array of version changes\n */\nexport const generateMetadataChanges = (\n  history: Event[],\n): VersionChange[] => {\n  // Generate cache key based on event IDs and timestamps\n  const cacheKey = `metadata-${history.map(e => `${e.id.substring(0, 8)}-${e.created_at}`).join('|')}`;\n  \n  // Return cached result if available\n  if (changeCache.has(cacheKey)) {\n    return changeCache.get(cacheKey)!;\n  }\n  \n  const results = history.map((e, i, a) => {\n    const changes: string[] = [];\n    const c = JSON.parse(e.content);\n    const clean = (s: string | number) => (sanitize(\n      typeof s === 'string' ? s.replace(/(\\r\\n|\\n|\\r)/gm, ' ') : s.toString(),\n    ));\n    \n    // If first backup, list all fields and values\n    if (i === a.length - 1) {\n      Object.keys(c).forEach((k) => changes.push(`${k}: ${clean(c[k])}`));\n    } else {\n      const nextc = JSON.parse(a[i + 1].content);\n      \n      // List adds\n      Object.keys(c)\n        .filter((k) => !Object.keys(nextc).some((v) => v === k))\n        .forEach((k) => { changes.push(`added ${k}: ${clean(c[k])}`); });\n      \n      // List modified\n      Object.keys(c)\n        .filter((k) => Object.keys(nextc).some((v) => v === k && nextc[k] !== c[k]))\n        .forEach((k) => { changes.push(`modified ${k}: ${clean(c[k])}`); });\n      \n      // List deletes\n      Object.keys(nextc)\n        .filter((k) => !Object.keys(c).some((v) => v === k))\n        .forEach((k) => {\n          changes.push(\n            `removed ${clean(nextc[k]).length === 0 ? `blank ${k}` : `${k}: ${clean(nextc[k])}`}`,\n          );\n        });\n    }\n    \n    return {\n      ago: e.created_at,\n      changes,\n      option: i === 0\n        ? '<ins>Backup Complete<ins>'\n        : `<a href=\"#\" id=\"restore-${e.kind}-${i}\" class=\"secondary\" onclick=\"event.preventDefault();\">Restore</a>`,\n    };\n  });\n  \n  // Cache the results\n  changeCache.set(cacheKey, results);\n  \n  return results;\n};\n\nexport interface Kind3Event extends Event {\n  kind: 3;\n  tags: ['p', string, string, string][]\n}\n\n/**\n * Check if two contact tags refer to the same contact\n * @param x First contact tag\n * @param y Second contact tag\n * @returns True if they refer to the same contact\n */\nconst sameContact = (\n  x: ['p', string, string, string],\n  y: ['p', string, string, string],\n): boolean => !!(\n  x[1] === y[1]\n  || (x[3] && y[3] && x[3] === y[3])\n);\n\n/**\n * Get display petname for a contact\n * @param a Contact tag\n * @returns HTML string for petname\n */\nconst getPetname = (a: ['p', string, string, string]): string => {\n  if (a[3] && a[3].length > 0) return `<mark>${sanitize(a[3])}</mark>`;\n  return `<mark title=\"${a[1]}\">${getContactName(a[1])}</mark>`;\n};\n\n/**\n * Generate contact changes between events\n * @param history Array of events\n * @returns Array of version changes\n */\nexport const generateContactsChanges = (\n  history: Kind3Event[],\n): VersionChange[] => {\n  // Generate cache key\n  const cacheKey = `contacts-${history.map(e => `${e.id.substring(0, 8)}-${e.created_at}`).join('|')}`;\n  \n  // Return cached result if available\n  if (changeCache.has(cacheKey)) {\n    return changeCache.get(cacheKey)!;\n  }\n  \n  const results = history.map((e, i, a) => {\n    const changes: string[] = [];\n    const current = e.tags.filter((t) => t[0] === 'p');\n    \n    // If first backup, list all contacts\n    if (i === a.length - 1) {\n      changes.push(current.map(getPetname).join(', '));\n    } else {\n      const next = a[i + 1].tags.filter((t) => t[0] === 'p');\n      \n      // List adds\n      const added = current.filter((c) => !next.some((n) => sameContact(c, n)));\n      if (added.length > 0) {\n        changes.push(`<div class=\"added\">added ${added.map(getPetname).join(', ')}</div>`);\n      }\n      \n      // List modifications\n      const modified = current.filter(\n        (c) => next.filter((n) => n[1] === c[1]).some((n) => c[3] !== n[3]),\n      );\n      \n      modified.forEach((r) => {\n        const nv = next.find((n) => n[1] === r[1]);\n        if (!nv) return null;\n        if (!r[3] && !nv[3]) return null;\n        if (r[3] && !nv[3]) return changes.push(`added petname for ${getPetname(r)}`);\n        if (!r[3] && nv[3]) return changes.push(`removed petname for ${getPetname(r)}, previously ${getPetname(nv)}`);\n        return changes.push(`modified petname for ${getPetname(r)}, previously ${getPetname(nv)}`);\n      });\n      \n      // List deletes\n      const removed = next.filter((c) => !current.some((n) => sameContact(c, n)));\n      if (removed.length > 0) {\n        changes.push(`<div class=\"removed\">removed ${removed.map(getPetname).join(', ')}</div>`);\n      }\n    }\n    \n    return {\n      ago: e.created_at,\n      changes,\n      option: i === 0\n        ? '<ins>Backup Complete<ins>'\n        : `<a href=\"#\" id=\"restore-${e.kind}-${i}\" class=\"secondary\" onclick=\"event.preventDefault()\">Restore</a>`,\n    };\n  });\n  \n  // Cache the results\n  changeCache.set(cacheKey, results);\n  \n  return results;\n};\n\nexport type Kind10002Tag = ['r', string] | ['r', string, 'read' | 'write'];\n\nexport interface Kind10002Event extends Event {\n  kind: 3;\n  tags: Kind10002Tag[]\n}\n\n/**\n * Generate a summary string for a relay\n * @param r Relay tag\n * @returns Summary string\n */\nconst summariseRelay = (r: Kind10002Tag): string => r[1] + (r[2] ? ` ${r[2]} only` : '');\n\n/**\n * Generate relay changes between events\n * @param history Array of events\n * @returns Array of version changes\n */\nexport const generateRelayChanges = (\n  history: Kind10002Event[],\n): VersionChange[] => {\n  // Generate cache key\n  const cacheKey = `relays-${history.map(e => `${e.id.substring(0, 8)}-${e.created_at}`).join('|')}`;\n  \n  // Return cached result if available\n  if (changeCache.has(cacheKey)) {\n    return changeCache.get(cacheKey)!;\n  }\n  \n  const results = history.map((e, i, a) => {\n    const changes: string[] = [];\n    const current = e.tags.filter((t) => t[0] === 'r');\n    \n    // If first backup, list all relays\n    if (i === a.length - 1) {\n      current.forEach((r) => changes.push(summariseRelay(r)));\n    } else {\n      const next = a[i + 1].tags;\n      \n      const relayReadAndWrite = (r: Kind10002Tag, addedorremoveed: 'added' | 'removed'): string => {\n        const wonly = `<mark class=\"${addedorremoveed}\">write</mark>`;\n        const ronly = `<mark class=\"${addedorremoveed}\">read</mark>`;\n        const randw = `${ronly} and ${wonly}`;\n        if (!r[2]) return randw;\n        if (r[2] === 'write') return `${wonly} only`;\n        return `${ronly} only`;\n      };\n      \n      // List adds\n      const added = current.filter((c) => !next.some((n) => n[1] === c[1]));\n      if (added.length > 0) {\n        added.forEach((r) => changes.push(\n          `<div>added <mark>${r[1]}</mark> as ${relayReadAndWrite(r, 'added')}</div>`,\n        ));\n      }\n      \n      // List modified\n      const modified = current.filter(\n        (c) => next.filter((n) => n[1] === c[1]).some((n) => c[2] !== n[2]),\n      );\n      \n      modified.forEach((r) => {\n        const nv = next.find((n) => n[1] === r[1]);\n        let s: string;\n        if (!r[2]) {\n          if (!!nv && nv[2] === 'read') s = '<mark class=\"added\">write</mark> as well as read';\n          else s = '<mark class=\"added\">read</mark> as well as write';\n        } else if (r[2] === 'read') {\n          if (!nv) s = 'only read and no longer <mark class=\"removed\">write</mark>';\n          else s = '<mark class=\"added\">read</mark> instead of <mark class=\"removed\">write</mark>';\n        } else if (!nv) s = 'only write and no longer <mark class=\"removed\">read</mark>';\n        else s = '<mark class=\"added\">write</mark> instead of <mark class=\"removed\">read</mark>';\n        changes.push(`<div class=\"modified\">modified <mark>${r[1]}</mark> to ${s}</div>`);\n      });\n      \n      // List deletes\n      const removed = next.filter((c) => !current.some((n) => n[1] === c[1]));\n      if (removed.length > 0) {\n        removed.forEach((r) => changes.push(\n          `<div>removed <mark>${r[1]}</mark> which was ${relayReadAndWrite(r, 'removed')}</div>`,\n        ));\n      }\n    }\n    \n    return {\n      ago: e.created_at,\n      changes,\n      option: i === 0\n        ? '<ins>Backup Complete<ins>'\n        : `<a href=\"#\" id=\"restore-${e.kind}-${i}\" class=\"secondary\" onclick=\"event.preventDefault()\">Restore</a>`,\n    };\n  });\n  \n  // Cache the results\n  changeCache.set(cacheKey, results);\n  \n  return results;\n};\n\n/**\n * Generate HTML for history table\n * @param history Array of events\n * @returns HTML string for history table\n */\nexport const generateHistoryTable = (history: Event[] | null): string => {\n  if (!history || history.length === 0) return '<p>none</p>';\n  \n  let changes: VersionChange[];\n  if (history[0].kind === 0) changes = generateMetadataChanges(history);\n  else if (history[0].kind === 3) changes = generateContactsChanges(history as Kind3Event[]);\n  else if (history[0].kind === 10002) changes = generateRelayChanges(history as Kind10002Event[]);\n  else changes = [];\n  \n  return generateChangesTable(changes);\n};\n\n/**\n * Make contact references in history clickable\n * @param container The container element\n * @param onContactClick Callback function when a contact is clicked\n */\nexport const makeContactsClickable = (\n  container: HTMLElement, \n  onContactClick: (pubkey: string) => void\n): void => {\n  const marks = container.querySelectorAll('mark[title]');\n  \n  marks.forEach(mark => {\n    const titleAttr = mark.getAttribute('title');\n    if (titleAttr && titleAttr.length === 64) {\n      // It's a pubkey\n      const pubkey = titleAttr;\n      mark.classList.add('clickable-contact');\n      \n      mark.addEventListener('click', (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        onContactClick(pubkey);\n      });\n    }\n  });\n};\n\n/**\n * Activate restore buttons for history events\n * @param history Array of events\n * @param afterRestore Callback function to run after restore\n */\nexport const activateRestoreButtons = (history: Event[] | null, afterRestore: () => void): void => {\n  if (!history) return;\n  \n  history.forEach((e, i) => {\n    if (i === 0) return;\n    \n    const eid = `restore-${e.kind}-${i}`;\n    const el = document.getElementById(eid) as HTMLAnchorElement;\n    if (!el) return;\n    \n    const { id, sig, ...unsigned } = e;\n    unsigned.created_at = Math.floor(Date.now() / 1000);\n    \n    el.onclick = async (event) => {\n      event.preventDefault();\n      \n      // Show loading state\n      el.setAttribute('aria-busy', 'true');\n      el.innerHTML = 'Restoring...';\n      \n      const r = await submitUnsignedEvent(unsigned, eid, 'Restored!');\n      \n      if (r) {\n        // Add success indicator\n        const tr = el.closest('tr');\n        if (tr) {\n          const successIndicator = document.createElement('div');\n          successIndicator.className = 'restore-success';\n          successIndicator.innerHTML = '<small>\u2713 Restored</small>';\n          successIndicator.style.color = 'green';\n          tr.appendChild(successIndicator);\n        }\n        \n        setTimeout(afterRestore, 1000);\n      }\n    };\n  });\n};\n\n/**\n * Load backup history into a container\n * @param RootElementID ID of container element\n * @param kind Event kind to load history for\n * @param onContactClick Optional callback for when contacts are clicked\n */\nexport const loadBackupHistory = (\n  RootElementID: string, \n  kind: 0 | 10002 | 3,\n  onContactClick?: (pubkey: string) => void\n) => {\n  const container = document.getElementById(RootElementID);\n  if (!container) return;\n  \n  // Set loading state\n  container.innerHTML = '<h4>Backup History</h4><p aria-busy=\"true\">Loading history...</p>';\n  \n  // Use setTimeout to prevent UI blocking\n  setTimeout(() => {\n    const h = fetchCachedMyProfileEventHistory(kind);\n    const table = generateHistoryTable(h);\n    \n    container.innerHTML = `<h4>Backup History</h4>${table}`;\n    \n    // Make contacts clickable if callback provided\n    if (kind === 3 && onContactClick) {\n      makeContactsClickable(container, onContactClick);\n    }\n    \n    // Add CSS for clickable contacts\n    if (!document.getElementById('contact-history-styles')) {\n      const style = document.createElement('style');\n      style.id = 'contact-history-styles';\n      style.textContent = `\n        .clickable-contact {\n          cursor: pointer;\n          text-decoration: none;\n        }\n        .clickable-contact:hover {\n          text-decoration: underline;\n        }\n        .restore-success {\n          margin-top: 5px;\n        }\n      `;\n      document.head.appendChild(style);\n    }\n    \n    // Activate restore buttons\n    activateRestoreButtons(h, () => {\n      loadBackupHistory(RootElementID, kind, onContactClick);\n    });\n  }, 0);\n};", "import { Event, nip05, nip19 } from 'nostr-tools';\nimport { sanitize } from 'isomorphic-dompurify';\nimport {\n  fetchCachedMyProfileEvent,\n  fetchCachedProfileEvent,\n  fetchProfileEvent,\n  getContactName,\n  isUserMyContact,\n  submitUnsignedEvent,\n} from './fetchEvents';\nimport { Kind3Event, loadBackupHistory } from './LoadHistory';\nimport { localStorageGetItem } from './LocalStorage';\n\n// Constants\nconst DEBOUNCE_DELAY = 300; // ms\n\n// Cache for nip05 lookups to reduce network calls\nconst nip05cache: { [nip05Search: string]: string | null } = {};\nlet nip05Searching = '';\n\n// In-memory DOM cache to reduce element lookups\nconst domCache: { [id: string]: HTMLElement } = {};\n\n/**\n * Get a cached DOM element or query it and cache the result\n * @param id Element ID\n * @returns HTML element or null if not found\n */\nconst getElement = (id: string): HTMLElement | null => {\n  if (!domCache[id]) {\n    const element = document.getElementById(id);\n    if (element) domCache[id] = element;\n    else return null;\n  }\n  return domCache[id];\n};\n\n/**\n * Debounce a function to limit how often it runs\n * @param func Function to debounce\n * @param wait Wait time in ms\n * @returns Debounced function\n */\nconst debounce = (func: Function, wait: number) => {\n  let timeout: ReturnType<typeof setTimeout> | null = null;\n  return function(...args: any[]) {\n    const context = this;\n    if (timeout) clearTimeout(timeout);\n    timeout = setTimeout(() => func.apply(context, args), wait);\n  };\n};\n\n/**\n * Generate HTML for contact details\n * @param pubkey Public key of contact\n * @returns HTML string for contact details\n */\nconst generateContactDetails = (pubkey: string): string => {\n  const e = fetchCachedProfileEvent(pubkey, 0);\n  if (!e) {\n    return `\n      <article>\n        <strong>${getContactName(pubkey)}</strong>\n        <p>loading user metadata...</p>\n      </article>\n    `;\n  }\n  \n  const m = JSON.parse(e.content);\n  const ismycontact = isUserMyContact(pubkey);\n  \n  return `\n    <article>\n      <div>\n        ${m && !!m.picture ? `<img src=\"${sanitize(m.picture)}\" /> ` : ''}\n        <div class=\"contactdetailsmain\">\n          <strong>${getContactName(pubkey)}</strong>\n          ${m.nip05 ? `<small id=\"nip05-${pubkey}\">${sanitize(m.nip05)} </small>` : ''}<span id=\"nip05-${pubkey}-verified\"></span>\n          <div><small>${m.about ? sanitize(m.about) : ''}</small></div>\n        </div>\n      </div>\n      <footer>\n        <div class=\"grid\">\n          <div class=\"contact-actions\">\n            <button id=\"back-to-history-${pubkey}\" class=\"secondary outline\">Back to History</button>\n            ${!ismycontact ? `<button id=\"restore-contact-${pubkey}\" class=\"secondary\">Restore Contact</button>` : ''}\n          </div>\n        </div>\n      </footer>\n    </article>\n  `;\n};\n\n/**\n * Load contact details into the contact details container\n * @param pubkey Public key of contact\n */\nconst loadContactDetails = (pubkey: string): void => {\n  // Get container\n  const container = getElement('contactdetails');\n  if (!container) return;\n  \n  // Load HTML\n  container.innerHTML = generateContactDetails(pubkey);\n  \n  // Scroll to top\n  window.scrollTo(0, 0);\n  \n  // Reload if no kind0 profile found\n  if (!fetchCachedProfileEvent(pubkey, 0)) {\n    setTimeout(() => loadContactDetails(pubkey), 500);\n  }\n  \n  // Check nip05 verification\n  const checkUserNip05 = async () => {\n    const nip05el = getElement(`nip05-${pubkey}`);\n    if (!nip05el) return;\n    \n    const addr = nip05el.innerHTML.trim();\n    \n    // Check cache first\n    if (nip05cache[addr] !== undefined) {\n      const verified = nip05cache[addr] === pubkey;\n      const verifiedEl = getElement(`nip05-${pubkey}-verified`);\n      if (verifiedEl) {\n        verifiedEl.innerHTML = verified ? \n          '<ins>&#10004; verified</ins>' : \n          '<del>&#10004; verified</del>';\n      }\n      return;\n    }\n    \n    // Not in cache, verify\n    let verified = false;\n    try {\n      const r = await nip05.queryProfile(addr);\n      verified = !!r && r.pubkey === pubkey;\n      \n      // Cache the result\n      nip05cache[addr] = verified ? pubkey : null;\n    } catch {\n      nip05cache[addr] = null;\n    }\n    \n    // Update UI\n    const verifiedEl = getElement(`nip05-${pubkey}-verified`);\n    if (verifiedEl) {\n      verifiedEl.innerHTML = verified ? \n        '<ins>&#10004; verified</ins>' : \n        '<del>&#10004; verified</del>';\n    }\n  };\n  \n  // Run nip05 verification\n  checkUserNip05();\n  \n  // Set up back button\n  const backBtn = getElement(`back-to-history-${pubkey}`);\n  if (backBtn) {\n    backBtn.onclick = () => {\n      const contactHistory = getElement('contactsbackuphistory');\n      if (contactHistory) {\n        contactHistory.style.display = 'block';\n      }\n      if (container) {\n        container.innerHTML = '';\n      }\n    };\n  }\n  \n  // Set up restore button for historical contacts\n  const restoreBtn = getElement(`restore-contact-${pubkey}`);\n  if (restoreBtn) {\n    restoreBtn.onclick = async () => {\n      // Get current contacts\n      const ce = fetchCachedMyProfileEvent(3) as Kind3Event;\n      if (!ce) return;\n      \n      // Create tags with the contact to be restored\n      const tags = [...ce.tags];\n      const existingTag = tags.find(t => t[1] === pubkey);\n      \n      if (!existingTag) {\n        // Add new contact\n        tags.push(['p', pubkey, '', '']);\n        \n        await submitUnsignedEvent(\n          {\n            pubkey: localStorageGetItem('pubkey') as string,\n            kind: 3,\n            created_at: Math.floor(Date.now() / 1000),\n            content: '',\n            tags,\n          },\n          `restore-contact-${pubkey}`,\n          'Contact Restored'\n        );\n        \n        // Reload history\n        loadBackupHistory('contactsbackuphistory', 3);\n        \n        // Show success message\n        if (container) {\n          container.innerHTML = `\n            <div class=\"success-message\">\n              <h4>Contact Restored Successfully</h4>\n              <p>The contact has been added back to your contact list.</p>\n              <button id=\"back-to-history\" class=\"secondary outline\">Back to History</button>\n            </div>\n          `;\n          \n          const newBackBtn = getElement('back-to-history');\n          if (newBackBtn) {\n            newBackBtn.onclick = () => {\n              const contactHistory = getElement('contactsbackuphistory');\n              if (contactHistory) {\n                contactHistory.style.display = 'block';\n              }\n              if (container) {\n                container.innerHTML = '';\n              }\n            };\n          }\n        }\n      }\n    };\n  }\n};\n\n/**\n * Process a hex or NIP-19 string to extract pubkey\n * @param s Input string\n * @returns Object with pubkey and relays\n */\nconst processHexOrNip19 = (s: string): { pubkey: string | null; relays: string[] | null } => {\n  let pubkey: string | null = null;\n  let relays: string[] | null = null;\n  \n  // Is it a hex string?\n  const regexhex64 = /^[a-fA-F0-9]{64}$/i;\n  if (regexhex64.test(s)) {\n    pubkey = s;\n    return { pubkey, relays };\n  }\n  \n  // Check for nip19\n  try {\n    const { data, type } = nip19.decode(s) as {\n      type: string, data: {\n        pubkey?: string,\n        relays?: string[];\n      }\n    };\n    \n    if (typeof data === 'string') {\n      if (type === 'npub') pubkey = data;\n      else throw new Error('no pubkey');\n    } else {\n      if (data.pubkey) pubkey = data.pubkey;\n      if (data.relays) relays = data.relays;\n    }\n  } catch {\n    // Parsing failed\n  }\n  \n  return { pubkey, relays };\n};\n\n/**\n * Enhance the history view with custom event handlers\n */\nconst enhanceContactHistory = (): void => {\n  // Find all contact links in the history and make them clickable\n  const history = getElement('contactsbackuphistory');\n  if (!history) return;\n  \n  // Add click handler to contact marks\n  const marks = history.querySelectorAll('mark[title]');\n  marks.forEach(mark => {\n    const titleAttr = mark.getAttribute('title');\n    if (titleAttr && titleAttr.length === 64) {\n      // It's a pubkey\n      const pubkey = titleAttr;\n      mark.style.cursor = 'pointer';\n      \n      mark.addEventListener('click', () => {\n        history.style.display = 'none';\n        loadContactDetails(pubkey);\n      });\n      \n      // Add hover effect\n      mark.addEventListener('mouseover', () => {\n        mark.style.textDecoration = 'underline';\n      });\n      \n      mark.addEventListener('mouseout', () => {\n        mark.style.textDecoration = 'none';\n      });\n    }\n  });\n};\n\n/**\n * Main function to load the contacts page (focused only on history)\n */\nconst LoadContactsPage = (): void => {\n  const container = getElement('PM-container');\n  if (!container) return;\n  \n  // Clear DOM cache to prevent stale references\n  Object.keys(domCache).forEach(key => delete domCache[key]);\n  \n  container.innerHTML = `\n    <div class=\"container\">\n      <div class=\"profile-card\">\n        <h3>Contacts</h3>\n        <p>View and manage your Nostr contacts.</p>\n        <div id=\"contactdetails\"></div>\n      </div>\n      \n      <div class=\"section-card\">\n        <h3>Contact List History</h3>\n        <p>View the history of changes to your contact list. Click on a contact name to view details.</p>\n        <div id=\"contactsbackuphistory\">\n          <div id=\"history-loading\" aria-busy=\"true\">Loading contact history...</div>\n        </div>\n      </div>\n    </div>\n  `;\n  \n  // Load backup history with improved loading indicator\n  setTimeout(() => {\n    const loadingElement = getElement('history-loading');\n    if (loadingElement) loadingElement.remove();\n    \n    loadBackupHistory('contactsbackuphistory', 3, (pubkey) => {\n      const history = getElement('contactsbackuphistory');\n      if (history) history.style.display = 'none';\n      loadContactDetails(pubkey);\n    });\n    \n    // Enhance history after a short delay to ensure it's loaded\n    setTimeout(() => enhanceContactHistory(), 100);\n  }, 0);\n};\n\nexport default LoadContactsPage;", "import { nip05 } from 'nostr-tools';\nimport { sanitize } from 'isomorphic-dompurify';\nimport { fetchCachedMyProfileEvent, submitUnsignedEvent } from './fetchEvents';\nimport { loadBackupHistory } from './LoadHistory';\nimport { localStorageGetItem } from './LocalStorage';\n\ntype MetadataCore = {\n  name: string;\n  picture?: string;\n  about?: string;\n  banner?: string;\n  nip05?: string;\n  lud06?: string;\n  lud16?: string;\n};\n\nexport type MetadataFlex = MetadataCore & {\n  [x: string | number | symbol]: unknown;\n};\n\nconst toTextInput = (prop: string, m: MetadataFlex | null, displayname?: string) => `\n    <label for=\"PM-form-${prop}\">\n        ${displayname || prop}\n        <input\n          type=\"text\"\n          name=\"PM-form-${prop}\"\n          id=\"PM-form-${prop}\"\n          placeholder=\"${displayname || prop}\" ${m && m[prop] ? `value=\"${sanitize(m[prop] as string)}\"` : ''}\n        />\n    </label>\n`;\nconst toTextarea = (prop: string, m: MetadataFlex | null, displayname?: string) => `\n    <label for=\"PM-form-${prop}\">\n      ${displayname || prop}\n      <textarea\n        id=\"PM-form-${prop}\"\n        name=\"PM-form-${prop}\"\n        placeholder=\"${displayname || prop}\"\n      >${m && m[prop] ? sanitize(m[prop] as string) : ''}</textarea>\n    </label>\n`;\n\nconst standardkeys = [\n  'name',\n  'nip05',\n  'about',\n  'picture',\n  'banner',\n  'lud06',\n  'lud16',\n];\n\nconst generateForm = (c: MetadataFlex | null): string => {\n  const customkeys = !c ? [] : Object.keys(c).filter(((k) => !standardkeys.some((s) => s === k)));\n  return `<form id=\"metadatapageform\">\n    <div class=\"section-card\">\n      <div class=\"grid\">\n        ${toTextInput('name', c)}\n        ${toTextInput('nip05', c)}\n      </div>\n      ${toTextarea('about', c)}\n      \n      <div class=\"profile-images mt-2\">\n        <div class=\"mb-2\">\n          <label>Profile Picture</label>\n          <img id=\"metadata-form-picture\" src=\"${c && c.picture ? sanitize(c.picture) : ''}\">\n          ${toTextInput('picture', c)}\n        </div>\n        \n        <div class=\"mb-2\">\n          <label>Banner Image</label>\n          <img id=\"metadata-form-banner\" src=\"${c && c.banner ? sanitize(c.banner) : ''}\">\n          ${toTextInput('banner', c)}\n        </div>\n      </div>\n      \n      <div class=\"lightning-section mt-2\">\n        <h4>Lightning Address</h4>\n        <div class=\"grid\">\n          ${toTextInput('lud06', c, 'lud06 (LNURL)')}\n          ${toTextInput('lud16', c)}\n        </div>\n      </div>\n      \n      ${customkeys.length > 0 ? `\n        <div class=\"custom-fields mt-2\">\n          <h4>Custom Fields</h4>\n          <div class=\"grid\">\n            ${customkeys.map((k) => toTextInput(k, c)).join('')}\n          </div>\n        </div>\n      ` : ''}\n      \n      <div class=\"form-actions mt-3\">\n        <button id=\"metadatasubmitbutton\" type=\"submit\">${c ? 'Update' : 'Save'}</button>\n        <button id=\"metadataresetbutton\" class=\"secondary outline\" type=\"reset\">Reset Form</button>\n      </div>\n    </div>\n  </form>`;\n};\n\nconst SubmitMetadataForm = async () => {\n  // construct and populate new content object with form data. avoid reordering properties\n  const fd = new FormData(document.getElementById('metadatapageform') as HTMLFormElement);\n  const n: { [x: string]: unknown; } = {};\n  const e = fetchCachedMyProfileEvent(0);\n  (e ? [...(Object.keys(JSON.parse(e.content))), ...standardkeys] : standardkeys)\n    .forEach((k) => {\n      const d = fd.get(`PM-form-${k}`);\n      if (d && d !== '') n[k] = d;\n    });\n  // submit event\n  const r = await submitUnsignedEvent(\n    {\n      pubkey: localStorageGetItem('pubkey') as string,\n      kind: 0,\n      created_at: Math.floor(Date.now() / 1000),\n      content: JSON.stringify(n),\n      tags: [],\n    },\n    'metadatasubmitbutton',\n  );\n  // reload history\n  if (r) loadBackupHistory('metadatahistory', 0);\n};\n\nconst loadMetadataForm = (RootElementID: string) => {\n  const e = fetchCachedMyProfileEvent(0);\n  const MetadataContent = !e ? null : JSON.parse(e.content) as MetadataFlex;\n  (document.getElementById(RootElementID) as HTMLDivElement)\n    .innerHTML = `<div class=\"profileform\">\n    <h3>Metadata</h3>\n    ${generateForm(MetadataContent)}\n  </div>`;\n  // refresh picture and banner on change event\n  ['picture', 'banner'].forEach((n) => {\n    const input = document.getElementById(`PM-form-${n}`) as HTMLInputElement;\n    input.onchange = () => {\n      (document.getElementById(`metadata-form-${n}`) as HTMLImageElement)\n        .setAttribute('src', input.value);\n    };\n  });\n  // check nip05\n  const nip05input = document.getElementById('PM-form-nip05') as HTMLInputElement;\n  const checkNip05 = async () => {\n    if (nip05input.value === '') {\n      nip05input.removeAttribute('aria-invalid');\n    } else {\n      let verified: boolean = false;\n      try {\n        const r = await nip05.queryProfile(nip05input.value);\n        verified = !!r && r.pubkey === localStorageGetItem('pubkey');\n      } catch { /* empty */ }\n      nip05input.setAttribute('aria-invalid', verified ? 'false' : 'true');\n    }\n  };\n  checkNip05();\n  nip05input.onchange = checkNip05;\n  // form submit event\n  (document.getElementById('metadatasubmitbutton') as HTMLButtonElement).onclick = (event) => {\n    SubmitMetadataForm();\n    event.preventDefault();\n  };\n  // reset form\n  (document.getElementById('metadataresetbutton') as HTMLButtonElement).onclick = (event) => {\n    loadMetadataForm(RootElementID);\n    event.preventDefault();\n  };\n};\n\nexport const LoadMetadataPage = () => {\n  const o: HTMLElement = document.getElementById('PM-container') as HTMLElement;\n  o.innerHTML = `\n    <div class=\"container\">\n      <div class=\"profile-card\">\n        <h3>Metadata</h3>\n        <p>Edit your profile information and customize how others see you on Nostr.</p>\n        <div id=\"metadataformcontainer\"></div>\n      </div>\n      \n      <div class=\"section-card\">\n        <h3>Backup History</h3>\n        <p>View your profile's history and restore previous versions if needed.</p>\n        <div id=\"metadatahistory\"></div>\n      </div>\n    </div>\n  `;\n  loadMetadataForm('metadataformcontainer');\n  loadBackupHistory('metadatahistory', 0);\n};", "import { fetchCachedMyProfileEvent, submitUnsignedEvent } from './fetchEvents';\nimport { Kind10002Event, Kind10002Tag, loadBackupHistory } from './LoadHistory';\nimport { localStorageGetItem } from './LocalStorage';\n\n// Generate a row for each relay\nconst generateRelayRow = (index: number, tag?: Kind10002Tag): string => `\n  <div class=\"relay-row\">\n    <div class=\"relay-url\">\n      ${tag ? tag[1] : '<input type=\"text\" name=\"PM-form-relay-new-address\" id=\"PM-form-relay-new-address\" placeholder=\"wss://...\" />'}\n    </div>\n    <div class=\"relay-permissions\">\n      <label>\n        <input\n          type=\"checkbox\"\n          id=\"PM-form-relay-${index}-read\"\n          name=\"PM-form-relay-${index}-read\"\n          ${!tag || !tag[2] || tag[2] === 'read' ? 'checked=\"checked\"' : ''}\n        >\n        <span>read</span>\n      </label>\n      <label>\n        <input\n          type=\"checkbox\"\n          id=\"PM-form-relay-${index}-write\"\n          name=\"PM-form-relay-${index}-write\"\n          ${!tag || !tag[2] || tag[2] === 'write' ? 'checked=\"checked\"' : ''}\n        >\n        <span>write</span>\n      </label>\n    </div>\n    <div class=\"relay-actions\">\n      <button \n        type=\"button\" \n        class=\"remove-btn\" \n        onclick=\"document.getElementById('relay-row-${index}').remove();\"\n      >\n        REMOVE\n      </button>\n    </div>\n  </div>\n`;\n\n// Generate the relay form\nconst generateRelayForm = (event: Kind10002Event | null): string => `\n  <form id=\"relaysform\" class=\"relays-form\">\n    <div id=\"relay-list\">\n      ${!event ? '' : event.tags.map((a, i) => `<div id=\"relay-row-${i}\">${generateRelayRow(i, a)}</div>`).join('')}\n      <div id=\"new-relay-row\"></div>\n    </div>\n    <div class=\"form-actions\">\n      <button id=\"relaysaddbutton\" type=\"button\" class=\"add-btn\">+ ADD RELAY</button>\n      <div class=\"button-group mt-2\">\n        <button id=\"relayssubmitbutton\" type=\"button\">${event ? 'UPDATE' : 'SAVE'}</button>\n        <button id=\"relaysresetbutton\" class=\"secondary outline\" type=\"reset\">RESET</button>\n      </div>\n    </div>\n  </form>\n`;\n\n// Submit relay form\nconst SubmitRelayForm = async () => {\n  // Collect data from form\n  const relayRows = document.querySelectorAll('.relay-row');\n  const tags: Kind10002Tag[] = [];\n  \n  relayRows.forEach((row, i) => {\n    let url: string | null = null;\n    const urlElement = row.querySelector('.relay-url input') as HTMLInputElement;\n    \n    // Get URL from input or text content\n    if (urlElement) {\n      url = urlElement.value.trim();\n    } else {\n      url = (row.querySelector('.relay-url') as HTMLElement).textContent?.trim() || null;\n    }\n    \n    if (!url || url === '') return;\n    \n    // Get permissions\n    const readChecked = (row.querySelector(`#PM-form-relay-${i}-read`) as HTMLInputElement)?.checked;\n    const writeChecked = (row.querySelector(`#PM-form-relay-${i}-write`) as HTMLInputElement)?.checked;\n    \n    // Create tag based on permissions\n    const base: Kind10002Tag = ['r', url];\n    if (readChecked && writeChecked) {\n      tags.push(base);\n    } else {\n      tags.push(['r', url, readChecked ? 'read' : 'write'] as Kind10002Tag);\n    }\n  });\n  \n  // Submit event\n  await submitUnsignedEvent(\n    {\n      pubkey: localStorageGetItem('pubkey') as string,\n      kind: 10002,\n      created_at: Math.floor(Date.now() / 1000),\n      content: '',\n      tags,\n    },\n    'relayssubmitbutton',\n  );\n  \n  // Reload history\n  loadBackupHistory('relaysbackuphistory', 10002);\n};\n\n// Load relay form\nconst loadRelayForm = (RootElementID: string) => {\n  const container = document.getElementById(RootElementID) as HTMLDivElement;\n  if (!container) return;\n  \n  // Insert form HTML\n  container.innerHTML = `<div class=\"relayform\">\n    <h3>RELAYS_</h3>\n    ${generateRelayForm(fetchCachedMyProfileEvent(10002) as Kind10002Event)}\n  </div>`;\n  \n  // Set up form submit event\n  const submitBtn = document.getElementById('relayssubmitbutton') as HTMLButtonElement;\n  if (submitBtn) {\n    submitBtn.onclick = (event) => {\n      SubmitRelayForm();\n      event.preventDefault();\n    };\n  }\n  \n  // Set up reset form\n  const resetBtn = document.getElementById('relaysresetbutton') as HTMLButtonElement;\n  if (resetBtn) {\n    resetBtn.onclick = (event) => {\n      loadRelayForm(RootElementID);\n      event.preventDefault();\n    };\n  }\n  \n  // Set up add relay button\n  const addBtn = document.getElementById('relaysaddbutton') as HTMLButtonElement;\n  if (addBtn) {\n    addBtn.onclick = (event) => {\n      const newRelayRow = document.getElementById('new-relay-row') as HTMLElement;\n      if (newRelayRow) {\n        const count = document.querySelectorAll('.relay-row').length;\n        const div = document.createElement('div');\n        div.id = `relay-row-${count}`;\n        div.innerHTML = generateRelayRow(count);\n        newRelayRow.before(div);\n      }\n      event.preventDefault();\n    };\n  }\n};\n\n// Main function to load relays page\nconst LoadRelaysPage = () => {\n  const container = document.getElementById('PM-container') as HTMLElement;\n  if (!container) return;\n  \n  container.innerHTML = `\n    <div class=\"container\">\n      <div id=\"relayforcontainer\"></div>\n      <div class=\"section-card mt-3\">\n        <h3>RELAY HISTORY_</h3>\n        <div id=\"relaysbackuphistory\"></div>\n      <div>\n    </div>\n  `;\n  \n  loadRelayForm('relayforcontainer');\n  loadBackupHistory('relaysbackuphistory', 10002);\n};\n\nexport default LoadRelaysPage;", "import { Event } from 'nostr-tools';\nimport {\n  fetchCachedMyProfileEvent, fetchCachedMyProfileEventHistory, hadLatest, isUptodate,\n} from './fetchEvents';\nimport LoadContactsPage from './LoadContactsPage';\nimport { LoadMetadataPage, MetadataFlex } from './LoadMetadataPage';\nimport LoadRelaysPage from './LoadRelaysPage';\n\nexport const generateLogoHero = () => (\n  '<div class=\"text-center\"><img class=\"hero-logo\" src=\"./img/nostr-profile-manage-logo.png\"></div>'\n);\n\nconst injectLoading = (loading: boolean = true) => `${loading ? 'aria-busy=\"true\"' : ''}`;\n\nconst generateMetadataSummary = (e: Event | null, loading = false) => {\n  if (e == null) {\n    return `<div>\n      <button ${injectLoading(loading)} class=\"outline contrast\">No Metadata</button>\n    </div>`;\n  }\n  return `<div>\n    <button\n      ${injectLoading(loading)}\n      class=\"outline\"\n      id=\"metadatabutton\"\n    >\n      ${Object.keys(JSON.parse(e.content)).length} Metadata Fields\n    </button>\n  </div>`;\n};\n\nconst generateContactsSummary = (e: Event | null, loading = false) => {\n  if (e == null) {\n    return `<div><button\n      ${injectLoading(loading)}\n      id=\"contactsbutton\"\n    >No Contacts</button></div>`;\n  }\n  return `<div>\n    <button\n      ${injectLoading(loading)}\n      id=\"contactsbutton\"\n    >${e.tags.length} Contacts</button>\n  </div>`;\n};\n\nconst generateRelaysSummary = (e: Event | null, loading = false) => {\n  if (e == null) {\n    return `<div>\n      <button\n        ${injectLoading(loading)}\n        id=\"relaysbutton\"\n        class=\"outline secondary\"\n      >No Relays</button>\n    </div>`;\n  }\n  const read = e.tags.filter((t) => typeof t[2] === 'undefined' || t[2] === 'read').length;\n  const write = e.tags.filter((t) => typeof t[2] === 'undefined' || t[2] === 'write').length;\n  return `<div><button\n    ${injectLoading(loading)}\n    id=\"relaysbutton\"\n    class=\"outline secondary\"\n  >\n    ${e.tags.length} Relay${e.tags.length === 1 ? '' : 's'} (${read} read ${write} write)\n    </button></div>`;\n};\n\nconst generateMetadataHeader = (e: Event) => {\n  const c = JSON.parse(e.content) as MetadataFlex;\n  // remove new lines from about\n  let about = c.about ? c.about.replace(/\\r?\\n|\\r/, '') : '';\n  if (about.length > 50) about = `${about.substring(0, 47)}...`;\n  return `\n    <div class=\"profile-header\">\n      <img src=\"${c.picture ? c.picture : './img/nostr-profile-manage-logo.png'}\" alt=\"Profile picture\">\n      <div class=\"profile-info\">\n        <h2>${c.name ? c.name : 'Anonymous'}</h2>\n        ${c.nip05 ? `<p>${c.nip05}</p>` : ''}\n        ${about ? `<p>${about}</p>` : ''}\n      </div>\n    </div>\n  `;\n};\n\nexport const generateBackupHeroHeading = (\n  uptodate: boolean,\n  noprofileinfo: boolean,\n  hadlatest: boolean,\n) => {\n  let content = '';\n  if (!uptodate) {\n    if (noprofileinfo) {\n      content = `\n        <h1 aria-busy=\"true\">Finding Profile...</h1>\n        <p>It's your first time here and we are backing up your metadata, contacts and relays to your offline browser data.</p>\n      `;\n    } else {\n      content = `\n        <h1 aria-busy=\"true\">Finding Latest Profile...</h1>\n        <p>We are backing up your latest metadata, contacts and relays to your offline browser data.</p>\n      `;\n    }\n  } else if (noprofileinfo) {\n    content = `\n      <h1>No Profile Events Found</h1>\n      <p>We didn't find any profile info for you. Either we didn't look on the right relays or you have just created a key pair.</p>\n      <p>Only proceed if you are setting your profile up for the first time.</p>\n    `;\n  } else if (hadlatest) {\n    content = `\n      <h1>Backup is up to date!</h1>\n      <p>\n        We already had backed up your profile to your offline browser data.\n        <a href=\"#\" class=\"secondary\" id=\"downloadprofile\">Download</a> for safe keeping.\n      </p>\n      <p>If your profile ever gets wiped by a nostr client, come back here on this device to restore. Come back from time to time to update your backup.</p>\n    `;\n  } else {\n    content = `\n      <h1>Profile Backed Up!</h1>\n      <p>\n        We just backed up your latest profile to your offline browser data.\n        <a id=\"downloadprofile\" href=\"#\" class=\"secondary\">Download</a> for safe keeping.\n      </p>\n      <p>If your profile ever gets wiped by a nostr client, come back here on this device to restore. Come back from time to time to update your backup.</p>\n    `;\n  }\n  return `<div class=\"backup-hero\">${content}</div>`;\n};\n\nexport const LoadProfileHome = () => {\n  const noprofileinfo = !fetchCachedMyProfileEvent(0) && !fetchCachedMyProfileEvent(3);\n  const uptodate = isUptodate();\n  const hadlatest = hadLatest();\n  const o: HTMLElement = document.getElementById('PM-container') as HTMLElement;\n  \n  if (noprofileinfo) {\n    o.innerHTML = `\n      <div class=\"container\">\n        <div class=\"profile-card\">\n          <div class=\"hero\">\n            ${generateLogoHero()}\n            ${generateBackupHeroHeading(uptodate, noprofileinfo, hadlatest)}\n          </div>\n        </div>\n      </div>\n    `;\n  } else {\n    o.innerHTML = `\n      <div class=\"container\">\n        <div class=\"profile-card\">\n          ${generateMetadataHeader(fetchCachedMyProfileEvent(0) as Event)}\n          \n          <div class=\"profile-meta\">\n            ${generateMetadataSummary(fetchCachedMyProfileEvent(0), !uptodate)}\n            ${generateContactsSummary(fetchCachedMyProfileEvent(3), !uptodate)}\n            ${generateRelaysSummary(fetchCachedMyProfileEvent(10002), !uptodate)}\n          </div>\n          \n          ${generateBackupHeroHeading(uptodate, noprofileinfo, hadlatest)}\n        </div>\n      </div>\n    `;\n  }\n  \n  const mbutton = document.getElementById('metadatabutton');\n  if (mbutton) mbutton.onclick = () => LoadMetadataPage();\n  const cbutton = document.getElementById('contactsbutton');\n  if (cbutton) cbutton.onclick = () => LoadContactsPage();\n  const rbutton = document.getElementById('relaysbutton');\n  if (rbutton) rbutton.onclick = () => LoadRelaysPage();\n\n  // enable download link\n  const donwloada = document.getElementById('downloadprofile');\n  if (donwloada) {\n    donwloada.onclick = (event) => {\n      event.preventDefault();\n      const jsonStr = JSON.stringify([\n        ...(fetchCachedMyProfileEventHistory(0) || []),\n        ...(fetchCachedMyProfileEventHistory(2) || []),\n        ...(fetchCachedMyProfileEventHistory(10002) || []),\n        ...(fetchCachedMyProfileEventHistory(3) || []),\n      ]);\n      const element = document.createElement('a');\n      element.setAttribute('href', `data:text/plain;charset=utf-8,${encodeURIComponent(jsonStr)}`);\n      element.setAttribute('download', `my-nostr-profile-events-${Date.now()}.json`);\n      element.style.display = 'none';\n      document.body.appendChild(element);\n      element.click();\n      document.body.removeChild(element);\n    };\n  }\n};", "import { Event } from 'nostr-tools';\nimport { sanitize } from 'isomorphic-dompurify';\nimport {\n  fetchCachedMyProfileEventHistory,\n  fetchMyProfileEvents,\n  publishEvent,\n  submitUnsignedEvent\n} from './fetchEvents';\nimport { localStorageGetItem } from './LocalStorage';\nimport * as timeago from 'timeago.js';\n\n/**\n * LoadDeletePage handles the UI and functionality for deleting Nostr events\n * It allows users to view their events and publish deletion requests (kind 5 events)\n */\n\nconst generateEventListItem = (event: Event): string => {\n  // Format the event content for display\n  let displayContent: string;\n  \n  try {\n    // For kind 0 events, display the name field from content JSON\n    if (event.kind === 0) {\n      const content = JSON.parse(event.content);\n      displayContent = `Profile: ${content.name || 'Unnamed'}`;\n    } else if (event.kind === 3) {\n      // For kind 3 (contacts) events, show the number of contacts\n      displayContent = `Contacts: ${event.tags.length} connection${event.tags.length !== 1 ? 's' : ''}`;\n    } else if (event.kind === 10002) {\n      // For kind 10002 (relay list) events, show the number of relays\n      displayContent = `Relays: ${event.tags.length} relay${event.tags.length !== 1 ? 's' : ''}`;\n    } else if (event.content.length > 0) {\n      // For other events with content, show a snippet\n      displayContent = event.content.length > 50 \n        ? `${sanitize(event.content.substring(0, 50))}...` \n        : sanitize(event.content);\n    } else {\n      // For events without content, show a generic label\n      displayContent = `Event (kind: ${event.kind})`;\n    }\n  } catch (e) {\n    // Fallback if there's an error parsing the content\n    displayContent = `Event (kind: ${event.kind})`;\n  }\n\n  // Return an HTML item for this event\n  return `\n    <div class=\"event-item\" data-event-id=\"${event.id}\">\n      <div class=\"event-header\">\n        <span class=\"event-kind\">Kind: ${event.kind}</span>\n        <span class=\"event-date\">${timeago.format(event.created_at * 1000)}</span>\n      </div>\n      <div class=\"event-content\">${displayContent}</div>\n      <div class=\"event-id\"><small>ID: ${event.id}</small></div>\n      <div class=\"event-actions\">\n        <button id=\"delete-btn-${event.id}\" class=\"secondary outline\">Delete Event</button>\n      </div>\n    </div>\n  `;\n};\n\nconst generateEventList = (events: Event[]): string => {\n  if (!events || events.length === 0) {\n    return '<p>No events found.</p>';\n  }\n\n  // Sort events by created_at timestamp in descending order (newest first)\n  const sortedEvents = [...events].sort((a, b) => b.created_at - a.created_at);\n  \n  // Generate the list of events\n  return `\n    <div class=\"event-list\">\n      ${sortedEvents.map(generateEventListItem).join('')}\n    </div>\n  `;\n};\n\nconst generateDeletePage = (events: Event[]): string => {\n  return `\n    <div class=\"container\">\n      <h3>Delete Events</h3>\n      <p>Select events to delete or enter an event ID to delete a specific event. This will publish a deletion request (kind 5) to your relays.</p>\n      \n      <!-- New section for deleting events by ID -->\n      <div class=\"delete-by-id-section\">\n        <h4>Delete Event by ID</h4>\n        <div class=\"grid\">\n          <input type=\"text\" id=\"custom-event-id\" placeholder=\"Enter the event ID (64 character hex)\" />\n          <button id=\"delete-custom-event-btn\" class=\"secondary\">Delete by ID</button>\n        </div>\n        <small>Note: You can only delete events that you authored.</small>\n      </div>\n      \n      <h4>Your Known Events</h4>\n      <div id=\"delete-event-list\">\n        ${generateEventList(events)}\n      </div>\n      <div id=\"delete-status\"></div>\n    </div>\n  `;\n};\n\n/**\n * Validates that an input string is a valid event ID (64 character hex)\n */\nconst isValidEventId = (eventId: string): boolean => {\n  return /^[0-9a-f]{64}$/i.test(eventId);\n};\n\n/**\n * Creates and submits a Nostr deletion event (kind 5)\n * @param eventId - ID of the event to delete\n * @param elementId - ID of the button element that triggered the deletion\n */\nconst createAndSubmitDeletionEvent = async (eventId: string, elementId: string): Promise<boolean> => {\n  // Create an unsigned kind 5 deletion event\n  const unsignedEvent = {\n    kind: 5,\n    pubkey: localStorageGetItem('pubkey') as string,\n    created_at: Math.floor(Date.now() / 1000),\n    content: '', // Optional deletion reason could be added here\n    tags: [\n      ['e', eventId] // The event to delete\n    ]\n  };\n\n  // Use the existing submitUnsignedEvent function to sign and publish\n  return await submitUnsignedEvent(\n    unsignedEvent,\n    elementId,\n    'Deleted'\n  );\n};\n\n/**\n * Adds click event listeners to delete buttons and the custom delete button\n */\nconst setupDeleteButtons = (events: Event[]): void => {\n  // Setup delete buttons for listed events\n  events.forEach(event => {\n    const deleteBtn = document.getElementById(`delete-btn-${event.id}`) as HTMLButtonElement;\n    if (deleteBtn) {\n      deleteBtn.onclick = async () => {\n        // Display confirmation dialog\n        if (confirm(`Are you sure you want to delete this event? This action cannot be undone.`)) {\n          const success = await createAndSubmitDeletionEvent(event.id, `delete-btn-${event.id}`);\n          \n          if (success) {\n            // Update the status area with success message\n            const statusDiv = document.getElementById('delete-status') as HTMLDivElement;\n            statusDiv.innerHTML = `\n              <div class=\"success-message\">\n                <p>Deletion event for event ${event.id.substring(0, 8)}... has been published.</p>\n                <p>Note that it may take some time for relays to process the deletion request.</p>\n              </div>\n            `;\n          }\n        }\n      };\n    }\n  });\n  \n  // Setup the custom delete button\n  const customDeleteBtn = document.getElementById('delete-custom-event-btn') as HTMLButtonElement;\n  if (customDeleteBtn) {\n    customDeleteBtn.onclick = async () => {\n      const eventIdInput = document.getElementById('custom-event-id') as HTMLInputElement;\n      const eventId = eventIdInput.value.trim();\n      const statusDiv = document.getElementById('delete-status') as HTMLDivElement;\n      \n      // Validate the event ID\n      if (!isValidEventId(eventId)) {\n        statusDiv.innerHTML = `\n          <div class=\"error-message\">\n            <p>Invalid event ID format. Event IDs must be 64 hexadecimal characters.</p>\n          </div>\n        `;\n        return;\n      }\n      \n      // Display confirmation dialog\n      if (confirm(`Are you sure you want to delete event ${eventId.substring(0, 8)}...? This action cannot be undone.`)) {\n        const success = await createAndSubmitDeletionEvent(eventId, 'delete-custom-event-btn');\n        \n        if (success) {\n          // Show success message\n          statusDiv.innerHTML = `\n            <div class=\"success-message\">\n              <p>Deletion event for event ${eventId.substring(0, 8)}... has been published.</p>\n              <p>Note that it may take some time for relays to process the deletion request.</p>\n            </div>\n          `;\n          // Clear the input field\n          eventIdInput.value = '';\n        } else {\n          // Show error message\n          statusDiv.innerHTML = `\n            <div class=\"error-message\">\n              <p>Failed to publish deletion event. Please make sure you have permission to delete this event.</p>\n            </div>\n          `;\n        }\n      }\n    };\n  }\n};\n\n/**\n * Gets all events that the user has authored\n */\nconst getAllUserEvents = (): Event[] => {\n  // Get events from multiple kinds\n  const kind0Events = fetchCachedMyProfileEventHistory(0) || [];\n  const kind3Events = fetchCachedMyProfileEventHistory(3) || [];\n  const kind10002Events = fetchCachedMyProfileEventHistory(10002) || [];\n  \n  // Combine all events\n  return [...kind0Events, ...kind3Events, ...kind10002Events];\n};\n\n/**\n * Main function to load the delete page\n */\nconst LoadDeletePage = async (): Promise<void> => {\n  const container = document.getElementById('PM-container') as HTMLElement;\n  \n  // First, ensure we've fetched the latest events\n  const pubkey = localStorageGetItem('pubkey');\n  if (!pubkey) {\n    container.innerHTML = '<p>No public key found. Please log in first.</p>';\n    return;\n  }\n  \n  // Show loading state\n  container.innerHTML = `\n    <div class=\"container\">\n      <h3>Delete Events</h3>\n      <p aria-busy=\"true\">Loading your events...</p>\n    </div>\n  `;\n\n  // Fetch latest events from relays\n  await fetchMyProfileEvents(pubkey, () => {});\n  \n  // Get all user events\n  const allEvents = getAllUserEvents();\n  \n  // Render the delete page\n  container.innerHTML = generateDeletePage(allEvents);\n  \n  // Set up delete buttons\n  setupDeleteButtons(allEvents);\n};\n\nexport default LoadDeletePage;", "import { localStorageClear } from './LocalStorage';\n\nconst Logout = () => {\n  localStorageClear();\n  window.location.href = '/';\n};\n\nexport default Logout;\n", "import { Event, UnsignedEvent } from 'nostr-tools';\nimport { generateLogoHero, LoadProfileHome } from './LoadProfileHome';\nimport { fetchMyContactsProfileEvents, fetchMyProfileEvents } from './fetchEvents';\nimport { localStorageGetItem, localStorageSetItem } from './LocalStorage';\nimport { LoadMetadataPage } from './LoadMetadataPage';\nimport LoadContactsPage from './LoadContactsPage';\nimport LoadRelaysPage from './LoadRelaysPage';\nimport LoadDeletePage from './LoadDeletePage';\nimport Logout from './Logout';\nimport { closeAllConnections } from './RelayManagement';\n\ndeclare global {\n  interface Window {\n    nostr?: {\n      getPublicKey: () => Promise<string>;\n      signEvent: (event: UnsignedEvent) => Promise<Event>;\n    };\n  }\n}\n\n// Track page loading state\nlet isLoading = false;\n\n/**\n * Set page loading state with visual indication\n * @param loading Whether the page is loading\n */\nconst setPageLoading = (loading: boolean): void => {\n  isLoading = loading;\n  \n  // Update loading indicators in the UI\n  const container = document.getElementById('PM-container');\n  if (container && loading) {\n    // Add loading indicator if not already present\n    if (!document.getElementById('page-loading-indicator')) {\n      const loadingIndicator = document.createElement('div');\n      loadingIndicator.id = 'page-loading-indicator';\n      loadingIndicator.setAttribute('aria-busy', 'true');\n      loadingIndicator.style.position = 'fixed';\n      loadingIndicator.style.top = '10px';\n      loadingIndicator.style.right = '10px';\n      container.appendChild(loadingIndicator);\n    }\n  } else if (container && !loading) {\n    // Remove loading indicator if present\n    const indicator = document.getElementById('page-loading-indicator');\n    if (indicator) indicator.remove();\n  }\n};\n\n/**\n * Load user profile and initialize app\n */\nconst loadProfile = async () => {\n  setPageLoading(true);\n  \n  try {\n    // Load profile page (in loading mode)\n    LoadProfileHome();\n    \n    // Enable navigation before data loads for better perceived performance\n    const mainnav = document.getElementById('mainnav');\n    if (mainnav) mainnav.classList.remove('inactive');\n    \n    // Set up navigation handlers\n    const setupNav = (id: string, handler: () => void) => {\n      const element = document.getElementById(id);\n      if (element) {\n        element.onclick = (e) => {\n          e.preventDefault();\n          if (!isLoading) handler();\n        };\n      }\n    };\n    \n    setupNav('navhome', LoadProfileHome);\n    setupNav('navmetadata', LoadMetadataPage);\n    setupNav('navcontacts', LoadContactsPage);\n    setupNav('navrelays', LoadRelaysPage);\n    setupNav('navdelete', LoadDeletePage);\n    setupNav('navlogout', () => {\n      // Close connections before logout\n      closeAllConnections();\n      Logout();\n    });\n    \n    // Load profile data in parallel where possible\n    const loadingTasks = [\n      fetchMyProfileEvents(localStorageGetItem('pubkey') as string, () => {}),\n    ];\n    \n    // Wait for profile data\n    await Promise.all(loadingTasks);\n    \n    // Update UI with loaded data\n    LoadProfileHome();\n    \n    // Continue loading contact data in background\n    fetchMyContactsProfileEvents().catch(err => \n      console.error('Error fetching contacts profile events:', err)\n    );\n  } catch (error) {\n    console.error('Error loading profile:', error);\n    \n    // Show error message\n    const container = document.getElementById('PM-container');\n    if (container) {\n      container.innerHTML = `\n        <div class=\"container\">\n          <h3>Error Loading Profile</h3>\n          <p>There was an error loading your profile. Please try again.</p>\n          <button onclick=\"window.location.reload()\">Reload</button>\n        </div>\n      `;\n    }\n  } finally {\n    setPageLoading(false);\n  }\n};\n/**\n * Load the landing page for new users\n */\nconst LoadLandingPage = () => {\n  const aboutcontent = `\n    <div class=\"container\">\n      <div class=\"profile-card\">\n        <div class=\"hero\">\n          ${generateLogoHero()}\n          <div id=\"herocontent\">\n            <h1 id=\"title-text\">Nostr Profile Manager</h1>\n            <p id=\"subtitle-text\">Secure / Backup / Refine / Delete</p>\n            <a id=\"loadextension\" href=\"#\" onclick=\"return false;\" role=\"button\" class=\"contrast\">Initialize Connection</a>\n          </div>\n        </div>\n      </div>\n      \n      <div class=\"section-card\">\n        <div class=\"grid\">\n          <article>\n            <h4>> Backup</h4>\n            <p class=\"code-font\">Store profile data in local storage. Protect against relay failures.</p>\n          </article>\n          <article>\n            <h4>> Refine</h4>\n            <p class=\"code-font\">Optimize your profile. Configure relays. Manage contact list.</p>\n          </article>\n          <article>\n            <h4>> Restore</h4>\n            <p class=\"code-font\">Recover previous profile states. View backup history.</p>\n          </article>\n          <article>\n            <h4>> Delete</h4>\n            <p class=\"code-font\">Remove unwanted data. Broadcast deletion requests to the network.</p>\n          </article>\n        </div>\n      </div>\n    </div>\n  `;\n  \n  const container = document.getElementById('PM-container');\n  if (!container) return;\n  \n  container.innerHTML = aboutcontent;\n  \n  // Apply typing effect to title and subtitle\n  setTimeout(() => {\n    const titleElement = document.getElementById('title-text');\n    const subtitleElement = document.getElementById('subtitle-text');\n    \n    if (titleElement) {\n      typeWriter(titleElement, \"Nostr Profile Manager\", 50);\n      \n      setTimeout(() => {\n        if (subtitleElement) {\n          typeWriter(subtitleElement, \"Secure / Backup / Refine / Delete\", 30);\n        }\n      }, 2000);\n    }\n  }, 500);\n  \n  const loadButton = document.getElementById('loadextension');\n  if (loadButton) {\n    loadButton.onclick = async (ev) => {\n      ev.preventDefault();\n      \n      if (window.nostr) {\n        try {\n          setPageLoading(true);\n          loadButton.setAttribute('aria-busy', 'true');\n          loadButton.textContent = 'Connecting...';\n          \n          const pubkey = await window.nostr.getPublicKey();\n          localStorageSetItem('pubkey', pubkey);\n          \n          loadProfile();\n        } catch (error) {\n          console.error('Error connecting to Nostr extension:', error);\n          \n          loadButton.removeAttribute('aria-busy');\n          loadButton.textContent = 'Connection Failed. Retry';\n        } finally {\n          setPageLoading(false);\n        }\n      } else {\n        loadButton.outerHTML = `\n          <div class=\"error-message\">\n            <p class=\"code-font\">NIP-07 browser extension not detected.</p>\n            <p class=\"code-font\">Install an extension like nos2x to proceed.</p>\n            <a href=\"https://github.com/nostr-protocol/nips/blob/master/07.md\" role=\"button\" class=\"secondary code-font\">Get Browser Extension</a>\n          </div>\n        `;\n      }\n    };\n  }\n};\n\n/**\n * Initialize the application\n */\nconst load = async () => {\n  // Check if user is logged in\n  if (!localStorageGetItem('pubkey')) {\n    LoadLandingPage();\n  } else {\n    loadProfile();\n  }\n};\n\n// Initialize on page load\nif (document.getElementById('PM-container') !== null) {\n  load();\n} else {\n  document.addEventListener('DOMContentLoaded', () => load());\n}\n\n// Add event listener for page unload to clean up connections\nwindow.addEventListener('beforeunload', () => {\n  closeAllConnections();\n});"],
  "mappings": "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SACA,KACA,OACA,IACA,MACA,QACA,MACA,MACA,QACA,SACA,KACA,OACA,MACA,OACA,UACA,OACA,WACA,QACA,MACA,OACA,KACA,WACA,SACA,SACA,IACA,UACA,MACA,WACA,IACA,KACA,KACA,OACA,IACA,OACA,UACA,SACA,SACA,QACA,SACA,SACA,OACA,SACA,SACA,QACA,MACA,UACA,MACA,QACA,QACA,KACA,WACA,WACA,QACA,KACA,QACA,OACA,KACA,QACA,KACA,IACA,KACA,MACA,QACA,KArHyB,CAAD,EAyHbmE,GAAMnE,EAAO,CACxB,MACA,IACA,WACA,cACA,eACA,eACA,gBACA,mBACA,SACA,WACA,OACA,OACA,UACA,SACA,OACA,IACA,QACA,WACA,QACA,QACA,OACA,iBACA,SACA,OACA,WACA,QACA,OACA,UACA,UACA,WACA,iBACA,OACA,OACA,QACA,SACA,SACA,OACA,WACA,QACA,OACA,QACA,OACA,OA3CwB,CAAD,EA8CZoE,GAAapE,EAAO,CAC/B,UACA,gBACA,sBACA,cACA,mBACA,oBACA,oBACA,iBACA,eACA,UACA,UACA,UACA,UACA,UACA,iBACA,UACA,UACA,cACA,eACA,WACA,eACA,qBACA,cACA,SACA,cAzB+B,CAAD,EAgCnBqE,GAAgBrE,EAAO,CAClC,UACA,gBACA,SACA,UACA,YACA,mBACA,iBACA,gBACA,gBACA,gBACA,QACA,YACA,OACA,eACA,YACA,UACA,gBACA,SACA,MACA,aACA,UACA,KAtBkC,CAAD,EAyBtBsE,GAAStE,EAAO,CAC3B,OACA,WACA,SACA,UACA,QACA,SACA,KACA,aACA,gBACA,KACA,KACA,QACA,UACA,WACA,QACA,OACA,KACA,SACA,QACA,SACA,OACA,OACA,UACA,SACA,MACA,QACA,MACA,SACA,aACA,aA9B2B,CAAD,EAmCfuE,GAAmBvE,EAAO,CACrC,UACA,cACA,aACA,WACA,YACA,UACA,UACA,SACA,SACA,QACA,YACA,aACA,iBACA,cACA,MAfqC,CAAD,EAkBzBwE,GAAOxE,EAAO,CAAC,OAAD,CAAD,ECrRbkE,GAAOlE,EAAO,CACzB,SACA,SACA,QACA,MACA,iBACA,eACA,uBACA,WACA,aACA,UACA,SACA,UACA,cACA,cACA,UACA,OACA,QACA,QACA,QACA,OACA,UACA,WACA,eACA,SACA,cACA,WACA,WACA,UACA,MACA,WACA,0BACA,wBACA,WACA,YACA,UACA,eACA,OACA,MACA,UACA,SACA,SACA,OACA,OACA,WACA,KACA,YACA,YACA,QACA,OACA,QACA,OACA,OACA,UACA,OACA,MACA,MACA,YACA,QACA,SACA,MACA,YACA,WACA,QACA,OACA,QACA,UACA,aACA,SACA,OACA,UACA,UACA,cACA,cACA,SACA,UACA,UACA,aACA,WACA,MACA,WACA,MACA,WACA,OACA,OACA,UACA,aACA,QACA,WACA,QACA,OACA,QACA,OACA,UACA,QACA,MACA,SACA,OACA,QACA,UACA,WACA,QACA,YACA,OACA,SACA,SACA,QACA,QACA,QACA,MA7GyB,CAAD,EAgHbmE,GAAMnE,EAAO,CACxB,gBACA,aACA,WACA,qBACA,SACA,gBACA,gBACA,UACA,gBACA,iBACA,QACA,OACA,KACA,QACA,OACA,gBACA,YACA,YACA,QACA,sBACA,8BACA,gBACA,kBACA,KACA,KACA,IACA,KACA,KACA,kBACA,YACA,UACA,UACA,MACA,WACA,YACA,MACA,OACA,eACA,YACA,SACA,cACA,cACA,gBACA,cACA,YACA,mBACA,eACA,aACA,eACA,cACA,KACA,KACA,KACA,KACA,aACA,WACA,gBACA,oBACA,SACA,OACA,KACA,kBACA,KACA,MACA,IACA,KACA,KACA,KACA,KACA,UACA,YACA,aACA,WACA,OACA,eACA,iBACA,eACA,mBACA,iBACA,QACA,aACA,aACA,eACA,eACA,cACA,cACA,mBACA,YACA,MACA,OACA,QACA,SACA,OACA,MACA,OACA,aACA,SACA,WACA,UACA,QACA,SACA,cACA,SACA,WACA,cACA,OACA,aACA,sBACA,mBACA,eACA,SACA,gBACA,sBACA,iBACA,IACA,KACA,KACA,SACA,OACA,OACA,cACA,YACA,UACA,SACA,SACA,QACA,OACA,kBACA,mBACA,mBACA,eACA,cACA,eACA,cACA,aACA,eACA,mBACA,oBACA,iBACA,kBACA,oBACA,iBACA,SACA,eACA,QACA,eACA,iBACA,WACA,UACA,UACA,YACA,mBACA,cACA,kBACA,iBACA,aACA,OACA,KACA,KACA,UACA,SACA,UACA,aACA,UACA,aACA,gBACA,gBACA,QACA,eACA,OACA,eACA,mBACA,mBACA,IACA,KACA,KACA,QACA,IACA,KACA,KACA,IACA,YAtLwB,CAAD,EAyLZsE,GAAStE,EAAO,CAC3B,SACA,cACA,QACA,WACA,QACA,eACA,cACA,aACA,aACA,QACA,MACA,UACA,eACA,WACA,QACA,QACA,SACA,OACA,KACA,UACA,SACA,gBACA,SACA,SACA,iBACA,YACA,WACA,cACA,UACA,UACA,gBACA,WACA,WACA,OACA,WACA,WACA,aACA,UACA,SACA,SACA,cACA,gBACA,uBACA,YACA,YACA,aACA,WACA,iBACA,iBACA,YACA,UACA,QACA,OArD2B,CAAD,EAwDfyE,GAAMzE,EAAO,CACxB,aACA,SACA,cACA,YACA,aALwB,CAAD,EChWZ0E,GAAgBzE,EAAK,2BAAD,EACpB0E,GAAW1E,EAAK,uBAAD,EACf2E,GAAc3E,EAAK,eAAD,EAClB4E,GAAY5E,EAAK,4BAAD,EAChB6E,GAAY7E,EAAK,gBAAD,EAChB8E,GAAiB9E,EAC5B,2FADgC,EAGrB+E,GAAoB/E,EAAK,uBAAD,EACxBgF,GAAkBhF,EAC7B,6DADiC,EAGtBiF,GAAejF,EAAK,SAAD,yLCOhC,IAAMkF,GAAY,IAAO,OAAOC,OAAW,IAAc,KAAOA,OAU1DC,GAA4B,SAAUC,EAAcC,EAAmB,CAEzE,GAAA,OAAOD,GAAiB,UACxB,OAAOA,EAAaE,cAAiB,WAErC,OAAO,KAMLC,IAAAA,EAAS,KACPC,EAAY,wBACdH,GAAqBA,EAAkBI,aAAaD,CAA/B,IACvBD,E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AA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA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",
  "names": ["entries", "setPrototypeOf", "isFrozen", "getPrototypeOf", "getOwnPropertyDescriptor", "Object", "freeze", "seal", "create", "apply", "construct", "Reflect", "fun", "thisValue", "args", "x", "Func", "arrayForEach", "unapply", "Array", "prototype", "forEach", "arrayPop", "pop", "arrayPush", "push", "stringToLowerCase", "String", "toLowerCase", "stringToString", "toString", "stringMatch", "match", "stringReplace", "replace", "stringIndexOf", "indexOf", "stringTrim", "trim", "regExpTest", "RegExp", "test", "typeErrorCreate", "unconstruct", "TypeError", "func", "thisArg", "_len", "_key", "_len2", "_key2", "addToSet", "set", "array", "transformCaseFunc", "_transformCaseFunc", "l", "length", "element", "lcElement", "clone", "object", "newObject", "property", "value", "lookupGetter", "prop", "desc", "get", "fallbackValue", "console", "warn", "html", "svg", "svgFilters", "svgDisallowed", "mathMl", "mathMlDisallowed", "text", "xml", "MUSTACHE_EXPR", "ERB_EXPR", "TMPLIT_EXPR", "DATA_ATTR", "ARIA_ATTR", "IS_ALLOWED_URI", "IS_SCRIPT_OR_DATA", "ATTR_WHITESPACE", "DOCTYPE_NAME", "getGlobal", "window", "_createTrustedTypesPolicy", "trustedTypes", "purifyHostElement", "createPolicy", "suffix", "ATTR_NAME", "hasAttribute", "getAttribute", "policyName", "createHTML", "createScriptURL", "scriptUrl", "createDOMPurify", "DOMPurify", "root", "version", "VERSION", "removed", "document", "nodeType", "isSupported", "originalDocument", "currentScript", "DocumentFragment", "HTMLTemplateElement", "Node", "Element", "NodeFilter", "NamedNodeMap", "MozNamedAttrMap", "HTMLFormElement", "DOMParser", "ElementPrototype", "cloneNode", "getNextSibling", "getChildNodes", "getParentNode", "template", "createElement", "content", "ownerDocument", "trustedTypesPolicy", "emptyHTML", "implementation", "createNodeIterator", "createDocumentFragment", "getElementsByTagName", "importNode", "hooks", "createHTMLDocument", "undefined", "EXPRESSIONS", "ALLOWED_TAGS", "DEFAULT_ALLOWED_TAGS", "TAGS", "ALLOWED_ATTR", "DEFAULT_ALLOWED_ATTR", "ATTRS", "CUSTOM_ELEMENT_HANDLING", "tagNameCheck", "writable", "configurable", "enumerable", "attributeNameCheck", "allowCustomizedBuiltInElements", "FORBID_TAGS", "FORBID_ATTR", "ALLOW_ARIA_ATTR", "ALLOW_DATA_ATTR", "ALLOW_UNKNOWN_PROTOCOLS", "ALLOW_SELF_CLOSE_IN_ATTR", "SAFE_FOR_TEMPLATES", "WHOLE_DOCUMENT", "SET_CONFIG", "FORCE_BODY", "RETURN_DOM", "RETURN_DOM_FRAGMENT", "RETURN_TRUSTED_TYPE", "SANITIZE_DOM", "SANITIZE_NAMED_PROPS", "SANITIZE_NAMED_PROPS_PREFIX", "KEEP_CONTENT", "IN_PLACE", "USE_PROFILES", "FORBID_CONTENTS", "DEFAULT_FORBID_CONTENTS", "DATA_URI_TAGS", "DEFAULT_DATA_URI_TAGS", "URI_SAFE_ATTRIBUTES", "DEFAULT_URI_SAFE_ATTRIBUTES", "MATHML_NAMESPACE", "SVG_NAMESPACE", "HTML_NAMESPACE", "NAMESPACE", "IS_EMPTY_INPUT", "ALLOWED_NAMESPACES", "DEFAULT_ALLOWED_NAMESPACES", "PARSER_MEDIA_TYPE", "SUPPORTED_PARSER_MEDIA_TYPES", "DEFAULT_PARSER_MEDIA_TYPE", "CONFIG", "formElement", "isRegexOrFunction", "testValue", "Function", "_parseConfig", "cfg", "ADD_URI_SAFE_ATTR", "ADD_DATA_URI_TAGS", "ALLOWED_URI_REGEXP", "ADD_TAGS", "ADD_ATTR", "table", "tbody", "TRUSTED_TYPES_POLICY", "MATHML_TEXT_INTEGRATION_POINTS", "HTML_INTEGRATION_POINTS", "COMMON_SVG_AND_HTML_ELEMENTS", "ALL_SVG_TAGS", "ALL_MATHML_TAGS", "_checkValidNamespace", "parent", "tagName", "namespaceURI", "parentTagName", "Boolean", "_forceRemove", "node", "parentNode", "removeChild", "remove", "_removeAttribute", "name", "attribute", "getAttributeNode", "from", "removeAttribute", "setAttribute", "_initDocument", "dirty", "doc", "leadingWhitespace", "matches", "dirtyPayload", "parseFromString", "documentElement", "createDocument", "innerHTML", "body", "insertBefore", "createTextNode", "childNodes", "call", "_createIterator", "SHOW_ELEMENT", "SHOW_COMMENT", "SHOW_TEXT", "_isClobbered", "elm", "nodeName", "textContent", "attributes", "hasChildNodes", "_isNode", "_executeHook", "entryPoint", "currentNode", "data", "hook", "_sanitizeElements", "allowedTags", "firstElementChild", "_basicCustomElementTest", "childCount", "i", "_isValidAttribute", "lcTag", "lcName", "_sanitizeAttributes", "attr", "hookEvent", "attrName", "attrValue", "keepAttr", "allowedAttributes", "forceKeepAttr", "getAttributeType", "setAttributeNS", "_sanitizeShadowDOM", "fragment", "shadowNode", "shadowIterator", "nextNode", "sanitize", "importedNode", "returnNode", "appendChild", "firstChild", "nodeIterator", "shadowroot", "shadowrootmod", "serializedHTML", "outerHTML", "doctype", "setConfig", "clearConfig", "isValidAttribute", "tag", "addHook", "hookFunction", "removeHook", "removeHooks", "removeAllHooks", "purify", "require_browser", "__commonJSMin", "exports", "module", "localStorageGetItem", "localStorageSetItem", "localStorageClear", "init_LocalStorage", "__esmMin", "key", "value", "weierstrass", "x", "a", "b", "CURVE", "x2", "mod", "x3", "assertJacPoint", "other", "JacobianPoint", "constTimeNegate", "condition", "item", "neg", "sliceDER", "s", "parseDERInt", "data", "bytesToHex", "len", "res", "bytesToNumber", "parseDERSignature", "r", "sBytes", "rBytesLeft", "concatBytes", "arrays", "length", "arr", "result", "i", "pad", "uint8a", "hex", "hexes", "numTo32bStr", "num", "_0n", "POW_2_256", "numTo32b", "hexToBytes", "numberToHexUnpadded", "hexToNumber", "array", "j", "hexByte", "byte", "bytes", "ensureBytes", "normalizeScalar", "isWithinCurveOrder", "pow2", "power", "P", "sqrtMod", "_6n", "_11n", "_22n", "_23n", "_44n", "_88n", "b2", "b3", "b6", "_3n", "b9", "b11", "_2n", "b22", "b44", "b88", "b176", "b220", "b223", "t1", "t2", "rt", "invert", "number", "modulo", "y", "_1n", "u", "v", "q", "m", "n", "invertBatch", "nums", "p", "scratch", "lastMultiplied", "acc", "inverted", "bits2int_2", "delta", "groupLen", "truncateHash", "hash", "truncateOnly", "h", "isValidFieldElement", "kmdToSig", "kBytes", "d", "lowS", "k", "kinv", "Point", "sig", "Signature", "recovery", "normalizePrivateKey", "key", "normalizePublicKey", "publicKey", "normalizeSignature", "signature", "getPublicKey", "privateKey", "isCompressed", "isProbPub", "str", "compressedLen", "uncompressedLen", "getSharedSecret", "privateA", "publicB", "bits2int", "slice", "fieldLen", "bits2octets", "z1", "z2", "int2octets", "initSigArgs", "msgHash", "extraEntropy", "h1", "seedArgs", "utils", "e", "seed", "finalizeSig", "recSig", "opts", "der", "recovered", "hashed", "signSync", "privKey", "drbg", "HmacDrbg", "hashLen", "verify", "vopts", "sinv", "u1", "u2", "R", "schnorrChallengeFinalize", "ch", "schnorrGetPublicKey", "schnorrSign", "msg", "auxRand", "InternalSchnorrSignature", "schnorrSignSync", "initSchnorrVerify", "message", "raw", "SchnorrSignature", "finalizeSchnorrVerify", "schnorrVerify", "TAGS", "schnorrVerifySync", "error", "ShaError", "nodeCrypto", "_8n", "divNearest", "endo", "USE_ENDOMORPHISM", "pointPrecomputes", "_sha256Sync", "_hmacSha256Sync", "schnorr", "crypto", "TAGGED_HASH_PREFIXES", "init_esm", "__esmMin", "a1", "b1", "a2", "POW_2_128", "c1", "c2", "k1", "k2", "k1neg", "k2neg", "z", "points", "toInv", "X1", "Y1", "Z1", "X2", "Y2", "Z2", "Z1Z1", "Z2Z2", "U1", "U2", "S1", "S2", "A", "B", "C", "x1b", "D", "E", "F", "X3", "Y3", "Z3", "H", "HH", "HHH", "V", "scalar", "P0", "k1p", "k2p", "W", "windows", "base", "window", "affinePoint", "precomputes", "f", "windowSize", "mask", "maxNumber", "shiftBy", "offset", "wbits", "offset1", "offset2", "cond1", "cond2", "point", "fake", "f1p", "f2p", "invZ", "is0", "iz1", "iz2", "iz3", "ax", "ay", "zz", "isShort", "y2", "isYOdd", "header", "radj", "rinv", "prefix", "Q", "left", "right", "aP", "bQ", "sum", "name", "HALF", "sHex", "rHex", "sHexL", "rHexL", "sLen", "rLen", "qByteLen", "values", "out", "sl", "priv", "t0h", "k0h", "k0", "rx", "px", "rand", "tag", "t", "minLen", "bytesLength", "randomBytes", "cached", "messages", "buffer", "createHash", "ckey", "createHmac", "tagP", "tagH", "c", "val", "crypto", "init_cryptoBrowser", "__esmMin", "utf8ToBytes", "str", "toBytes", "data", "assertNumber", "n", "assertHash", "hash", "wrapConstructor", "hashConstructor", "hashC", "message", "tmp", "randomBytes", "bytesLength", "crypto", "createView", "rotr", "isLE", "hexes", "nextTick", "Hash", "init_utils", "__esmMin", "init_cryptoBrowser", "arr", "word", "shift", "v", "i", "nodeRequire", "setImmediate", "resolve", "setBigUint64", "view", "byteOffset", "value", "isLE", "_32n", "_u32_max", "wh", "wl", "h", "l", "SHA2", "init_sha2", "__esmMin", "init_utils", "Hash", "blockLen", "outputLen", "padOffset", "createView", "data", "buffer", "finished", "toBytes", "len", "pos", "take", "dataView", "out", "i", "oview", "v", "res", "to", "length", "destroyed", "Chi", "Maj", "SHA256_K", "IV", "SHA256_W", "SHA256", "sha256", "init_sha256", "__esmMin", "init_sha2", "init_utils", "a", "b", "c", "SHA2", "A", "B", "C", "D", "E", "F", "G", "H", "view", "offset", "i", "W15", "W2", "s0", "rotr", "s1", "sigma1", "T1", "T2", "wrapConstructor", "assertNumber", "n", "chain", "args", "wrap", "a", "b", "c", "encode", "acc", "i", "decode", "alphabet", "digits", "input", "letter", "index", "join", "separator", "from", "to", "padding", "bits", "chr", "data", "end", "normalize", "fn", "convertRadix", "pos", "res", "d", "carry", "done", "digit", "digitBase", "convertRadix2", "radix2carry", "mask", "radix", "num", "bytes", "radix2", "revPadding", "unsafeWrapper", "checksum", "len", "payload", "newChecksum", "oldChecksum", "bech32Polymod", "pre", "chk", "POLYMOD_GENERATORS", "bechChecksum", "prefix", "words", "encodingConst", "v", "BECH_ALPHABET", "genBech32", "encoding", "ENCODING_CONST", "_words", "fromWords", "toWords", "fromWordsUnsafe", "limit", "actualLength", "str", "lowered", "sepIndex", "sum", "decodeUnsafe", "decodeToBytes", "gcd", "base16", "base32", "base32hex", "base32crockford", "base64", "base64url", "genBase58", "base58", "base58flickr", "base58xrp", "XMR_BLOCK_LEN", "base58xmr", "base58check", "bech32", "bech32m", "utf8", "hex", "CODERS", "coderTypeError", "init_esm", "__esmMin", "s", "abc", "block", "slice", "blockLen", "j", "sha256", "require_english", "__commonJSMin", "exports", "number", "n", "exports", "bool", "b", "bytes", "lengths", "hash", "exists", "instance", "checkFinished", "output", "out", "min", "assert", "exports", "crypto_1", "u8", "arr", "exports", "u32", "createView", "rotr", "word", "shift", "hexes", "v", "i", "bytesToHex", "uint8a", "hex", "hexToBytes", "array", "j", "hexByte", "byte", "nextTick", "asyncLoop", "iters", "tick", "cb", "ts", "diff", "utf8ToBytes", "str", "toBytes", "data", "concatBytes", "arrays", "a", "length", "result", "pad", "Hash", "isPlainObject", "obj", "checkOpts", "defaults", "opts", "wrapConstructor", "hashConstructor", "hashC", "message", "tmp", "wrapConstructorWithOpts", "hashCons", "msg", "randomBytes", "bytesLength", "_assert_js_1", "utils_js_1", "HMAC", "hash", "_key", "key", "blockLen", "pad", "buf", "out", "to", "oHash", "iHash", "finished", "destroyed", "outputLen", "hmac", "message", "exports", "_assert_js_1", "hmac_js_1", "utils_js_1", "pbkdf2Init", "hash", "_password", "_salt", "_opts", "opts", "c", "dkLen", "asyncTick", "password", "salt", "DK", "PRF", "PRFSalt", "pbkdf2Output", "prfW", "u", "pbkdf2", "arr", "view", "ti", "pos", "Ti", "ui", "i", "exports", "pbkdf2Async", "_assert_js_1", "utils_js_1", "setBigUint64", "view", "byteOffset", "value", "isLE", "_32n", "_u32_max", "wh", "wl", "h", "l", "SHA2", "blockLen", "outputLen", "padOffset", "data", "buffer", "len", "pos", "take", "dataView", "out", "i", "oview", "outLen", "state", "res", "to", "length", "finished", "destroyed", "exports", "_sha2_js_1", "utils_js_1", "Chi", "a", "b", "c", "Maj", "SHA256_K", "IV", "SHA256_W", "SHA256", "A", "B", "C", "D", "E", "F", "G", "H", "view", "offset", "i", "W15", "W2", "s0", "s1", "sigma1", "T1", "T2", "SHA224", "exports", "U32_MASK64", "_32n", "fromBig", "n", "le", "exports", "split", "lst", "Ah", "Al", "i", "h", "l", "toBig", "shrSH", "s", "shrSL", "rotrSH", "rotrSL", "rotrBH", "rotrBL", "rotr32H", "rotr32L", "rotlSH", "rotlSL", "rotlBH", "rotlBL", "add", "Bh", "Bl", "add3L", "Cl", "add3H", "low", "Ch", "add4L", "Dl", "add4H", "Dh", "add5L", "El", "add5H", "Eh", "u64", "_sha2_js_1", "_u64_js_1", "utils_js_1", "SHA512_Kh", "SHA512_Kl", "n", "SHA512_W_H", "SHA512_W_L", "SHA512", "Ah", "Al", "Bh", "Bl", "Ch", "Cl", "Dh", "Dl", "Eh", "El", "Fh", "Fl", "Gh", "Gl", "Hh", "Hl", "view", "offset", "i", "W15h", "W15l", "s0h", "s0l", "W2h", "W2l", "s1h", "s1l", "SUMl", "SUMh", "sigma1h", "sigma1l", "CHIh", "CHIl", "T1ll", "T1h", "T1l", "sigma0h", "sigma0l", "MAJh", "MAJl", "All", "exports", "SHA512_224", "SHA512_256", "SHA384", "require_lib", "__commonJSMin", "exports", "assertNumber", "n", "chain", "args", "wrap", "a", "b", "c", "encode", "acc", "i", "decode", "alphabet", "digits", "input", "letter", "index", "join", "separator", "from", "to", "padding", "bits", "chr", "data", "end", "normalize", "fn", "convertRadix", "pos", "res", "d", "carry", "done", "digit", "digitBase", "gcd", "radix2carry", "convertRadix2", "mask", "radix", "num", "bytes", "radix2", "revPadding", "unsafeWrapper", "checksum", "len", "payload", "newChecksum", "oldChecksum", "s", "genBase58", "abc", "XMR_BLOCK_LEN", "block", "str", "slice", "blockLen", "j", "base58check", "sha256", "BECH_ALPHABET", "POLYMOD_GENERATORS", "bech32Polymod", "pre", "chk", "bechChecksum", "prefix", "words", "encodingConst", "v", "genBech32", "encoding", "ENCODING_CONST", "_words", "fromWords", "toWords", "fromWordsUnsafe", "limit", "actualLength", "lowered", "sepIndex", "sum", "decodeUnsafe", "decodeToBytes", "CODERS", "coderTypeError", "bytesToString", "type", "stringToBytes", "require_bip39", "__commonJSMin", "exports", "_assert_1", "pbkdf2_1", "sha256_1", "sha512_1", "utils_1", "base_1", "isJapanese", "wordlist", "nfkd", "str", "normalize", "norm", "words", "assertEntropy", "entropy", "generateMnemonic", "strength", "entropyToMnemonic", "calcChecksum", "bitsLeft", "getCoder", "i", "mnemonicToEntropy", "mnemonic", "validateMnemonic", "salt", "passphrase", "mnemonicToSeed", "mnemonicToSeedSync", "number", "n", "bool", "b", "bytes", "lengths", "hash", "exists", "instance", "checkFinished", "output", "out", "min", "assert", "assert_default", "init_assert", "__esmMin", "crypto", "init_cryptoBrowser", "__esmMin", "bytesToHex", "uint8a", "hex", "i", "hexes", "hexToBytes", "array", "j", "hexByte", "byte", "utf8ToBytes", "str", "toBytes", "data", "concatBytes", "arrays", "a", "length", "arr", "result", "pad", "wrapConstructor", "hashConstructor", "hashC", "message", "tmp", "createView", "rotr", "isLE", "Hash", "init_utils", "__esmMin", "init_cryptoBrowser", "word", "shift", "v", "HMAC", "hmac", "init_hmac", "__esmMin", "init_assert", "init_utils", "Hash", "hash", "_key", "assert_default", "key", "toBytes", "blockLen", "pad", "buf", "out", "to", "oHash", "iHash", "finished", "destroyed", "outputLen", "message", "setBigUint64", "view", "byteOffset", "value", "isLE", "_32n", "_u32_max", "wh", "wl", "h", "l", "SHA2", "init_sha2", "__esmMin", "init_assert", "init_utils", "Hash", "blockLen", "outputLen", "padOffset", "createView", "data", "assert_default", "buffer", "toBytes", "len", "pos", "take", "dataView", "out", "i", "oview", "outLen", "state", "res", "to", "length", "finished", "destroyed", "f", "group", "x", "y", "z", "Rho", "Id", "Pi", "idxL", "idxR", "shifts", "shiftsL", "shiftsR", "Kl", "Kr", "rotl", "BUF", "RIPEMD160", "ripemd160", "init_ripemd160", "__esmMin", "init_sha2", "init_utils", "_", "i", "j", "k", "idx", "word", "shift", "SHA2", "h0", "h1", "h2", "h3", "h4", "view", "offset", "al", "ar", "bl", "br", "cl", "cr", "dl", "dr", "el", "er", "rGroup", "hbl", "hbr", "rl", "rr", "sl", "sr", "tl", "tr", "wrapConstructor", "Chi", "Maj", "SHA256_K", "IV", "SHA256_W", "SHA256", "SHA224", "sha256", "sha224", "init_sha256", "__esmMin", "init_sha2", "init_utils", "a", "b", "c", "SHA2", "A", "B", "C", "D", "E", "F", "G", "H", "view", "offset", "i", "W15", "W2", "s0", "rotr", "s1", "sigma1", "T1", "T2", "wrapConstructor", "fromBig", "n", "le", "U32_MASK64", "_32n", "split", "lst", "Ah", "Al", "i", "h", "l", "add", "Bh", "Bl", "toBig", "shrSH", "shrSL", "rotrSH", "rotrSL", "rotrBH", "rotrBL", "rotr32H", "rotr32L", "rotlSH", "rotlSL", "rotlBH", "rotlBL", "add3L", "add3H", "add4L", "add4H", "add5L", "add5H", "u64", "u64_default", "init_u64", "__esmMin", "s", "Cl", "low", "Ch", "Dl", "Dh", "El", "Eh", "SHA512_Kh", "SHA512_Kl", "SHA512_W_H", "SHA512_W_L", "SHA512", "SHA512_224", "SHA512_256", "SHA384", "sha512", "sha512_224", "sha512_256", "sha384", "init_sha512", "__esmMin", "init_sha2", "init_u64", "init_utils", "u64_default", "n", "SHA2", "Ah", "Al", "Bh", "Bl", "Ch", "Cl", "Dh", "Dl", "Eh", "El", "Fh", "Fl", "Gh", "Gl", "Hh", "Hl", "view", "offset", "i", "W15h", "W15l", "s0h", "s0l", "W2h", "W2l", "s1h", "s1l", "SUMl", "SUMh", "sigma1h", "sigma1l", "CHIh", "CHIl", "T1ll", "T1h", "T1l", "sigma0h", "sigma0l", "MAJh", "MAJl", "All", "wrapConstructor", "bytesToNumber", "bytes", "bytesToHex", "numberToBytes", "num", "hexToBytes", "base58check", "MASTER_SECRET", "BITCOIN_VERSIONS", "HARDENED_OFFSET", "hash160", "fromU32", "toU32", "HDKey", "init_esm", "__esmMin", "init_hmac", "init_ripemd160", "init_sha256", "init_sha512", "init_assert", "init_utils", "utils", "key", "msgs", "hmac", "sha256", "utf8ToBytes", "data", "ripemd160", "createView", "n", "buf", "opt", "getPublicKey", "Point", "priv", "concatBytes", "seed", "versions", "I", "sha512", "base58key", "keyBuffer", "keyView", "version", "isPriv", "json", "path", "parts", "child", "c", "m", "idx", "index", "childTweak", "chainCode", "added", "CURVE", "hash", "signSync", "signature", "sig", "Signature", "verify", "HMAC", "hmac", "init_hmac", "__esmMin", "init_utils", "Hash", "hash", "_key", "assertHash", "key", "toBytes", "blockLen", "pad", "buf", "out", "to", "oHash", "iHash", "finished", "destroyed", "outputLen", "message", "getPublicKey", "privateKey", "utils", "schnorr", "normalizeURL", "url", "p", "insertEventIntoDescendingList", "sortedArray", "event", "start", "end", "midPoint", "position", "insertEventIntoAscendingList", "serializeEvent", "evt", "validateEvent", "getEventHash", "eventHash", "sha256", "utf8Encoder", "i", "tag", "j", "verifySignature", "matchFilter", "filter", "f", "tagName", "values", "t", "v", "matchFilters", "filters", "getHex64", "json", "field", "len", "idx", "s", "getInt", "sliced", "getSubscriptionId", "pstart", "pend", "matchEventId", "id", "matchEventPubkey", "pubkey", "matchEventKind", "kind", "relayInit", "options", "listTimeout", "getTimeout", "ws", "openSubs", "listeners", "subListeners", "pubListeners", "connectRelay", "resolve", "reject", "cb", "incomingMessageQueue", "handleNextInterval", "e", "handleNext", "subid", "so", "data", "id2", "ok", "reason", "notice", "connected", "connect", "trySend", "params", "msg", "err", "sub", "skipVerification", "alreadyHaveEvent", "newFilters", "newOpts", "type", "listeners2", "index", "opts", "events", "timeout", "badPub", "relay", "typ", "encrypt", "privkey", "text", "key", "getSharedSecret", "normalizedKey", "getNormalizedX", "iv", "randomBytes", "plaintext", "cryptoKey", "ciphertext", "ctb64", "base64", "ivb64", "decrypt", "utf8Decoder", "useFetchImplementation", "fetchImplementation", "_fetch", "searchDomain", "domain", "query", "queryProfile", "fullname", "name", "res", "relays", "privateKeyFromSeedWords", "mnemonic", "passphrase", "HDKey", "generateSeedWords", "validateWords", "words", "decode", "nip19", "prefix", "bech32", "Bech32MaxSize", "tlv", "parseTLV", "d", "result", "rest", "l", "nsecEncode", "hex", "encodeBytes", "npubEncode", "noteEncode", "nprofileEncode", "profile", "encodeTLV", "neventEncode", "naddrEncode", "addr", "entries", "vs", "entry", "createDelegation", "parameters", "conditions", "cond", "sighash", "sig", "getDelegator", "tag2", "operator", "value", "useFetchImplementation2", "_fetch2", "getZapEndpoint", "metadata", "lnurl", "lud06", "lud16", "body", "makeZapRequest", "amount", "comment", "zr", "validateZapRequest", "zapRequestString", "zapRequest", "makeZapReceipt", "preimage", "bolt11", "paidAt", "tagsFromZapRequest", "zap", "import_english", "import_bip39", "__defProp", "__export", "utils_exports", "fakejson_exports", "SimplePool", "nip04_exports", "nip05_exports", "nip06_exports", "nip19_exports", "nip26_exports", "nip57_exports", "init_nostr", "__esmMin", "init_esm", "init_sha256", "init_utils", "init_hmac", "target", "all", "nm", "existing", "_knownIds", "modifiedOpts", "set", "subs", "eventListeners", "eoseListeners", "eosesMissing", "eoseSent", "eoseTimeout", "r", "handleEose", "greaterSub", "filters2", "opts2", "pubs", "pub", "msgs", "hmac", "pool", "activeRelays", "requestEventsFromRelays", "publishEventToRelay", "closeAllConnections", "init_RelayManagement", "__esmMin", "init_nostr", "SimplePool", "pubkeys", "eventProcesser", "relays", "kinds", "__async", "uniqueRelays", "sub", "r", "event", "pub", "timeout", "error", "import_isomorphic_dompurify", "eventCache", "profileCache", "lastFetchDate", "fetchedthissession", "updateLastFetchDate", "lastUpdateDate", "updateLastUpdateDate", "isUptodate", "hadLatest", "storeMyProfileEvent", "fetchCachedMyProfileEventHistory", "fetchCachedMyProfileEvent", "getRelays", "fetchMyProfileEvents", "storeProfileEvent", "fetchMyContactsProfileEvents", "fetchCachedProfileEvent", "getContactMostPopularPetname", "getMyPetnameForUser", "isUserMyContact", "getContactName", "publishEvent", "submitUnsignedEvent", "init_fetchEvents", "__esmMin", "init_LocalStorage", "init_RelayManagement", "d", "localStorageGetItem", "localStorageSetItem", "f", "u", "event", "arrayname", "ls", "e", "kind", "x", "y", "a", "myrelays", "t", "r", "pubkey", "profileEventProcesser", "__async", "k", "starterRelays", "additionalRelaysFound", "requestEventsFromRelays", "existingRelays", "relay", "newRelayList", "c", "required", "petnamecounts", "pk", "petnametag", "pv", "__spreadProps", "__spreadValues", "b", "mypetname", "m", "name", "display_name", "popularpetname", "relays", "uniqueRelays", "publishEventToRelay", "ElementId", "innerHTMLAfterSuccess", "ne", "error", "en_US_default", "diff", "idx", "unit", "EN_US", "init_en_US", "__esmMin", "zh_CN_default", "diff", "idx", "unit", "ZH_CN", "init_zh_CN", "__esmMin", "Locales", "register", "getLocale", "init_register", "__esmMin", "locale", "func", "toDate", "input", "formatDiff", "diff", "localeFunc", "agoIn", "totalSec", "idx", "SEC_ARRAY", "diffSec", "date", "relativeDate", "relDate", "init_date", "__esmMin", "format", "init_format", "__esmMin", "init_date", "init_register", "date", "locale", "opts", "sec", "diffSec", "formatDiff", "getLocale", "init_dom", "__esmMin", "init_realtime", "__esmMin", "init_dom", "init_date", "init_register", "init_esm", "__esmMin", "init_en_US", "init_zh_CN", "init_register", "init_format", "init_realtime", "register", "en_US_default", "zh_CN_default", "import_isomorphic_dompurify", "changeCache", "generateChangesTable", "generateMetadataChanges", "sameContact", "getPetname", "generateContactsChanges", "summariseRelay", "generateRelayChanges", "generateHistoryTable", "makeContactsClickable", "activateRestoreButtons", "loadBackupHistory", "init_LoadHistory", "__esmMin", "init_esm", "init_fetchEvents", "changes", "c", "format", "v", "history", "cacheKey", "e", "results", "i", "a", "clean", "s", "k", "nextc", "x", "y", "getContactName", "current", "t", "next", "added", "n", "r", "nv", "removed", "relayReadAndWrite", "addedorremoveed", "wonly", "ronly", "randw", "container", "onContactClick", "mark", "titleAttr", "pubkey", "afterRestore", "eid", "el", "_a", "id", "sig", "unsigned", "__objRest", "event", "__async", "submitUnsignedEvent", "tr", "successIndicator", "RootElementID", "kind", "h", "fetchCachedMyProfileEventHistory", "table", "style", "import_isomorphic_dompurify", "nip05cache", "domCache", "getElement", "generateContactDetails", "loadContactDetails", "enhanceContactHistory", "LoadContactsPage", "LoadContactsPage_default", "init_LoadContactsPage", "__esmMin", "init_nostr", "init_fetchEvents", "init_LoadHistory", "init_LocalStorage", "id", "element", "pubkey", "fetchCachedProfileEvent", "getContactName", "m", "ismycontact", "isUserMyContact", "container", "__async", "nip05el", "addr", "verified", "verifiedEl", "r", "nip05_exports", "e", "backBtn", "contactHistory", "restoreBtn", "ce", "fetchCachedMyProfileEvent", "tags", "t", "submitUnsignedEvent", "localStorageGetItem", "loadBackupHistory", "newBackBtn", "history", "mark", "titleAttr", "key", "loadingElement", "import_isomorphic_dompurify", "toTextInput", "toTextarea", "standardkeys", "generateForm", "SubmitMetadataForm", "loadMetadataForm", "LoadMetadataPage", "init_LoadMetadataPage", "__esmMin", "init_nostr", "init_fetchEvents", "init_LoadHistory", "init_LocalStorage", "prop", "m", "displayname", "c", "customkeys", "k", "s", "__async", "fd", "n", "e", "fetchCachedMyProfileEvent", "d", "submitUnsignedEvent", "localStorageGetItem", "loadBackupHistory", "RootElementID", "MetadataContent", "input", "nip05input", "checkNip05", "verified", "r", "nip05_exports", "event", "o", "generateRelayRow", "generateRelayForm", "SubmitRelayForm", "loadRelayForm", "LoadRelaysPage", "LoadRelaysPage_default", "init_LoadRelaysPage", "__esmMin", "init_fetchEvents", "init_LoadHistory", "init_LocalStorage", "index", "tag", "event", "a", "i", "__async", "relayRows", "tags", "row", "_a", "_b", "_c", "url", "urlElement", "readChecked", "writeChecked", "base", "submitUnsignedEvent", "localStorageGetItem", "loadBackupHistory", "RootElementID", "container", "fetchCachedMyProfileEvent", "submitBtn", "resetBtn", "addBtn", "newRelayRow", "count", "div", "generateLogoHero", "injectLoading", "generateMetadataSummary", "generateContactsSummary", "generateRelaysSummary", "generateMetadataHeader", "generateBackupHeroHeading", "LoadProfileHome", "init_LoadProfileHome", "__esmMin", "init_fetchEvents", "init_LoadContactsPage", "init_LoadMetadataPage", "init_LoadRelaysPage", "loading", "e", "read", "t", "write", "c", "about", "uptodate", "noprofileinfo", "hadlatest", "content", "fetchCachedMyProfileEvent", "isUptodate", "hadLatest", "o", "mbutton", "LoadMetadataPage", "cbutton", "LoadContactsPage_default", "rbutton", "LoadRelaysPage_default", "donwloada", "event", "jsonStr", "fetchCachedMyProfileEventHistory", "element", "import_isomorphic_dompurify", "generateEventListItem", "generateEventList", "generateDeletePage", "isValidEventId", "createAndSubmitDeletionEvent", "setupDeleteButtons", "getAllUserEvents", "LoadDeletePage", "LoadDeletePage_default", "init_LoadDeletePage", "__esmMin", "init_fetchEvents", "init_LocalStorage", "init_esm", "event", "displayContent", "e", "format", "events", "a", "b", "eventId", "elementId", "__async", "unsignedEvent", "localStorageGetItem", "submitUnsignedEvent", "deleteBtn", "statusDiv", "customDeleteBtn", "eventIdInput", "kind0Events", "fetchCachedMyProfileEventHistory", "kind3Events", "kind10002Events", "container", "pubkey", "fetchMyProfileEvents", "allEvents", "Logout", "Logout_default", "init_Logout", "__esmMin", "init_LocalStorage", "localStorageClear", "require_src", "__commonJSMin", "exports", "init_LoadProfileHome", "init_fetchEvents", "init_LocalStorage", "init_LoadMetadataPage", "init_LoadContactsPage", "init_LoadRelaysPage", "init_LoadDeletePage", "init_Logout", "init_RelayManagement", "isLoading", "setPageLoading", "loading", "container", "loadingIndicator", "indicator", "loadProfile", "__async", "LoadProfileHome", "mainnav", "setupNav", "id", "handler", "element", "e", "LoadMetadataPage", "LoadContactsPage_default", "LoadRelaysPage_default", "LoadDeletePage_default", "closeAllConnections", "Logout_default", "loadingTasks", "fetchMyProfileEvents", "localStorageGetItem", "fetchMyContactsProfileEvents", "err", "error", "LoadLandingPage", "aboutcontent", "generateLogoHero", "titleElement", "subtitleElement", "loadButton", "ev", "pubkey", "localStorageSetItem", "load"]
}
